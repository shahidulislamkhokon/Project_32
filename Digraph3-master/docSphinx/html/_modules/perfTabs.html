
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>perfTabs &#8212; Digraph3 3.7-3200+ documentation</title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Digraph3 3.7-3200+ documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Module code</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for perfTabs</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python3</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Python implementation of digraphs</span>
<span class="sd">Module for working with performance tableaux  </span>
<span class="sd">Copyright (C) 2011-2020  Raymond Bisdorff</span>

<span class="sd">    This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 3 of the License, or (at your option) any later version.</span>

<span class="sd">    This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.</span>

<span class="sd">    You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="c1">#######################</span>

<span class="n">__version__</span> <span class="o">=</span> <span class="s2">&quot;$Revision: 1.37 $&quot;</span>
<span class="c1"># $Source: /home/cvsroot/Digraph/perfTabs.py,v $</span>

<span class="kn">from</span> <span class="nn">perfTabs</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">decimal</span>
<span class="kn">from</span> <span class="nn">digraphsTools</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<span class="kn">from</span> <span class="nn">ast</span> <span class="kn">import</span> <span class="n">literal_eval</span>

<span class="c1"># ----------  old XML handling ------------------</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">xml.sax</span> <span class="kn">import</span> <span class="o">*</span>
<span class="k">except</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;XML extension will not work with this Python version!&#39;</span><span class="p">)</span>

<span class="c1">########################################################################################################################</span>
<span class="c1">#######                                                MCSRDecimalEncoder                                         ######</span>
<span class="c1">#######                                                         START                                             ######</span>
<span class="c1">########################################################################################################################</span>
<span class="c1">##</span>
<span class="c1">###extension of the json encoder to encode decimals added by Ian</span>
<span class="c1">##class _DecimalJSONEncoder(json.JSONEncoder):</span>
<span class="c1">##</span>
<span class="c1">##    def default(self,obj):</span>
<span class="c1">##</span>
<span class="c1">##        if isinstance(obj,decimal.Decimal):</span>
<span class="c1">##            #cast into float so that the native encoder can handle the rest</span>
<span class="c1">##            #since the result is a string only the string representation is used,</span>
<span class="c1">##            # which is still identical to the decimal value</span>
<span class="c1">##            return float(obj)</span>
<span class="c1">##        else:</span>
<span class="c1">##            return obj.__dict__</span>
<span class="c1">##        return json.JSONEncoder.default(self, obj)</span>
<span class="c1">##</span>
<span class="c1">########################################################################################################################</span>
<span class="c1">#######                                                MCSRDecimalEncoder                                         ######</span>
<span class="c1">#######                                                         END                                               ######</span>
<span class="c1">########################################################################################################################</span>




<div class="viewcode-block" id="PerformanceTableau"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau">[docs]</a><span class="k">class</span> <span class="nc">PerformanceTableau</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">In this *Digraph3* module, the root :py:class:`perfTabs.PerformanceTableau` class provides a generic **performance table model**. A given object of this class consists in:</span>

<span class="sd">     1. a set of potential decision **actions** : an ordered dictionary describing the potential decision actions or alternatives with &#39;name&#39; and &#39;comment&#39; attributes,</span>
<span class="sd">     2. an optional set of decision **objectives**: an ordered dictionary with name, comment, weight and list of concerned criteria per objective,</span>
<span class="sd">     3. a coherent family of **criteria**: a ordered dictionary of criteria functions used for measuring the performance of each potential decision action with respect to the preference dimension captured by each criterion,</span>
<span class="sd">     4. the **evaluations**: a dictionary of performance evaluations for each decision action or alternative on each criterion function.</span>

<span class="sd">Structure::</span>

<span class="sd">       actions = OrderedDict([(&#39;a1&#39;, {&#39;name&#39;: ..., &#39;comment&#39;: ...}),</span>
<span class="sd">                  (&#39;a2&#39;, {&#39;name&#39;: ..., &#39;comment&#39;: ...}),</span>
<span class="sd">                  ...])</span>
<span class="sd">       objectives = OrderedDict([</span>
<span class="sd">                   (&#39;obj1&#39;, {&#39;name&#39;: ..., &#39;comment&#39;: ..., &#39;weight&#39;: ..., &#39;criteria&#39;: [&#39;g1&#39;, ...]}),</span>
<span class="sd">                   (&#39;obj2&#39;, {&#39;name&#39;: ..., &#39;comment&#39;, ..., &#39;weight&#39;: ..., &#39;criteria&#39;: [&#39;g2&#39;, ...]}),</span>
<span class="sd">                   ...])</span>
<span class="sd">       criteria = OrderedDict([</span>
<span class="sd">            (&#39;g1&#39;, {&#39;weight&#39;:Decimal(&quot;3.00&quot;),</span>
<span class="sd">                    &#39;scale&#39;: (Decimal(&quot;0.00&quot;),Decimal(&quot;100.00&quot;)),</span>
<span class="sd">                    &#39;thresholds&#39; : {&#39;pref&#39;: (Decimal(&#39;20.0&#39;), Decimal(&#39;0.0&#39;)),</span>
<span class="sd">                                    &#39;ind&#39;: (Decimal(&#39;10.0&#39;), Decimal(&#39;0.0&#39;)),</span>
<span class="sd">                                    &#39;veto&#39;: (Decimal(&#39;80.0&#39;), Decimal(&#39;0.0&#39;))},</span>
<span class="sd">                    &#39;objective&#39;: &#39;obj1&#39;,</span>
<span class="sd">                    }),</span>
<span class="sd">            (&#39;g2&#39;, {&#39;weight&#39;:Decimal(&quot;5.00&quot;),</span>
<span class="sd">                    &#39;scale&#39;: (Decimal(&quot;0.00&quot;),Decimal(&quot;100.00&quot;)),</span>
<span class="sd">                    &#39;thresholds&#39; : {&#39;pref&#39;: (Decimal(&#39;20.0&#39;), Decimal(&#39;0.0&#39;)),</span>
<span class="sd">                                          &#39;ind&#39;: (Decimal(&#39;10.0&#39;), Decimal(&#39;0.0&#39;)),</span>
<span class="sd">                                          &#39;veto&#39;: (Decimal(&#39;80.0&#39;), Decimal(&#39;0.0&#39;))},</span>
<span class="sd">                    &#39;objective&#39;: &#39;obj2&#39;,</span>
<span class="sd">                    }),</span>
<span class="sd">            ...])</span>
<span class="sd">       evaluation = {&#39;g1&#39;: {&#39;a1&#39;:Decimal(&quot;57.28&quot;),&#39;a2&#39;:Decimal(&quot;99.85&quot;), ...},</span>
<span class="sd">                     &#39;g2&#39;: {&#39;a1&#39;:Decimal(&quot;88.12&quot;),&#39;a2&#39;:Decimal(&quot;33.25&quot;), ...},</span>
<span class="sd">                     ...}</span>

<span class="sd">With the help of the :py:class:`perfTabs.RandomPerformanceTableau` class let us generate for illustration a random performance tableau concerning 7 decision actions or alternatives denoted *a01*, *a02*, ..., *a07*:</span>
<span class="sd">    &gt;&gt;&gt; from randomPerfTabs import RandomPerformanceTableau</span>
<span class="sd">    &gt;&gt;&gt; rt = RandomPerformanceTableau(seed=100)</span>
<span class="sd">    &gt;&gt;&gt; rt.showActions()</span>
<span class="sd">        *----- show decision action --------------*</span>
<span class="sd">        key:  a01</span>
<span class="sd">          short name: a01</span>
<span class="sd">          name:       random decision action</span>
<span class="sd">          comment:    RandomPerformanceTableau() generated.</span>
<span class="sd">        key:  a02</span>
<span class="sd">          short name: a02</span>
<span class="sd">          name:       random decision action</span>
<span class="sd">          comment:    RandomPerformanceTableau() generated.</span>
<span class="sd">        key:  a03</span>
<span class="sd">          short name: a03</span>
<span class="sd">          name:       random decision action</span>
<span class="sd">          comment:    RandomPerformanceTableau() generated.</span>
<span class="sd">        ...</span>
<span class="sd">        ...</span>
<span class="sd">        key:  a07</span>
<span class="sd">        name:       random decision action</span>
<span class="sd">        comment:    RandomPerformanceTableau() generated.</span>
<span class="sd">    &gt;&gt;&gt; ...</span>
<span class="sd">   </span>
<span class="sd">In this example we consider furthermore a family of seven equisignificant cardinal criteria functions *g01*, *g02*, ..., *g07*, measuring the performance of each alternative on a rational scale form 0.0 to 100.00. In order to capture the evaluation&#39;s uncertainty and imprecision, each criterion function *g1* to *g7* admits three performance discrimination thresholds of 10, 20 and 80 pts for warranting respectively any indifference, preference and veto situations: </span>
<span class="sd">    &gt;&gt;&gt; rt.showCriteria(IntegerWeights=True)</span>
<span class="sd">        *----  criteria -----*</span>
<span class="sd">        g1 &#39;RandomPerformanceTableau() instance&#39;</span>
<span class="sd">          Scale = (0.0, 100.0)</span>
<span class="sd">          Weight = 1 </span>
<span class="sd">          Threshold ind : 10.00 + 0.00x ; percentile:  0.20</span>
<span class="sd">          Threshold veto : 80.00 + 0.00x ; percentile:  0.93</span>
<span class="sd">          Threshold pref : 20.00 + 0.00x ; percentile:  0.28</span>
<span class="sd">        g2 &#39;RandomPerformanceTableau() instance&#39;</span>
<span class="sd">          Scale = (0.0, 100.0)</span>
<span class="sd">          Weight = 1 </span>
<span class="sd">          Threshold ind : 10.00 + 0.00x ; percentile:  0.18</span>
<span class="sd">          Threshold veto : 80.00 + 0.00x ; percentile:  1.0</span>
<span class="sd">          Threshold pref : 20.00 + 0.00x ; percentile:  0.37</span>
<span class="sd">        g3 &#39;RandomPerformanceTableau() instance&#39;</span>
<span class="sd">          Scale = (0.0, 100.0)</span>
<span class="sd">          Weight = 1 </span>
<span class="sd">          Threshold ind : 10.00 + 0.00x ; percentile:  0.15</span>
<span class="sd">          Threshold veto : 80.00 + 0.00x ; percentile:  0.96</span>
<span class="sd">          Threshold pref : 20.00 + 0.00x ; percentile:  0.29</span>
<span class="sd">        ...</span>
<span class="sd">        ...</span>
<span class="sd">        g7 &#39;RandomPerformanceTableau() instance&#39;</span>
<span class="sd">          Scale = (0.0, 100.0)</span>
<span class="sd">          Weight = 1 </span>
<span class="sd">          Threshold ind : 10.00 + 0.00x ; percentile:  0.17</span>
<span class="sd">          Threshold veto : 80.00 + 0.00x ; percentile:  0.97</span>
<span class="sd">          Threshold pref : 20.00 + 0.00x ; percentile:  0.37</span>
<span class="sd">    &gt;&gt;&gt; ...</span>

<span class="sd">The performance evaluations of each decision alternative on each criterion are gathered in a *performance tableau*:</span>
<span class="sd">    &gt;&gt;&gt; rt.showPerformanceTableau()</span>
<span class="sd">        *----  performance tableau -----*</span>
<span class="sd">        criteria | weights |   &#39;a01&#39;   &#39;a02&#39;   &#39;a03&#39;    ...   &#39;a12&#39;   &#39;a13&#39;   </span>
<span class="sd">        ---------|----------------------------------------------------------------</span>
<span class="sd">           &#39;g1&#39;  |   1     |   14.57   45.49   77.08    ...   93.30   94.71  </span>
<span class="sd">           &#39;g2&#39;  |   1     |   33.54   30.94   76.80    ...   55.54   90.12  </span>
<span class="sd">           &#39;g3&#39;  |   1     |   81.80   16.04   64.85    ...   23.72   44.82  </span>
<span class="sd">           &#39;g4&#39;  |   1     |   63.78   90.23   12.66    ...   52.82   34.33  </span>
<span class="sd">           &#39;g5&#39;  |   1     |   85.42   36.30   48.36    ...   76.70   51.36  </span>
<span class="sd">           &#39;g6&#39;  |   1     |   49.35   58.27   14.72    ...   21.91   30.99  </span>
<span class="sd">           &#39;g7&#39;  |   1     |   62.12   65.08   74.87    ...   38.98   93.64  </span>
<span class="sd">    &gt;&gt;&gt; ...</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Default presentation method for PerformanceTableau instances.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">reprString</span> <span class="o">=</span> <span class="s1">&#39;*------- PerformanceTableau instance description ------*</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Instance class   : </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Seed             : </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">randomSeed</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Instance name    : </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;# Actions        : </span><span class="si">%d</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;# Objectives     : </span><span class="si">%d</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objectives</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>       
        <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;# Criteria       : </span><span class="si">%d</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">)</span>
        <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Attributes       : </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>     
        <span class="k">return</span> <span class="n">reprString</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">filePerfTab</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">isEmpty</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
        <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
        <span class="k">if</span> <span class="n">filePerfTab</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="n">filePerfTab</span> <span class="o">+</span> <span class="s1">&#39;.py&#39;</span>
            <span class="n">argDict</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">exec</span><span class="p">(</span><span class="nb">compile</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="n">fileName</span><span class="p">,</span> <span class="s1">&#39;exec&#39;</span><span class="p">),</span><span class="n">argDict</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">filePerfTab</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">argDict</span><span class="p">[</span><span class="s1">&#39;actions&#39;</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">argDict</span><span class="p">[</span><span class="s1">&#39;actionset&#39;</span><span class="p">]</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span> <span class="o">=</span> <span class="n">argDict</span><span class="p">[</span><span class="s1">&#39;objectives&#39;</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">weightset</span> <span class="o">=</span> <span class="n">argDict</span><span class="p">[</span><span class="s1">&#39;weightset&#39;</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">thresholds</span> <span class="o">=</span> <span class="n">argDict</span><span class="p">[</span><span class="s1">&#39;threshold&#39;</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">argDict</span><span class="p">[</span><span class="s1">&#39;criteria&#39;</span><span class="p">]:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;weight&#39;</span><span class="p">:</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">weightset</span><span class="p">[</span><span class="n">g</span><span class="p">])),</span>
                                        <span class="s1">&#39;thresholds&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">thresholds</span><span class="p">[</span><span class="n">g</span><span class="p">]}</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">argDict</span><span class="p">[</span><span class="s1">&#39;criteria&#39;</span><span class="p">]</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">weightPreorder</span> <span class="o">=</span> <span class="n">argDict</span><span class="p">[</span><span class="s1">&#39;weightorder&#39;</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">weightPreorder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeWeightPreorder</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">argDict</span><span class="p">[</span><span class="s1">&#39;evaluation&#39;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">isEmpty</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">copy</span>
            <span class="kn">from</span> <span class="nn">randomPerfTabs</span> <span class="kn">import</span> <span class="n">RandomPerformanceTableau</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="n">RandomPerformanceTableau</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">temp</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">temp</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">temp</span><span class="o">.</span><span class="n">criteria</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">weightPreorder</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">computeWeightPreorder</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">temp</span><span class="o">.</span><span class="n">evaluation</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;empty_instance&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">weightPreorder</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="p">{}</span>
            

<div class="viewcode-block" id="PerformanceTableau.hasOddWeightAlgebra"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.hasOddWeightAlgebra">[docs]</a>    <span class="k">def</span> <span class="nf">hasOddWeightAlgebra</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Verify if the given criteria[self][&#39;weight&#39;] are odd or not.</span>
<span class="sd">        Return a Boolen value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">digraphs</span> <span class="kn">import</span> <span class="n">powerset</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">w</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
            <span class="n">w</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;weights = &#39;</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
        <span class="n">Eorig</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">)))</span>
        <span class="n">E</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">Eorig</span><span class="p">)</span>
        <span class="n">OddWeightAlgebra</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">for</span> <span class="n">X</span> <span class="ow">in</span> <span class="n">powerset</span><span class="p">(</span><span class="n">E</span><span class="p">):</span>
            <span class="n">Xc</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">Eorig</span><span class="p">)</span> <span class="o">-</span> <span class="n">X</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Xc</span><span class="p">)</span>
            <span class="n">sumX</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">X</span><span class="p">:</span>
                <span class="n">sumX</span> <span class="o">+=</span> <span class="n">w</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="n">sumXc</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">Xc</span><span class="p">:</span>
                <span class="n">sumXc</span> <span class="o">+=</span> <span class="n">w</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">sumX</span><span class="p">,</span> <span class="n">sumXc</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">sumX</span> <span class="o">==</span> <span class="n">sumXc</span><span class="p">:</span>
                <span class="c1">#print sumX, sumXc</span>
                <span class="n">OddWeightAlgebra</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">break</span>
        <span class="k">return</span> <span class="n">OddWeightAlgebra</span></div>

        
<div class="viewcode-block" id="PerformanceTableau.computeWeightedAveragePerformances"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.computeWeightedAveragePerformances">[docs]</a>    <span class="k">def</span> <span class="nf">computeWeightedAveragePerformances</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">isNormalized</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">lowValue</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">highValue</span><span class="o">=</span><span class="mf">100.0</span><span class="p">,</span> <span class="n">isListRanked</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Compute normalized weighted average scores</span>
<span class="sd">        Normalization transforms by default all the scores into a</span>
<span class="sd">        common 0-100 scale. A lowValue and highValue parameter</span>
<span class="sd">        can be provided for a specific normalisation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="k">if</span> <span class="n">isNormalized</span><span class="p">:</span>
            <span class="n">normSelf</span> <span class="o">=</span> <span class="n">NormalizedPerformanceTableau</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">lowValue</span><span class="o">=</span><span class="n">lowValue</span><span class="p">,</span><span class="n">highValue</span><span class="o">=</span><span class="n">highValue</span><span class="p">)</span>
            <span class="n">evaluation</span> <span class="o">=</span> <span class="n">normSelf</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>

        <span class="n">sumWeights</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="nb">dict</span><span class="o">.</span><span class="n">keys</span><span class="p">(</span><span class="n">criteria</span><span class="p">):</span>
            <span class="n">sumWeights</span> <span class="o">+=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>

        <span class="n">weightedAverage</span> <span class="o">=</span> <span class="p">{}</span> 
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">dict</span><span class="o">.</span><span class="n">keys</span><span class="p">(</span><span class="n">actions</span><span class="p">):</span>
            <span class="n">weightedAverage</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="nb">dict</span><span class="o">.</span><span class="n">keys</span><span class="p">(</span><span class="n">criteria</span><span class="p">):</span>
                <span class="n">weightedAverage</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">+=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">*</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">sumWeights</span>
        <span class="k">if</span> <span class="n">isListRanked</span><span class="p">:</span>
            <span class="n">ranked</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">weightedAverage</span><span class="p">:</span>
                <span class="n">ranked</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">weightedAverage</span><span class="p">[</span><span class="n">x</span><span class="p">],</span><span class="n">x</span><span class="p">))</span>
            <span class="n">ranked</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">ranked</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">weightedAverage</span></div>
        
<div class="viewcode-block" id="PerformanceTableau.showActions"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.showActions">[docs]</a>    <span class="k">def</span> <span class="nf">showActions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Alphabetic</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        presentation methods for decision actions or alternatives</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----- show decision action --------------*&#39;</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="k">if</span> <span class="n">Alphabetic</span><span class="p">:</span>
            <span class="n">actionsKeys</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="o">.</span><span class="n">keys</span><span class="p">()]</span>
            <span class="n">actionsKeys</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsKeys</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;key: &#39;</span><span class="p">,</span><span class="n">x</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  short name:&#39;</span><span class="p">,</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;shortName&#39;</span><span class="p">])</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  name:      &#39;</span><span class="p">,</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  comment:   &#39;</span><span class="p">,</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;comment&#39;</span><span class="p">])</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="nb">print</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;key: &#39;</span><span class="p">,</span><span class="n">x</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  short name:&#39;</span><span class="p">,</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;shortName&#39;</span><span class="p">])</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  name:      &#39;</span><span class="p">,</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  comment:   &#39;</span><span class="p">,</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;comment&#39;</span><span class="p">])</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="nb">print</span><span class="p">()</span></div>

<div class="viewcode-block" id="PerformanceTableau.showPairwiseComparison"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.showPairwiseComparison">[docs]</a>    <span class="k">def</span> <span class="nf">showPairwiseComparison</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">hasSymetricThresholds</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">isReturningHTML</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">hasSymmetricThresholds</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders the pairwise comprison parameters on all criteria</span>
<span class="sd">        in html format</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">outrankingDigraphs</span> <span class="kn">import</span> <span class="n">BipolarOutrankingDigraph</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a,b =&#39;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">a</span> <span class="o">!=</span> <span class="n">b</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                <span class="n">html</span>  <span class="o">=</span> <span class="s1">&#39;&lt;h1&gt;Pairwise Comparison&lt;/h1&gt;&#39;</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;h2&gt;Comparing actions : (</span><span class="si">%s</span><span class="s1">,</span><span class="si">%s</span><span class="s1">)&lt;/h2&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;table style=&quot;background-color:White&quot; border=&quot;1&quot;&gt;&#39;</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr bgcolor=&quot;#9acd32&quot;&gt;&#39;</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;th&gt;crit.&lt;/th&gt;&lt;th&gt;wght.&lt;/th&gt; &lt;th&gt;g(x)&lt;/th&gt; &lt;th&gt;g(y)&lt;/th&gt; &lt;th&gt;diff&lt;/th&gt; &lt;th&gt;ind&lt;/th&gt; &lt;th&gt;wp&lt;/th&gt; &lt;th&gt;p&lt;/th&gt; &lt;th&gt;concord&lt;/th&gt; &lt;th&gt;wv&lt;/th&gt; &lt;th&gt;v&lt;/th&gt; &lt;th&gt;polarisation&lt;/th&gt;&#39;</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*------------  pairwise comparison ----*&#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Comparing actions : (</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;crit. wght.  g(x)  g(y)    diff  </span><span class="se">\t</span><span class="s1">| ind     wp      p    concord </span><span class="se">\t</span><span class="s1">|  wv   v   weak veto veto&#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;-------------------------------  </span><span class="se">\t</span><span class="s1"> ----------------------------- </span><span class="se">\t</span><span class="s1"> ----------------&#39;</span><span class="p">)</span>                
            <span class="n">concordance</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">sumWeights</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">]</span>
            <span class="n">criteriaList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="n">sumWeights</span> <span class="o">+=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-999&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-999&#39;</span><span class="p">):</span>		
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">indx</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">indy</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                            <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span><span class="n">indy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span><span class="n">indy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="n">ind</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">wpx</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">wpy</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                            <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="n">wp</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">px</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">py</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                            <span class="n">p</span> <span class="o">=</span> <span class="n">px</span> <span class="o">+</span> <span class="n">py</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">p</span> <span class="o">=</span> <span class="n">px</span> <span class="o">+</span> <span class="n">py</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="n">p</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
                        <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>
                    <span class="n">lc0</span> <span class="o">=</span> <span class="n">BipolarOutrankingDigraph</span><span class="o">.</span><span class="n">_localConcordance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">ind</span><span class="p">,</span><span class="n">wp</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">ind</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">ind</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">ind</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">wp</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">wp</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">wp</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">p</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">p</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&#39;</span>
                        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td bgcolor=&quot;#FFEEAA&quot; align=&quot;center&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt; &lt;td&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/td&gt; &lt;td&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/td&gt; &lt;td&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/td&gt; &lt;td&gt;</span><span class="si">%+2.2f</span><span class="s1">&lt;/td&gt; &lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;  &lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;  &lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;   &lt;td&gt;</span><span class="si">%+.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">],</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">],</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">],</span><span class="n">d</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">ind</span><span class="p">),</span><span class="nb">str</span><span class="p">(</span><span class="n">wp</span><span class="p">),</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">),</span><span class="n">lc0</span><span class="o">*</span><span class="nb">abs</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]))</span>
                    <span class="k">else</span><span class="p">:</span>
                         <span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="s1">&#39;  </span><span class="si">%.2f</span><span class="s1">  </span><span class="si">%2.2f</span><span class="s1">  </span><span class="si">%2.2f</span><span class="s1">  </span><span class="si">%+2.2f</span><span class="s1"> </span><span class="se">\t</span><span class="s1">| </span><span class="si">%s</span><span class="s1">  </span><span class="si">%s</span><span class="s1">  </span><span class="si">%s</span><span class="s1">   </span><span class="si">%+.2f</span><span class="s1"> </span><span class="se">\t</span><span class="s1">|&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">],</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">],</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">],</span><span class="n">d</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">ind</span><span class="p">),</span><span class="nb">str</span><span class="p">(</span><span class="n">wp</span><span class="p">),</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">),</span><span class="n">lc0</span><span class="o">*</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                    <span class="n">concordance</span> <span class="o">=</span> <span class="n">concordance</span> <span class="o">+</span> <span class="p">(</span><span class="n">lc0</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]))</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">wvx</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">wvy</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                            <span class="n">wv</span> <span class="o">=</span> <span class="n">wvx</span> <span class="o">+</span> <span class="n">wvy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">wv</span> <span class="o">=</span> <span class="n">wvx</span> <span class="o">+</span> <span class="n">wvy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="n">wv</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">vx</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">vy</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                            <span class="n">v</span> <span class="o">=</span> <span class="n">vx</span> <span class="o">+</span> <span class="n">vy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">v</span> <span class="o">=</span> <span class="n">vx</span> <span class="o">+</span> <span class="n">vy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="n">v</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="n">veto</span> <span class="o">=</span> <span class="n">BipolarOutrankingDigraph</span><span class="o">.</span><span class="n">_localVeto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">wv</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">negativeVeto</span> <span class="o">=</span> <span class="n">BipolarOutrankingDigraph</span><span class="o">.</span><span class="n">_localNegativeVeto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">wv</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
                        <span class="n">hasBipolarVeto</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="n">hasBipolarVeto</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">v</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;=</span> <span class="n">v</span><span class="p">:</span>
                                <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;     </span><span class="si">%2.2f</span><span class="s1">       </span><span class="si">%+2.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">negativeVeto</span><span class="p">))</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&lt;/td&gt; &lt;td&gt; </span><span class="si">%2.2f</span><span class="s1">&lt;/td&gt; &lt;td bgcolor=&quot;#ddffdd&quot;&gt;</span><span class="si">%+2.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">negativeVeto</span><span class="p">)</span>
                            <span class="k">elif</span> <span class="n">d</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="n">v</span><span class="p">:</span>
                                <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;     </span><span class="si">%2.2f</span><span class="s1">       </span><span class="si">%+2.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="o">-</span><span class="n">veto</span><span class="p">))</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&lt;/td&gt; &lt;td&gt; </span><span class="si">%2.2f</span><span class="s1">&lt;/td&gt; &lt;td bgcolor=&quot;#ffddff&quot;&gt;</span><span class="si">%+2.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="o">-</span><span class="n">veto</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>                                
                                    <span class="nb">print</span><span class="p">()</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;&#39;</span>
                        <span class="k">elif</span> <span class="n">wv</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;=</span> <span class="n">wv</span><span class="p">:</span>
                                <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%2.2f</span><span class="s1">      </span><span class="si">%+2.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">wv</span><span class="p">,</span> <span class="n">negativeVeto</span><span class="p">))</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/td&gt;&lt;td&gt;&lt;/td&gt; &lt;td bgcolor=&quot;#ddffdd&quot;&gt;</span><span class="si">%+2.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">wv</span><span class="p">,</span> <span class="n">negativeVeto</span><span class="p">)</span>
                            <span class="k">elif</span> <span class="n">d</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="n">wv</span><span class="p">:</span>
                                <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%2.2f</span><span class="s1">      </span><span class="si">%+2.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">wv</span><span class="p">,</span> <span class="o">-</span><span class="n">veto</span><span class="p">))</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/td&gt;&lt;td&gt;&lt;/td&gt; &lt;td bgcolor=&quot;#ffddff&quot;&gt;</span><span class="si">%+2.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">wv</span><span class="p">,</span> <span class="o">-</span><span class="n">veto</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                                    <span class="nb">print</span><span class="p">()</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;&#39;</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">()</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;&#39;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1">## unipolar case  Electre III for instance</span>
                        <span class="k">if</span> <span class="n">veto</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;-1.0&quot;</span><span class="p">):</span>
                            <span class="k">if</span> <span class="n">wv</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">v</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; </span><span class="si">%2.2f</span><span class="s1"> </span><span class="si">%2.2f</span><span class="s1"> </span><span class="si">%+2.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">wv</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">veto</span><span class="p">))</span>
                                    <span class="k">else</span><span class="p">:</span>
                                        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/td&gt; &lt;td&gt; </span><span class="si">%2.2f</span><span class="s1">&lt;/td&gt; &lt;td bgcolor=&quot;#ffddff&quot;&gt;</span><span class="si">%+2.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">wv</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">veto</span><span class="p">)</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; </span><span class="si">%2.2f</span><span class="s1">       </span><span class="si">%+2.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">wv</span><span class="p">,</span> <span class="o">-</span><span class="n">veto</span><span class="p">))</span>
                                    <span class="k">else</span><span class="p">:</span>
                                        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/td&gt; &lt;td&gt;&lt;/td&gt; &lt;td bgcolor=&quot;#ffddff&quot;&gt;</span><span class="si">%+2.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">wv</span><span class="p">,</span> <span class="o">-</span><span class="n">veto</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">v</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;       </span><span class="si">%2.2f</span><span class="s1"> </span><span class="si">%+2.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">veto</span><span class="p">))</span>
                                    <span class="k">else</span><span class="p">:</span>
                                        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&lt;/td&gt; &lt;td&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/td&gt; &lt;td bgcolor=&quot;#ffddff&quot;&gt;</span><span class="si">%+2.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="o">-</span><span class="n">veto</span><span class="p">)</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                                        <span class="nb">print</span><span class="p">()</span>
                                    <span class="k">else</span><span class="p">:</span>
                                        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;&#39;</span>
                        
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">==</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;-999&quot;</span><span class="p">):</span>
                        <span class="n">eval_c_a</span> <span class="o">=</span> <span class="s1">&#39;NA&#39;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">eval_c_a</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%2.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">==</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;-999&quot;</span><span class="p">):</span>
                        <span class="n">eval_c_b</span> <span class="o">=</span> <span class="s1">&#39;NA&#39;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">eval_c_b</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%2.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                    
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="s1">&#39;    </span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eval_c_a</span><span class="p">,</span><span class="n">eval_c_b</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td bgcolor=&quot;#FFEEAA&quot; align=&quot;center&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt; &lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/td&gt;&lt;/tr&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">],</span><span class="n">eval_c_a</span><span class="p">,</span><span class="n">eval_c_b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span><span class="o">*</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;             ----------------------------------------&#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; Valuation in range: </span><span class="si">%+.2f</span><span class="s1"> to </span><span class="si">%+.2f</span><span class="s1">; global concordance: </span><span class="si">%+.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="o">-</span><span class="n">sumWeights</span><span class="p">,</span><span class="n">sumWeights</span><span class="p">,</span><span class="n">concordance</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;&lt;/table&gt;&#39;</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;b&gt;Valuation in range: </span><span class="si">%+.2f</span><span class="s1"> to </span><span class="si">%+.2f</span><span class="s1">; global concordance: </span><span class="si">%+.2f</span><span class="s1"> &lt;/b&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="o">-</span><span class="n">sumWeights</span><span class="p">,</span><span class="n">sumWeights</span><span class="p">,</span><span class="n">concordance</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">isReturningHTML</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">html</span></div>

    
<div class="viewcode-block" id="PerformanceTableau.showCriteria"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.showCriteria">[docs]</a>    <span class="k">def</span> <span class="nf">showCriteria</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">IntegerWeights</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Alphabetic</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">ByObjectives</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        print Criteria with thresholds and weights.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">objectives</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">ByObjectives</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----  criteria -----*&#39;</span><span class="p">)</span>
<span class="c1">##        sumWeights = Decimal(&#39;0.0&#39;)</span>
<span class="c1">##        for g in criteria:</span>
<span class="c1">##            sumWeights += criteria[g][&#39;weight&#39;]</span>
        <span class="n">sumWeights</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="nb">abs</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">ByObjectives</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objectives</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">g</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteria</span> <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;objective&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">obj</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">criterionName</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">/&#39;</span> <span class="o">%</span> <span class="n">objectives</span><span class="p">[</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;objective&#39;</span><span class="p">]][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>                                        
                    <span class="k">except</span><span class="p">:</span>
                        <span class="n">criterionName</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">criterionName</span> <span class="o">+=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="k">pass</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">criterionName</span><span class="p">))</span>
                    
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  Scale =&#39;</span><span class="p">,</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">])</span>
                    <span class="k">if</span> <span class="n">IntegerWeights</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  Weight = </span><span class="si">%d</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">weightg</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">sumWeights</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  Weight = </span><span class="si">%.3f</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">weightg</span><span class="p">))</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">th</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">]:</span>
                            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;--&gt;&gt;&gt;&#39;</span><span class="p">,</span> <span class="n">th</span><span class="p">,</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="n">th</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="n">th</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  Threshold </span><span class="si">%s</span><span class="s1"> : </span><span class="si">%.2f</span><span class="s1"> + </span><span class="si">%.2f</span><span class="s1">x&#39;</span> <span class="o">%</span>\
                                  <span class="p">(</span><span class="n">th</span><span class="p">,</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="n">th</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="n">th</span><span class="p">][</span><span class="mi">1</span><span class="p">]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;; percentile: &#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">computeVariableThresholdPercentile</span><span class="p">(</span><span class="n">g</span><span class="p">,</span><span class="n">th</span><span class="p">,</span><span class="n">Debug</span><span class="p">))</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="k">pass</span>
                    <span class="nb">print</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">criteriaList</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">Alphabetic</span><span class="p">:</span>
                <span class="n">criteriaList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">criterionName</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">/&#39;</span> <span class="o">%</span> <span class="n">objectives</span><span class="p">[</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;objective&#39;</span><span class="p">]][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>                                        
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">criterionName</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">criterionName</span> <span class="o">+=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">criterionName</span><span class="p">))</span>
                
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  Scale =&#39;</span><span class="p">,</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">IntegerWeights</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  Weight = </span><span class="si">%d</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">weightg</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">sumWeights</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  Weight = </span><span class="si">%.3f</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">weightg</span><span class="p">))</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">th</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">]:</span>
                        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;--&gt;&gt;&gt;&#39;</span><span class="p">,</span> <span class="n">th</span><span class="p">,</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="n">th</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="n">th</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  Threshold </span><span class="si">%s</span><span class="s1"> : </span><span class="si">%.2f</span><span class="s1"> + </span><span class="si">%.2f</span><span class="s1">x&#39;</span>\
                              <span class="o">%</span> <span class="p">(</span><span class="n">th</span><span class="p">,</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="n">th</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="n">th</span><span class="p">][</span><span class="mi">1</span><span class="p">]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                        <span class="c1">#print self.criteria[g][&#39;thresholds&#39;][th]</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;; percentile: &#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">computeVariableThresholdPercentile</span><span class="p">(</span><span class="n">g</span><span class="p">,</span><span class="n">th</span><span class="p">,</span><span class="n">Debug</span><span class="p">))</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="nb">print</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">showObjectives</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="s1">&#39;objectives&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*------ decision objectives -------&quot;&#39;</span><span class="p">)</span>
            
            <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span><span class="p">:</span>
                                                   
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]))</span>
                                                   
                <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="p">][</span><span class="s1">&#39;criteria&#39;</span><span class="p">]:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
                                                   
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  Total weight: </span><span class="si">%.2f</span><span class="s1"> (</span><span class="si">%d</span><span class="s1"> criteria)</span><span class="se">\n</span><span class="s1">&#39;</span>\
                      <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">],</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="p">][</span><span class="s1">&#39;criteria&#39;</span><span class="p">])))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The performance tableau does not contain objectives.&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="PerformanceTableau.showWeightPreorder"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.showWeightPreorder">[docs]</a>    <span class="k">def</span> <span class="nf">showWeightPreorder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders a preordering of the the criteria signficance weights. </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*------- weights preordering --------*&#39;</span><span class="p">)</span>
        <span class="n">wpo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeWeightPreorder</span><span class="p">()</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">wpo</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">wpo</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="s1">&#39;(</span><span class="si">%s</span><span class="s1">) &lt;&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">wpo</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">wpo</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;(</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">wpo</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span></div>
            
<div class="viewcode-block" id="PerformanceTableau.convertInsite2Standard"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.convertInsite2Standard">[docs]</a>    <span class="k">def</span> <span class="nf">convertInsite2Standard</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert in site a bigData formated Performance tableau back into a standard formated PerformanceTableau instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">convertWeight2Decimal</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">convertEvaluation2Decimal</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">convertDiscriminationThresholds2Decimal</span><span class="p">()</span></div>

<div class="viewcode-block" id="PerformanceTableau.convertInsite2BigData"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.convertInsite2BigData">[docs]</a>    <span class="k">def</span> <span class="nf">convertInsite2BigData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert in site a standard formated Performance tableau into a bigData formated instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">convertWeight2Integer</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">convertEvaluation2Float</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">convertDiscriminationThresholds2Float</span><span class="p">()</span></div>

<div class="viewcode-block" id="PerformanceTableau.convert2BigData"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.convert2BigData">[docs]</a>    <span class="k">def</span> <span class="nf">convert2BigData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders a cPerformanceTableau instance, by converting the action keys to integers and evaluations to floats, including the discrimination thresholds, the case given.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
        <span class="kn">from</span> <span class="nn">cRandPerfTabs</span> <span class="kn">import</span> <span class="n">cPerformanceTableau</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">PerformanceTableau</span><span class="p">(</span><span class="n">isEmpty</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">t</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;bgd_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="n">att</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">]</span>
        <span class="n">att</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
        <span class="n">att</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;actions&#39;</span><span class="p">)</span>
        <span class="n">att</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;evaluation&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">att</span><span class="p">:</span>
            <span class="n">t</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">a</span><span class="p">])</span>
        <span class="c1"># convert action keys to integers</span>
        <span class="n">t</span><span class="o">.</span><span class="n">convertWeight2Integer</span><span class="p">()</span>
        <span class="n">t</span><span class="o">.</span><span class="n">convertDiscriminationThresholds2Float</span><span class="p">()</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">newActions</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">x</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">actions</span><span class="p">):</span>
            <span class="n">newKey</span> <span class="o">=</span> <span class="n">i</span>
            <span class="n">newActions</span><span class="p">[</span><span class="n">newKey</span><span class="p">]</span> <span class="o">=</span> <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
        <span class="c1"># convert evaluation access keys</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">newEvaluation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">t</span><span class="o">.</span><span class="n">criteria</span><span class="p">:</span>
            <span class="n">newEvaluation</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">x</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">actions</span><span class="p">):</span>
                <span class="n">newKey</span> <span class="o">=</span> <span class="n">i</span>
                <span class="n">newEvaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">newKey</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
        <span class="n">t</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">newActions</span>
        <span class="n">t</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">newEvaluation</span>
        <span class="c1"># change the object class</span>
        <span class="n">t</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">=</span> <span class="n">cPerformanceTableau</span>
        <span class="k">return</span> <span class="n">t</span></div>
        
<div class="viewcode-block" id="PerformanceTableau.convertWeight2Integer"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.convertWeight2Integer">[docs]</a>    <span class="k">def</span> <span class="nf">convertWeight2Integer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert significance weights from Decimal format</span>
<span class="sd">        to int format.</span>
<span class="sd">    &quot;&quot;&quot;</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
            <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">criteria</span></div>

<div class="viewcode-block" id="PerformanceTableau.convertEvaluation2Float"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.convertEvaluation2Float">[docs]</a>    <span class="k">def</span> <span class="nf">convertEvaluation2Float</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert evaluations from decimal format to float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-999&#39;</span><span class="p">):</span>
                    <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">evaluation</span></div>

    <span class="k">def</span> <span class="nf">convertDiscriminationThresholds2Float</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">th</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">]:</span>
                <span class="n">d</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="n">th</span><span class="p">]</span>
                <span class="n">d1</span> <span class="o">=</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="nb">float</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="n">th</span><span class="p">]</span> <span class="o">=</span> <span class="n">d1</span>

    <span class="k">def</span> <span class="nf">convertDiscriminationThresholds2Decimal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">th</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">]:</span>
                <span class="n">d</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="n">th</span><span class="p">]</span>
                <span class="n">d1</span> <span class="o">=</span> <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">])),</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">])))</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="n">th</span><span class="p">]</span> <span class="o">=</span> <span class="n">d1</span>

 
<div class="viewcode-block" id="PerformanceTableau.convertWeight2Decimal"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.convertWeight2Decimal">[docs]</a>    <span class="k">def</span> <span class="nf">convertWeight2Decimal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert significance weights from obsolete float format</span>
<span class="sd">        to decimal format.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
            <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">criteria</span></div>

<div class="viewcode-block" id="PerformanceTableau.convertEvaluation2Decimal"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.convertEvaluation2Decimal">[docs]</a>    <span class="k">def</span> <span class="nf">convertEvaluation2Decimal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert evaluations from obsolete float format to decimal format</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">evaluation</span></div>

<div class="viewcode-block" id="PerformanceTableau.convertWeights2Negative"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.convertWeights2Negative">[docs]</a>    <span class="k">def</span> <span class="nf">convertWeights2Negative</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Negates the weights of criteria to be minimzed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
            <span class="n">critg</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">critg</span><span class="p">[</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;min&#39;</span><span class="p">:</span>
                <span class="n">critg</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="nb">abs</span><span class="p">(</span><span class="n">critg</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
                <span class="n">valg</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">valg</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">valg</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-999&#39;</span><span class="p">):</span>
                        <span class="c1">#print(g,x,valg[x])</span>
                        <span class="n">valg</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">valg</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">criteria</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">evaluation</span></div>

<div class="viewcode-block" id="PerformanceTableau.convertWeights2Positive"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.convertWeights2Positive">[docs]</a>    <span class="k">def</span> <span class="nf">convertWeights2Positive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Negates the weights of criteria to be minimzed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
            <span class="n">critg</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">critg</span><span class="p">[</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;min&#39;</span><span class="p">:</span>
                <span class="n">critg</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">critg</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
                <span class="n">valg</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">valg</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">valg</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-999&#39;</span><span class="p">):</span>
                        <span class="c1">#print(g,x,valg[x])</span>
                        <span class="n">valg</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="nb">abs</span><span class="p">(</span><span class="n">valg</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">criteria</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">evaluation</span></div>
        
<div class="viewcode-block" id="PerformanceTableau.computePerformanceDifferences"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.computePerformanceDifferences">[docs]</a>    <span class="k">def</span> <span class="nf">computePerformanceDifferences</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Comments</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                                      <span class="n">Debug</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                                      <span class="n">NotPermanentDiffs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                      <span class="n">WithMaxMin</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds to the criteria dictionary the ordered list of all observed performance differences.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="n">Comments</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Compute performance differences on each criterion&#39;</span><span class="p">)</span>
        <span class="c1">#criteriaList = [x for x in self.criteria]</span>
        <span class="c1">#criteriaList.sort()</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">dict</span><span class="o">.</span><span class="n">keys</span><span class="p">(</span><span class="n">actions</span><span class="p">))</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actionsList</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">NotPermanentDiffs</span><span class="p">:</span>
            <span class="n">performanceDifferences</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteria</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">ed</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span> <span class="o">-</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
            <span class="n">md</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
            <span class="c1">#diff = set()</span>
            <span class="n">diffList</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                <span class="n">xi</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
                <span class="k">if</span> <span class="n">xi</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-999&#39;</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
                        <span class="n">xj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">actionsList</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span>
                        <span class="k">if</span> <span class="n">xj</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-999&#39;</span><span class="p">):</span>
                            <span class="n">delta</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">xi</span> <span class="o">-</span> <span class="n">xj</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">delta</span> <span class="o">&lt;</span> <span class="n">ed</span><span class="p">:</span>
                                <span class="n">ed</span> <span class="o">=</span> <span class="n">delta</span>
                            <span class="k">if</span> <span class="n">delta</span> <span class="o">&gt;</span> <span class="n">md</span><span class="p">:</span>
                                <span class="n">md</span> <span class="o">=</span> <span class="n">delta</span>
                            <span class="c1">#diff.add(delta)</span>
                            <span class="n">diffList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">delta</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;--&gt;&gt; i,j, evaluation[actionsList[i]],evaluation[actionsList[j]], delta, ed,md&#39;</span><span class="p">,</span>\
                                      <span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">actionsList</span><span class="p">[</span><span class="n">j</span><span class="p">]],</span>\
                                      <span class="n">delta</span><span class="p">,</span> <span class="n">ed</span><span class="p">,</span><span class="n">md</span><span class="p">,</span><span class="n">diffList</span><span class="p">)</span>
            <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;minimalPerformanceDifference&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ed</span>
            <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;maximalPerformanceDifference&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">md</span>
            <span class="c1">#diffList = list(diff)</span>
            <span class="n">diffList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">NotPermanentDiffs</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">WithMaxMin</span><span class="p">:</span>
                    <span class="n">performanceDifferences</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">diffList</span><span class="p">,</span><span class="n">ed</span><span class="p">,</span><span class="n">md</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">performanceDifferences</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">diffList</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;performanceDifferences&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">diffList</span>
                <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; --&gt;&#39;</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="s1">&#39;: &#39;</span><span class="p">,</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;minimalPerformanceDifference&#39;</span><span class="p">],</span>\
                          <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;maximalPerformanceDifference&#39;</span><span class="p">])</span>
                    <span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;performanceDifferences&#39;</span><span class="p">]),</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;performanceDifferences&#39;</span><span class="p">])</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;performanceDifferences&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;performanceDifferences&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

        <span class="k">if</span> <span class="n">NotPermanentDiffs</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">performanceDifferences</span></div>
        
<div class="viewcode-block" id="PerformanceTableau.mpComputePerformanceDifferences"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.mpComputePerformanceDifferences">[docs]</a>    <span class="k">def</span> <span class="nf">mpComputePerformanceDifferences</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">NotPermanentDiffs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">nbrCores</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds to the criteria dictionary the ordered list of all observed performance differences.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">Pool</span>
        <span class="c1">#from os import cpu_count</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Compute performance differences on each criterion in parallel&#39;</span><span class="p">)</span>
       
        <span class="c1">#criteriaList = [x for x in self.criteria]</span>
        <span class="c1">#criteriaList.sort()</span>

        <span class="k">with</span> <span class="n">Pool</span><span class="p">(</span><span class="n">nbrCores</span><span class="p">)</span> <span class="k">as</span> <span class="n">proc</span><span class="p">:</span>
            <span class="n">performanceDifferences</span> <span class="o">=</span> <span class="n">proc</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">computeCriterionPerformanceDifferences</span><span class="p">,</span><span class="n">criteriaList</span><span class="p">)</span>
        
        <span class="c1">#for i in range(len(criteriaList)):</span>
        <span class="c1">#    c = criteriaList[i]</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteria</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">NotPermanentDiffs</span><span class="p">:</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;performanceDifferences&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">performanceDifferences</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;minimalPerformanceDifference&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">performanceDifferences</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;maximalPerformanceDifference&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">performanceDifferences</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">performanceDifferences</span></div>


<div class="viewcode-block" id="PerformanceTableau.computeCriterionPerformanceDifferences"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.computeCriterionPerformanceDifferences">[docs]</a>    <span class="k">def</span> <span class="nf">computeCriterionPerformanceDifferences</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">,</span> <span class="n">Comments</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                                      <span class="n">Debug</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the ordered list of all observed performance differences on the given criterion.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="n">Comments</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Compute performance differences on criterion </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">c</span><span class="p">)</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">dict</span><span class="o">.</span><span class="n">keys</span><span class="p">(</span><span class="n">actions</span><span class="p">))</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actionsList</span><span class="p">)</span>
        <span class="n">ed</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span> <span class="o">-</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">md</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
        <span class="c1">#diff = set()</span>
        <span class="n">diffList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="n">xi</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
            <span class="k">if</span> <span class="n">xi</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-999&#39;</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
                    <span class="n">xj</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">actionsList</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span>
                    <span class="k">if</span> <span class="n">xj</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-999&#39;</span><span class="p">):</span>
                        <span class="n">delta</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">xi</span> <span class="o">-</span> <span class="n">xj</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">delta</span> <span class="o">&lt;</span> <span class="n">ed</span><span class="p">:</span>
                            <span class="n">ed</span> <span class="o">=</span> <span class="n">delta</span>
                        <span class="k">if</span> <span class="n">delta</span> <span class="o">&gt;</span> <span class="n">md</span><span class="p">:</span>
                            <span class="n">md</span> <span class="o">=</span> <span class="n">delta</span>
                        <span class="c1">#diff.add(delta)</span>
                        <span class="n">diffList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">delta</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;--&gt;&gt; i,j, evaluation[actionsList[i]],evaluation[actionsList[j]], delta, ed,md&#39;</span><span class="p">,</span>\
                                  <span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">actionsList</span><span class="p">[</span><span class="n">j</span><span class="p">]],</span>\
                                  <span class="n">delta</span><span class="p">,</span> <span class="n">ed</span><span class="p">,</span><span class="n">md</span><span class="p">,</span><span class="n">diffList</span><span class="p">)</span>
        <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;minimalPerformanceDifference&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ed</span>
        <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;maximalPerformanceDifference&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">md</span>
        <span class="c1">#diffList = list(diff)</span>
        <span class="n">diffList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; --&gt;&#39;</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="s1">&#39;: &#39;</span><span class="p">,</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;minimalPerformanceDifference&#39;</span><span class="p">],</span>\
                  <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;maximalPerformanceDifference&#39;</span><span class="p">])</span>
            <span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">diffList</span><span class="p">),</span><span class="n">diffList</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">diffList</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">diffList</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        
        <span class="k">return</span> <span class="p">(</span><span class="n">diffList</span><span class="p">,</span><span class="n">ed</span><span class="p">,</span><span class="n">md</span><span class="p">)</span></div>
            
<div class="viewcode-block" id="PerformanceTableau.computeActionCriterionPerformanceDifferences"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.computeActionCriterionPerformanceDifferences">[docs]</a>    <span class="k">def</span> <span class="nf">computeActionCriterionPerformanceDifferences</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">refAction</span><span class="p">,</span><span class="n">refCriterion</span><span class="p">,</span><span class="n">comments</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">Debug</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        computes the performances differences observed between the reference action and the others on the given criterion</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="n">comments</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Compute performance differences for action </span><span class="si">%s</span><span class="s1"> on criterion </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">refAction</span><span class="p">,</span> <span class="n">refCriterion</span><span class="p">))</span>

        <span class="n">diff</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">dict</span><span class="o">.</span><span class="n">keys</span><span class="p">(</span><span class="n">actions</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">refAction</span><span class="p">:</span>
                <span class="n">xr</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">refCriterion</span><span class="p">][</span><span class="n">refAction</span><span class="p">]</span>
                <span class="n">xo</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">refCriterion</span><span class="p">][</span><span class="n">x</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">xr</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-999&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">xo</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-999&#39;</span><span class="p">):</span>
                    <span class="n">delta</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">refCriterion</span><span class="p">][</span><span class="n">refAction</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">refCriterion</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                    <span class="n">diff</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">delta</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;--&gt;&gt; refAction, x, evaluation[refAction], evaluation[x], delta,diff&#39;</span><span class="p">,</span>\
                              <span class="n">refAction</span><span class="p">,</span><span class="n">x</span><span class="p">,</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">refCriterion</span><span class="p">][</span><span class="n">refAction</span><span class="p">],</span><span class="n">evaluation</span><span class="p">[</span><span class="n">refCriterion</span><span class="p">][</span><span class="n">x</span><span class="p">],</span> <span class="n">delta</span><span class="p">,</span><span class="n">diff</span><span class="p">)</span>

        <span class="n">diff</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">diff</span></div>

<div class="viewcode-block" id="PerformanceTableau.computeActionCriterionQuantile"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.computeActionCriterionQuantile">[docs]</a>    <span class="k">def</span> <span class="nf">computeActionCriterionQuantile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">action</span><span class="p">,</span><span class="n">criterion</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders the quantile of the performance of action on criterion</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">perfsy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">criterion</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">action</span><span class="p">,</span><span class="n">criterion</span><span class="p">)</span>
        <span class="n">perfx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">criterion</span><span class="p">][</span><span class="n">action</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">perfx</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-999&#39;</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">indx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">criterion</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>\
                       <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">criterion</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">perfx</span>
                <span class="c1">## indx = self.criteria[criterion][&#39;thresholds&#39;][&#39;ind&#39;][0] + self.criteria[criterion][&#39;thresholds&#39;][&#39;pref&#39;][1]*perfx</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">indx</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
            <span class="n">quantile</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">len</span><span class="p">([</span><span class="n">y</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">perfsy</span>\
                                  <span class="k">if</span> <span class="p">(</span><span class="n">y</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">perfsy</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="o">-</span><span class="mi">999</span><span class="p">))</span> <span class="ow">and</span> \
                                  <span class="c1">#(perfsy[y] &lt;= perfx+indx)]) )/float(len(self.actions))</span>
                                  <span class="p">(</span><span class="n">perfsy</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">perfx</span><span class="p">)])</span> <span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">quantile</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;NA&#39;</span></div>

    <span class="k">def</span> <span class="nf">_computeLimitingQuantiles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">g</span><span class="p">,</span><span class="n">frequencies</span><span class="p">,</span><span class="n">LowerClosed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">PrefThresholds</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the list of limiting quantiles *q(p)* on criteria *g* for *p* in *frequencies* </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">floor</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span><span class="p">,</span> <span class="n">deepcopy</span>
        <span class="n">gValues</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;g,x,evaluation[g][x]&#39;</span><span class="p">,</span><span class="n">g</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-999&#39;</span><span class="p">):</span>
                <span class="n">gValues</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
        <span class="n">gValues</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">PrefThresholds</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">gPrefThrCst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">gPrefThrSlope</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">gPrefThrCst</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
                <span class="n">gPrefThrSlope</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>            
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">gValues</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;g,n,gValues&#39;</span><span class="p">,</span><span class="n">g</span><span class="p">,</span><span class="n">n</span><span class="p">,</span><span class="n">gValues</span><span class="p">)</span>
<span class="c1">##        if n &gt; 0:</span>
<span class="c1">##        nf = Decimal(str(n+1))</span>
        <span class="n">nf</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
        <span class="n">limitingQuantiles</span> <span class="o">=</span> <span class="p">[</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">q</span><span class="p">))</span> <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">frequencies</span><span class="p">]</span>
        <span class="n">limitingQuantiles</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">limitingQuantiles</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">LowerClosed</span><span class="p">:</span>
            <span class="n">limitingQuantiles</span> <span class="o">=</span> <span class="n">limitingQuantiles</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">limitingQuantiles</span> <span class="o">=</span> <span class="n">limitingQuantiles</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">limitingQuantiles</span><span class="p">)</span>
        <span class="c1"># computing the quantiles on criterion g</span>
        <span class="n">gQuantiles</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">LowerClosed</span><span class="p">:</span>
            <span class="c1"># we ignorethe 1.00 quantile and replace it with +infty</span>
            <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">limitingQuantiles</span><span class="p">:</span>
                <span class="n">r</span> <span class="o">=</span> <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">nf</span><span class="p">))</span> <span class="o">*</span> <span class="n">q</span><span class="p">)</span>
                <span class="n">rq</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">floor</span><span class="p">(</span><span class="n">r</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;r,rq&#39;</span><span class="p">,</span><span class="n">r</span><span class="p">,</span><span class="n">rq</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">rq</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
                    <span class="n">quantile</span> <span class="o">=</span> <span class="n">gValues</span><span class="p">[</span><span class="n">rq</span><span class="p">]</span>\
                        <span class="o">+</span> <span class="p">((</span><span class="n">r</span><span class="o">-</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">rq</span><span class="p">)))</span><span class="o">*</span><span class="p">(</span><span class="n">gValues</span><span class="p">[</span><span class="n">rq</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">gValues</span><span class="p">[</span><span class="n">rq</span><span class="p">]))</span>
                    <span class="k">if</span> <span class="n">rq</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">PrefThresholds</span><span class="p">:</span>
                        <span class="n">quantile</span> <span class="o">+=</span> <span class="n">gPrefThrCst</span> <span class="o">+</span> <span class="n">quantile</span><span class="o">*</span><span class="n">gPrefThrSlope</span>
                <span class="k">else</span> <span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;min&#39;</span><span class="p">:</span>
                        <span class="c1">#quantile = Decimal(&#39;100.0&#39;)</span>
                        <span class="n">quantile</span> <span class="o">=</span> <span class="n">gValues</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1">#quantile = Decimal(&#39;200.0&#39;)</span>
                        <span class="n">quantile</span> <span class="o">=</span> <span class="n">gValues</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;quantile&#39;</span><span class="p">,</span><span class="n">quantile</span><span class="p">)</span>
                <span class="n">gQuantiles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">quantile</span><span class="p">)</span>               

        <span class="k">else</span><span class="p">:</span>  <span class="c1"># upper closed categories</span>
            <span class="c1"># we ignore the quantile 0.0 and replace it with -\infty            </span>
            <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">limitingQuantiles</span><span class="p">:</span>
                <span class="n">r</span> <span class="o">=</span> <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">nf</span><span class="p">))</span> <span class="o">*</span> <span class="n">q</span><span class="p">)</span>
                <span class="n">rq</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">floor</span><span class="p">(</span><span class="n">r</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;r,rq&#39;</span><span class="p">,</span><span class="n">r</span><span class="p">,</span><span class="n">rq</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">rq</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;min&#39;</span><span class="p">:</span>
                        <span class="c1">#quantile = Decimal(&#39;-200.0&#39;)</span>
                        <span class="n">quantile</span> <span class="o">=</span> <span class="n">gValues</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="p">(</span><span class="n">gValues</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1">#quantile = Decimal(&#39;-100.0&#39;)</span>
                        <span class="n">quantile</span> <span class="o">=</span> <span class="n">gValues</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">gValues</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">elif</span> <span class="n">rq</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
                    <span class="n">quantile</span> <span class="o">=</span> <span class="n">gValues</span><span class="p">[</span><span class="n">rq</span><span class="p">]</span>\
                        <span class="o">+</span> <span class="p">((</span><span class="n">r</span><span class="o">-</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">rq</span><span class="p">)))</span><span class="o">*</span><span class="p">(</span><span class="n">gValues</span><span class="p">[</span><span class="n">rq</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">gValues</span><span class="p">[</span><span class="n">rq</span><span class="p">]))</span>
                    <span class="k">if</span> <span class="n">PrefThresholds</span><span class="p">:</span>
                        <span class="n">quantile</span> <span class="o">-=</span> <span class="n">gPrefThrCst</span> <span class="o">-</span> <span class="n">quantile</span><span class="o">*</span><span class="n">gPrefThrSlope</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">quantile</span> <span class="o">=</span> <span class="n">gValues</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;min&#39;</span><span class="p">:</span>
                            <span class="n">quantile</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-200.0&#39;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">quantile</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-100.0&#39;</span><span class="p">)</span>     
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;quantile&#39;</span><span class="p">,</span><span class="n">quantile</span><span class="p">)</span>
                <span class="n">gQuantiles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">quantile</span><span class="p">)</span>
<span class="c1">##        else:</span>
<span class="c1">##            gQuantiles = []</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">g</span><span class="p">,</span><span class="n">LowerClosed</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">],</span><span class="n">gQuantiles</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">gQuantiles</span>

<div class="viewcode-block" id="PerformanceTableau.computeQuantiles"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.computeQuantiles">[docs]</a>    <span class="k">def</span> <span class="nf">computeQuantiles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders a quantiles matrix action x criterion with the performance quantile of action on criterion</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#actionsList = [x for x in self.actions]</span>
        <span class="c1">#criteriaList = list(self.criteria.keys())</span>
<span class="c1">##        </span>
<span class="c1">##        if Debug:</span>
<span class="c1">##            print(actionsList,criteriaList)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">quantiles</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">dict</span><span class="o">.</span><span class="n">keys</span><span class="p">(</span><span class="n">actions</span><span class="p">):</span>
            <span class="n">quantiles</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeActionQuantile</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">Debug</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quantiles</span> <span class="o">=</span> <span class="n">quantiles</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">quantiles</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">quantiles</span></div>

<div class="viewcode-block" id="PerformanceTableau.computeActionQuantile"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.computeActionQuantile">[docs]</a>    <span class="k">def</span> <span class="nf">computeActionQuantile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">action</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders the overall performance quantile of action</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#criteriaList = [x for x in self.criteria]</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">criteriaQuantiles</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">sumWeights</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="nb">dict</span><span class="o">.</span><span class="n">keys</span><span class="p">(</span><span class="n">criteria</span><span class="p">):</span>
            <span class="n">agq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeActionCriterionQuantile</span><span class="p">(</span><span class="n">action</span><span class="p">,</span><span class="n">g</span><span class="p">,</span><span class="n">Debug</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">agq</span> <span class="o">!=</span> <span class="s1">&#39;NA&#39;</span><span class="p">:</span>
                <span class="n">sumWeights</span> <span class="o">+=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span>
                <span class="n">criteriaQuantiles</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">agq</span><span class="p">,</span><span class="nb">float</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])))</span>
        <span class="n">criteriaQuantiles</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">currentQuantile</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">currentWeight</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">minQuantile</span> <span class="o">=</span> <span class="n">criteriaQuantiles</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> 
        <span class="n">minWeight</span> <span class="o">=</span> <span class="n">criteriaQuantiles</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">majority</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">sumWeights</span><span class="p">)</span><span class="o">/</span><span class="mf">2.0</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">majority</span><span class="p">,</span><span class="n">i</span><span class="p">,</span> <span class="n">currentWeight</span><span class="p">,</span><span class="n">minWeight</span><span class="p">,</span> <span class="n">currentQuantile</span><span class="p">,</span> <span class="n">minQuantile</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">minWeight</span> <span class="o">&lt;</span> <span class="n">majority</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">currentQuantile</span> <span class="o">=</span> <span class="n">minQuantile</span>
            <span class="n">currentWeight</span> <span class="o">=</span> <span class="n">minWeight</span>
            <span class="n">minQuantile</span> <span class="o">=</span> <span class="n">criteriaQuantiles</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> 
            <span class="n">minWeight</span> <span class="o">+=</span> <span class="n">criteriaQuantiles</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">currentWeight</span><span class="p">,</span><span class="n">minWeight</span><span class="p">,</span> <span class="n">currentQuantile</span><span class="p">,</span> <span class="n">minQuantile</span><span class="p">)</span>
        <span class="n">actionQuantile</span> <span class="o">=</span> <span class="n">currentQuantile</span> <span class="o">+</span> <span class="p">(</span><span class="n">majority</span><span class="o">-</span><span class="n">currentWeight</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">minWeight</span><span class="o">-</span><span class="n">currentWeight</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">minQuantile</span><span class="o">-</span><span class="n">currentQuantile</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;quantile for </span><span class="si">%s</span><span class="s1"> = </span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">action</span><span class="p">,</span><span class="n">actionQuantile</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">actionQuantile</span></div>

            
<div class="viewcode-block" id="PerformanceTableau.csvAllQuantiles"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.csvAllQuantiles">[docs]</a>    <span class="k">def</span> <span class="nf">csvAllQuantiles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;quantiles&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        save quantiles matrix criterionxaction in CSV format</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">fileNameExt</span> <span class="o">=</span> <span class="n">fileName</span><span class="o">+</span><span class="s1">&#39;.csv&#39;</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileNameExt</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="c1">##        criteriaList = [x for x in self.criteria]</span>
<span class="c1">##        criteriaList.sort()</span>
<span class="c1">##        actionsList = [x for x in self.actions]</span>
<span class="c1">##        actionsList.sort()</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;# saved quantiles matrix from performance tableau </span><span class="si">%s</span><span class="s1"> </span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&quot;quantiles&quot;,&#39;</span><span class="p">)</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">dict</span><span class="o">.</span><span class="n">keys</span><span class="p">(</span><span class="n">actions</span><span class="p">):</span>
            <span class="c1">#x = actionsList[i]</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;,&#39;</span> <span class="o">%</span> <span class="n">x</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">x</span><span class="p">)</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">weights  | &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span> 
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="nb">dict</span><span class="o">.</span><span class="n">keys</span><span class="p">(</span><span class="n">criteria</span><span class="p">):</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;,&#39;</span> <span class="o">%</span> <span class="n">g</span><span class="p">)</span>
            <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">dict</span><span class="o">.</span><span class="n">keys</span><span class="p">(</span><span class="n">actions</span><span class="p">):</span>
                <span class="n">qval</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeActionCriterionQuantile</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">g</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">qval</span> <span class="o">!=</span> <span class="s1">&#39;NA&#39;</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.2f</span><span class="s1">,&#39;</span> <span class="o">%</span> <span class="n">qval</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;NA,&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">qval</span> <span class="o">!=</span> <span class="s1">&#39;NA&#39;</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.2f</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">qval</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;NA</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>


<div class="viewcode-block" id="PerformanceTableau.showAllQuantiles"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.showAllQuantiles">[docs]</a>    <span class="k">def</span> <span class="nf">showAllQuantiles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Sorted</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        prints the performance quantiles tableau in the session console.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">computeAllQuantiles</span><span class="p">(</span><span class="n">Sorted</span><span class="o">=</span><span class="n">Sorted</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="PerformanceTableau.showHTMLPerformanceQuantiles"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.showHTMLPerformanceQuantiles">[docs]</a>    <span class="k">def</span> <span class="nf">showHTMLPerformanceQuantiles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Sorted</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        shows the performance quantiles tableau in a browser window.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">webbrowser</span>
        <span class="n">fileName</span> <span class="o">=</span> <span class="s1">&#39;/tmp/performanceQuantiles.html&#39;</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">computeAllQuantiles</span><span class="p">(</span><span class="n">Sorted</span><span class="o">=</span><span class="n">Sorted</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;file://&#39;</span><span class="o">+</span><span class="n">fileName</span>
        <span class="n">webbrowser</span><span class="o">.</span><span class="n">open_new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span></div>
        
<div class="viewcode-block" id="PerformanceTableau.computeAllQuantiles"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.computeAllQuantiles">[docs]</a>    <span class="k">def</span> <span class="nf">computeAllQuantiles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Sorted</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders a html string showing the table of</span>
<span class="sd">        the quantiles matrix action x criterion</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">criteria</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">Sorted</span><span class="p">:</span>
            <span class="n">criteriaList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">actions</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">Sorted</span><span class="p">:</span>
            <span class="n">actionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">html</span> <span class="o">=</span> <span class="s1">&#39;&lt;table style=&quot;background-color:White;&quot; border=&quot;1&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;criteria | &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr bgcolor=&quot;#9acd32&quot;&gt;&lt;th&gt;criteria&lt;/th&gt;&#39;</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;th&gt;</span><span class="si">%s</span><span class="s1">&lt;/th&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">g</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">()</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">weights  | &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span> 
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr style=&quot;text-align: center;&quot; bgcolor=&quot;#FFF79B&quot;&gt;&lt;td&gt;weights&lt;/td&gt;&#39;</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td &gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">-----------------------------------------------------&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;   | &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&lt;th  bgcolor=&quot;#FFF79B&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/th&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="n">qval</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeActionCriterionQuantile</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">g</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">qval</span> <span class="o">!=</span> <span class="s1">&#39;NA&#39;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.2f</span><span class="se">\t</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">qval</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                    <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">qval</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;NA</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                    <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;NA&lt;/td&gt;&#39;</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">()</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                                          
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/table&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="n">html</span></div>

<div class="viewcode-block" id="PerformanceTableau.computeQuantileOrder"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.computeQuantileOrder">[docs]</a>    <span class="k">def</span> <span class="nf">computeQuantileOrder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">q0</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">q1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">Threading</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">nbrOfCPUs</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders a linear ordering of the decision actions from a simulation of pre-ranked outranking digraphs.</span>

<span class="sd">        The pre-ranking simulations range by default from</span>
<span class="sd">        quantiles=q0 to quantiles=min( 100, max(10,len(self.actions)/10]) ).</span>

<span class="sd">        The actions are ordered along a decreasing Borda score of their ranking results.</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">sparseOutrankingDigraphs</span> <span class="kn">import</span> <span class="n">PreRankedOutrankingDigraph</span>
        <span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">kBestFrequency</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">([(</span><span class="n">x</span><span class="p">,[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">])</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">q1</span> <span class="o">&lt;=</span> <span class="n">q0</span><span class="p">:</span>
            <span class="n">q1</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="nb">max</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="n">n</span><span class="o">//</span><span class="mi">10</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">q0</span><span class="p">,</span><span class="n">q1</span><span class="p">):</span>
            <span class="n">pr</span> <span class="o">=</span> <span class="n">PreRankedOutrankingDigraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">quantiles</span><span class="o">=</span><span class="n">q</span><span class="p">,</span><span class="n">LowerClosed</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                    <span class="n">minimalComponentSize</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                    <span class="n">CopyPerfTab</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Threading</span><span class="o">=</span><span class="n">Threading</span><span class="p">,</span>
                                    <span class="n">nbrOfCPUs</span><span class="o">=</span><span class="n">nbrOfCPUs</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                <span class="n">rbest</span> <span class="o">=</span> <span class="n">pr</span><span class="o">.</span><span class="n">boostedOrder</span><span class="p">[</span><span class="n">r</span><span class="p">]</span>
                <span class="n">kBestFrequency</span><span class="p">[</span><span class="n">rbest</span><span class="p">][</span><span class="n">r</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="n">stats</span> <span class="o">=</span> <span class="n">kBestFrequency</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                <span class="n">stats</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">stats</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">Stats</span> <span class="o">=</span> <span class="p">[(</span><span class="n">x</span><span class="p">,</span><span class="o">-</span><span class="n">kBestFrequency</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">n</span><span class="p">],</span><span class="n">kBestFrequency</span><span class="p">[</span><span class="n">x</span><span class="p">][:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">bestStatistics</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">Stats</span><span class="p">,</span><span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">quantileOrder</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">bestStatistics</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">bestStatistics</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">quantileOrder</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">quantileOrder</span></div>

<div class="viewcode-block" id="PerformanceTableau.computeQuantileRanking"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.computeQuantileRanking">[docs]</a>    <span class="k">def</span> <span class="nf">computeQuantileRanking</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">q0</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">q1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">Threading</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">nbrOfCPUs</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders a linear ranking of the decision actions from a simulation of pre-ranked outranking digraphs.</span>

<span class="sd">        The pre-ranking simulations range by default from</span>
<span class="sd">        quantiles=q0 to qantiles=min( 100, max(10,len(self.actions)/10) ).</span>

<span class="sd">        The actions are ordered along an increasing Borda score of their ranking results.</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ranking</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeQuantileOrder</span><span class="p">(</span><span class="n">q0</span><span class="o">=</span><span class="n">q0</span><span class="p">,</span><span class="n">q1</span><span class="o">=</span><span class="n">q1</span><span class="p">,</span>\
                                          <span class="n">Threading</span><span class="o">=</span><span class="n">Threading</span><span class="p">,</span><span class="n">nbrOfCPUs</span><span class="o">=</span><span class="n">nbrOfCPUs</span><span class="p">,</span>\
                                              <span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span>
        <span class="n">ranking</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">ranking</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ranking</span></div>
        
<div class="viewcode-block" id="PerformanceTableau.computeQuantileSort"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.computeQuantileSort">[docs]</a>    <span class="k">def</span> <span class="nf">computeQuantileSort</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        shows a sorting of the actions from decreasing majority quantiles</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">computeQuantiles</span><span class="p">()</span>
        <span class="n">actionsSorting</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="n">actionsSorting</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">quantiles</span><span class="p">[</span><span class="n">x</span><span class="p">],</span><span class="n">x</span><span class="p">))</span>
        <span class="n">actionsSorting</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">actionsSorting</span></div>

<div class="viewcode-block" id="PerformanceTableau.computeQuantilePreorder"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.computeQuantilePreorder">[docs]</a>    <span class="k">def</span> <span class="nf">computeQuantilePreorder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        computes the preorder of the actions obtained from decreasing majority quantiles. The quantiles are recomputed with a call to the self.computeQuantileSort() method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">quantiles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeQuantileSort</span><span class="p">()</span>
        <span class="n">quantiles</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="n">Comments</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">quantiles</span><span class="p">)</span>
        <span class="n">actionsPreorder</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">currLevel</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">currEquivalenceClass</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">quantiles</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">currLevel</span><span class="p">,</span><span class="n">x</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">currLevel</span><span class="p">:</span>
                <span class="n">currEquivalenceClass</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">currEquivalenceClass</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">currEquivalenceClass</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
                <span class="n">actionsPreorder</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">currEquivalenceClass</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">actionsPreorder</span><span class="p">)</span>
                <span class="n">currEquivalenceClass</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
            <span class="n">currLevel</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">currEquivalenceClass</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">actionsPreorder</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">currEquivalenceClass</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">actionsPreorder</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">actionsPreorder</span></div>

<div class="viewcode-block" id="PerformanceTableau.showQuantileSort"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.showQuantileSort">[docs]</a>    <span class="k">def</span> <span class="nf">showQuantileSort</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Wrapper of computeQuantilePreorder() for the obsolete showQuantileSort() method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">computeQuantilePreorder</span><span class="p">(</span><span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>
 
<div class="viewcode-block" id="PerformanceTableau.computeDefaultDiscriminationThresholds"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.computeDefaultDiscriminationThresholds">[docs]</a>    <span class="k">def</span> <span class="nf">computeDefaultDiscriminationThresholds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">criteriaList</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                               <span class="n">quantile</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ind&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="s1">&#39;pref&#39;</span><span class="p">:</span><span class="mi">20</span><span class="p">,</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">:</span><span class="mi">60</span><span class="p">,</span><span class="s1">&#39;veto&#39;</span><span class="p">:</span><span class="mi">80</span><span class="p">},</span>
                                               <span class="n">Debug</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                                               <span class="n">Comments</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        updates the discrimination thresholds with the percentiles</span>
<span class="sd">        from the performance differences.</span>
<span class="sd">        Parameters: quantile = {&#39;ind&#39;: 10, &#39;pref&#39;: 20, &#39;weakVeto&#39;: 60, &#39;veto: 80}.</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">math</span>
        
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="n">Comments</span> <span class="o">=</span> <span class="kc">True</span>
            
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Installs default discrimination thresholds on each criterion&#39;</span><span class="p">)</span>

<span class="c1">#        performanceDifferences = self.computePerformanceDifferences(Debug=Debug,Comments=Comments)</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="k">if</span> <span class="n">criteriaList</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">dict</span><span class="o">.</span><span class="n">keys</span><span class="p">(</span><span class="n">criteria</span><span class="p">)]</span>
            <span class="c1">#criteriaList.sort()</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
            <span class="n">performanceDifferences</span><span class="p">,</span><span class="n">minDiff</span><span class="p">,</span><span class="n">maxDiff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeCriterionPerformanceDifferences</span><span class="p">(</span><span class="n">c</span><span class="p">,</span>
                                                            <span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
            <span class="c1">#vx = self.criteria[c][&#39;performanceDifferences&#39;]</span>
            <span class="n">vx</span> <span class="o">=</span> <span class="n">performanceDifferences</span>
            <span class="n">nv</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">vx</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;=====&gt;&#39;</span><span class="p">,</span><span class="n">c</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">vx</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">nv</span><span class="p">)</span>
            <span class="n">threshold</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">quantile</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;--&gt;&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">quantile</span><span class="p">[</span><span class="n">x</span><span class="p">],</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">quantile</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">quantile</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">threshold</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">vx</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">elif</span> <span class="n">quantile</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="mi">100</span><span class="p">:</span>
                        <span class="n">threshold</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">vx</span><span class="p">[</span><span class="n">nv</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">kq</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">quantile</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="n">nv</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span><span class="o">/</span><span class="mf">100.0</span><span class="p">))</span>
                        <span class="n">r</span> <span class="o">=</span> <span class="p">((</span><span class="n">nv</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">quantile</span><span class="p">[</span><span class="n">x</span><span class="p">])</span> <span class="o">%</span> <span class="mi">100</span>
                        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="n">kq</span><span class="p">,</span><span class="n">r</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>

                        <span class="c1">## if kq == nv-1:</span>
                        <span class="c1">##     kqplus = nv-1</span>
                        <span class="c1">## else:</span>
                        <span class="c1">##     kq_1 = kq - 1</span>
                        <span class="n">threshold</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">vx</span><span class="p">[</span><span class="n">kq</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">r</span><span class="p">))</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">))</span> <span class="o">*</span> <span class="p">(</span><span class="n">vx</span><span class="p">[</span><span class="n">kq</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">vx</span><span class="p">[</span><span class="n">kq</span><span class="p">])</span>
                        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="n">threshold</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>

            
            <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">threshold</span><span class="p">:</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">threshold</span><span class="p">[</span><span class="n">x</span><span class="p">],</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">))</span>

            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;criteria&#39;</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="s1">&#39; default thresholds:&#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">])</span></div>


<div class="viewcode-block" id="PerformanceTableau.computeThresholdPercentile"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.computeThresholdPercentile">[docs]</a>    <span class="k">def</span> <span class="nf">computeThresholdPercentile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">criterion</span><span class="p">,</span><span class="n">threshold</span><span class="p">,</span> <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        computes for a given criterion the quantile</span>
<span class="sd">        of the performance differences of a given constant threshold.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">performanceDifferences</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">criterion</span><span class="p">][</span><span class="s1">&#39;performanceDifferences&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="c1">#self.computePerformanceDifferences(Debug=Debug)</span>
            <span class="c1">#performanceDifferences = self.criteria[criterion][&#39;performanceDifferences&#39;]</span>
            <span class="n">performanceDifferences</span><span class="p">,</span><span class="n">minDiff</span><span class="p">,</span><span class="n">maxDiff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeCriterionPerformanceDifferences</span><span class="p">(</span><span class="n">criterion</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;performanceDifferences = &quot;</span><span class="p">,</span><span class="n">performanceDifferences</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">quantile</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">criterion</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="n">threshold</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>     
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;quantile&#39;</span><span class="p">,</span> <span class="n">quantile</span><span class="p">)</span>
        <span class="n">nv</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">performanceDifferences</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nv</span> <span class="ow">and</span> <span class="n">performanceDifferences</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">quantile</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">quantile</span><span class="p">,</span> <span class="n">performanceDifferences</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">percentile</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">nv</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;i = &#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="s1">&#39;nv = &#39;</span><span class="p">,</span> <span class="n">nv</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;percentile =&#39;</span><span class="p">,</span> <span class="n">percentile</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">percentile</span></div>

<div class="viewcode-block" id="PerformanceTableau.computeVariableThresholdPercentile"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.computeVariableThresholdPercentile">[docs]</a>    <span class="k">def</span> <span class="nf">computeVariableThresholdPercentile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">criterion</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        computes for a given criterion the quantile</span>
<span class="sd">        of the performance differences of a given threshold.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">th</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">criterion</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="n">threshold</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

<span class="c1">##        actionsList = [x for x in self.actions]</span>
<span class="c1">##        actionsList.sort()</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">dict</span><span class="o">.</span><span class="n">keys</span><span class="p">(</span><span class="n">actions</span><span class="p">):</span>
            <span class="n">performanceDifferences</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeActionCriterionPerformanceDifferences</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">criterion</span><span class="p">,</span><span class="n">Debug</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;performanceDifferences:&#39;</span><span class="p">,</span> <span class="n">performanceDifferences</span><span class="p">)</span>
            <span class="n">na</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">performanceDifferences</span><span class="p">)</span>
            <span class="n">total</span> <span class="o">+=</span> <span class="n">na</span>
            <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">quantile</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">th</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="o">+</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">criterion</span><span class="p">][</span><span class="n">a</span><span class="p">])</span><span class="o">*</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">th</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a,na,self.evaluation[criterion][a],th[0],th[1],quantile&#39;</span><span class="p">,</span>\
                      <span class="n">a</span><span class="p">,</span><span class="n">na</span><span class="p">,</span><span class="n">evaluation</span><span class="p">[</span><span class="n">criterion</span><span class="p">][</span><span class="n">a</span><span class="p">],</span><span class="n">th</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">th</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">quantile</span><span class="p">)</span>
            <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">na</span> <span class="ow">and</span> <span class="n">performanceDifferences</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">quantile</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;i, quantile, performanceDifferences[i]&#39;</span><span class="p">,</span><span class="n">i</span><span class="p">,</span> <span class="n">quantile</span><span class="p">,</span> <span class="n">performanceDifferences</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="n">i</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a,na,final i&#39;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span><span class="n">na</span><span class="p">,</span><span class="n">i</span><span class="p">)</span>
        <span class="n">percentile</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">count</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">total</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;count = &#39;</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="s1">&#39;total = &#39;</span><span class="p">,</span> <span class="n">total</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;percentile =&#39;</span><span class="p">,</span> <span class="n">percentile</span><span class="p">)</span>   
        <span class="k">return</span> <span class="n">percentile</span></div>

<div class="viewcode-block" id="PerformanceTableau.showPerformanceTableau"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.showPerformanceTableau">[docs]</a>    <span class="k">def</span> <span class="nf">showPerformanceTableau</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Transposed</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">actionsSubset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>\
                               <span class="n">fromIndex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">toIndex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">Sorted</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">ndigits</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Print the performance Tableau.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----  performance tableau -----*&#39;</span><span class="p">)</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Sorted</span><span class="p">:</span>
            <span class="n">criteriaList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">actionsSubset</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">actionsList</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Sorted</span><span class="p">:</span>
                <span class="n">actionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">actionsList</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">actionsSubset</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">fromIndex</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">fromIndex</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">toIndex</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">toIndex</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">actionsList</span><span class="p">)</span>
        <span class="c1"># view criteria x actions</span>
        <span class="k">if</span> <span class="n">Transposed</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;criteria | weights |&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">  &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">---------|-----------------------------------------&#39;</span><span class="p">)</span>
            <span class="n">formatString</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%%</span><span class="s1"> .</span><span class="si">%d</span><span class="s1">f &#39;</span> <span class="o">%</span> <span class="n">ndigits</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;   </span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">  |   &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39;   | &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">fromIndex</span><span class="p">,</span><span class="n">toIndex</span><span class="p">):</span>
                    <span class="n">x</span> <span class="o">=</span> <span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                    <span class="n">evalgx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">evalgx</span> <span class="o">==</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-999&#39;</span><span class="p">):</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; NA &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>                    
                        <span class="nb">print</span><span class="p">(</span><span class="n">formatString</span> <span class="o">%</span> <span class="p">(</span><span class="n">evalgx</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">()</span>
        <span class="c1"># view actions x criteria</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Criteria | &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">  &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Actions  | &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  </span><span class="si">%s</span><span class="s1">   &#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>          
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">---------|-----------------------------------------&#39;</span><span class="p">)</span>
            <span class="n">formatString</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%%</span><span class="s1"> .</span><span class="si">%d</span><span class="s1">f &#39;</span> <span class="o">%</span> <span class="n">ndigits</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">fromIndex</span><span class="p">,</span><span class="n">toIndex</span><span class="p">):</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;   </span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">   |&#39;</span> <span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                    <span class="n">evalgx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">evalgx</span> <span class="o">==</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-999&#39;</span><span class="p">):</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  NA  &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>                    
                        <span class="nb">print</span><span class="p">(</span><span class="n">formatString</span> <span class="o">%</span> <span class="p">(</span><span class="n">evalgx</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">()</span></div>
            

<div class="viewcode-block" id="PerformanceTableau.saveCSV"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.saveCSV">[docs]</a>    <span class="k">def</span> <span class="nf">saveCSV</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;tempPerfTab&#39;</span><span class="p">,</span><span class="n">Sorted</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">criteriaList</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">actionsList</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">ndigits</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;1</span>
<span class="sd">        Store the performance Tableau self Actions x Criteria in CSV format.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">itertools</span> <span class="k">as</span> <span class="nn">IT</span>
        <span class="kn">import</span> <span class="nn">collections</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        
        <span class="n">fileNameExt</span> <span class="o">=</span> <span class="n">fileName</span> <span class="o">+</span> <span class="s1">&#39;.csv&#39;</span>        
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*Storing performance tableau in CSV format in file </span><span class="si">%s</span><span class="s1">&#39;</span>\
              <span class="o">%</span> <span class="n">fileNameExt</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">criteriaList</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">criteriaList</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">dict</span><span class="o">.</span><span class="n">keys</span><span class="p">(</span><span class="n">criteria</span><span class="p">))</span>
            <span class="k">if</span> <span class="nb">sorted</span><span class="p">:</span>
                <span class="n">criteriaList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">ng</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">criteriaList</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">criteriaList</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">actionsList</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">actionsList</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">dict</span><span class="o">.</span><span class="n">keys</span><span class="p">(</span><span class="n">actions</span><span class="p">))</span>
            <span class="k">if</span> <span class="nb">sorted</span><span class="p">:</span>
                <span class="n">actionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">actionsList</span> <span class="o">=</span> <span class="n">flatten</span><span class="p">(</span><span class="n">actionsList</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">actionsList</span><span class="p">)</span>
        <span class="n">na</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actionsList</span><span class="p">)</span>
        <span class="n">formatStr</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%%</span><span class="s1">.%.df&#39;</span> <span class="o">%</span> <span class="n">ndigits</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;formatString:&#39;</span><span class="p">,</span><span class="n">formatStr</span><span class="p">)</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileNameExt</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="c1">## header row</span>
        <span class="n">writeStr</span> <span class="o">=</span> <span class="s1">&#39;&quot;criteria&quot;,&quot;name&quot;,&quot;weight&quot;,&quot;scale&quot;,&quot;prefDir&quot;,&quot;thresholds&quot;,&#39;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">na</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">writeStr</span> <span class="o">+=</span> <span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;,&#39;</span> <span class="o">%</span> <span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">writeStr</span> <span class="o">+=</span> <span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">actionsList</span><span class="p">[</span><span class="n">na</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">writeStr</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">writeStr</span><span class="p">)</span>
        <span class="c1">## writing performance data</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
            <span class="n">writeStr</span> <span class="o">=</span> <span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;,&#39;</span> <span class="o">%</span> <span class="n">g</span>
            <span class="n">writeStr</span> <span class="o">+=</span> <span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;,&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>
            <span class="n">writeStr</span> <span class="o">+=</span> <span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;,&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span>
            <span class="n">writeStr</span> <span class="o">+=</span> <span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;,&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">])</span>
            <span class="n">writeStr</span> <span class="o">+=</span> <span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;,&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">])</span>
            <span class="n">writeStr</span> <span class="o">+=</span> <span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;,&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">na</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
                <span class="n">writeStr</span> <span class="o">+=</span> <span class="n">formatStr</span> <span class="o">%</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span>
            <span class="n">writeStr</span> <span class="o">+=</span> <span class="n">formatStr</span> <span class="o">%</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">actionsList</span><span class="p">[</span><span class="n">na</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">writeStr</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">writeStr</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>
        

<div class="viewcode-block" id="PerformanceTableau.computeMinMaxEvaluations"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.computeMinMaxEvaluations">[docs]</a>    <span class="k">def</span> <span class="nf">computeMinMaxEvaluations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">criteria</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">actions</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders minimum and maximum performances on each criterion</span>
<span class="sd">        in dictionary form: {&#39;g&#39;: {&#39;minimum&#39;: x, &#39;maximum&#39;: x}}</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> 
        <span class="k">if</span> <span class="n">criteria</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
            <span class="n">criteriaKeys</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">dict</span><span class="o">.</span><span class="n">keys</span><span class="p">(</span><span class="n">criteria</span><span class="p">)]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">criteriaKeys</span> <span class="o">=</span> <span class="n">criteria</span>
        <span class="k">if</span> <span class="n">actions</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
            <span class="n">actionsKeys</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">dict</span><span class="o">.</span><span class="n">keys</span><span class="p">(</span><span class="n">actions</span><span class="p">)]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">actionsKeys</span> <span class="o">=</span> <span class="n">actions</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaKeys</span><span class="p">:</span>
            <span class="n">result</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">evaluations</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsKeys</span><span class="p">:</span>
                <span class="n">val</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">val</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-999&#39;</span><span class="p">):</span>
                    <span class="n">evaluations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">evaluations</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">evaluations</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
                <span class="n">result</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;minimum&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">evaluations</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">result</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;maximum&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">evaluations</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">result</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;minimum&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">evaluations</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">result</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;maximum&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">evaluations</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;minimum&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-999&#39;</span><span class="p">)</span>
                <span class="n">result</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;maximum&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-999&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span></div>

<div class="viewcode-block" id="PerformanceTableau.showHTMLCriteria"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.showHTMLCriteria">[docs]</a>    <span class="k">def</span> <span class="nf">showHTMLCriteria</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">criteriaSubset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">Sorted</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>\
                         <span class="n">ndigits</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>\
                         <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        shows the criteria in the system browser view.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">webbrowser</span>
        <span class="n">fileName</span> <span class="o">=</span> <span class="s1">&#39;/tmp/criteriaView.html&#39;</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_htmlCriteriaView</span><span class="p">(</span><span class="n">criteria</span><span class="o">=</span><span class="n">criteriaSubset</span><span class="p">,</span><span class="n">Sorted</span><span class="o">=</span><span class="n">Sorted</span><span class="p">,</span>\
                                           <span class="n">ndigits</span><span class="o">=</span><span class="n">ndigits</span><span class="p">,</span>\
                                           <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;file://&#39;</span><span class="o">+</span><span class="n">fileName</span>
        <span class="n">webbrowser</span><span class="o">.</span><span class="n">open_new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_htmlCriteriaView</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">criteria</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">Sorted</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>\
                         <span class="n">ndigits</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Family of Criteria&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders a html view of the in the XMCDA2 format.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">title</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">=</span> <span class="s1">&#39;&lt;h1&gt;</span><span class="si">%s</span><span class="s1">: Family of Criteria&lt;/h1&gt;&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">=</span> <span class="s1">&#39;&lt;h1&gt;</span><span class="si">%s</span><span class="s1">&lt;/h1&gt;&#39;</span> <span class="o">%</span> <span class="n">title</span>            
        <span class="k">if</span> <span class="n">criteria</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">Sorted</span><span class="p">:</span>
            <span class="n">criteriaList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        
        <span class="n">html</span> <span class="o">+=</span> <span class="s2">&quot;&quot;&quot;&lt;table border=&quot;1&quot;&gt;</span>
<span class="s2">        &lt;tr bgcolor=&quot;#9acd32&quot;&gt;</span>
<span class="s2">        &lt;th rowspan=&quot;2&quot;&gt;#&lt;/th&gt;</span>
<span class="s2">        &lt;th rowspan=&quot;2&quot;&gt;Identifyer&lt;/th&gt;</span>
<span class="s2">        &lt;th rowspan=&quot;2&quot;&gt;Name&lt;/th&gt;</span>
<span class="s2">        &lt;th rowspan=&quot;2&quot;&gt;Comment&lt;/th&gt;</span>
<span class="s2">        &lt;th rowspan=&quot;2&quot;&gt;Weight&lt;/th&gt;</span>
<span class="s2">        &lt;th colspan=&quot;3&quot;&gt;Scale&lt;/th&gt;</span>
<span class="s2">        &lt;th colspan=&quot;5&quot;&gt;Thresholds (ax + b)&lt;/th&gt;</span>
<span class="s2">        &lt;/tr&gt;</span>
<span class="s2">        &lt;tr bgcolor=&quot;#9acd32&quot;&gt;</span>
<span class="s2">        &lt;th&gt;direction&lt;/th&gt;</span>
<span class="s2">        &lt;th&gt;min&lt;/th&gt;</span>
<span class="s2">        &lt;th&gt;max&lt;/th&gt;</span>
<span class="s2">        &lt;th&gt;indifference&lt;/th&gt;</span>
<span class="s2">        &lt;th&gt;preference&lt;/th&gt;</span>
<span class="s2">        &lt;th&gt;veto&lt;/th&gt;</span>
<span class="s2">        &lt;/tr&gt;&quot;&quot;&quot;</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">critg</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span>
            <span class="c1">#print(g,critg)</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&lt;td align=&quot;center&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="n">i</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;th bgcolor=&quot;#FFF79B&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/th&gt;&#39;</span> <span class="o">%</span> <span class="n">critg</span><span class="p">[</span><span class="s1">&#39;shortName&#39;</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;th bgcolor=&quot;#FFF79B&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/th&gt;&#39;</span> <span class="o">%</span> <span class="n">g</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">critg</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span><span class="n">critg</span><span class="p">[</span><span class="s1">&#39;comment&#39;</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;td&gt;No comment&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">critg</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td align=&quot;center&quot;&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="n">critg</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td align=&quot;center&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="n">critg</span><span class="p">[</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td align=&quot;center&quot;&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="n">critg</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td align=&quot;center&quot;&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="n">critg</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td align=&quot;center&quot;&gt;</span><span class="si">%.2f</span><span class="s1">x + </span><span class="si">%.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span>\
                                <span class="p">(</span><span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>\
                                 <span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>                
            <span class="k">except</span><span class="p">:</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&lt;/td&gt;&#39;</span>
                
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td align=&quot;center&quot;&gt;</span><span class="si">%.2f</span><span class="s1">x + </span><span class="si">%.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span>\
                                <span class="p">(</span><span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>\
                                 <span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>                
            <span class="k">except</span><span class="p">:</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&lt;/td&gt;&#39;</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td align=&quot;center&quot;&gt;</span><span class="si">%.2f</span><span class="s1">x + </span><span class="si">%.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span>\
                                <span class="p">(</span><span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>\
                                 <span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>                
            <span class="k">except</span><span class="p">:</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&lt;/td&gt;&#39;</span>

            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;&#39;</span>
            
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/table&gt;&#39;</span>
        <span class="k">return</span> <span class="n">html</span>
        
        
<div class="viewcode-block" id="PerformanceTableau.showHTMLPerformanceTableau"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.showHTMLPerformanceTableau">[docs]</a>    <span class="k">def</span> <span class="nf">showHTMLPerformanceTableau</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">actionsSubset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>\
                                   <span class="n">fromIndex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">toIndex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>\
                                   <span class="n">isSorted</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>\
                                   <span class="n">Transposed</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">ndigits</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>\
                                   <span class="n">ContentCentered</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        shows the html version of the performance tableau in a browser window.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">webbrowser</span>
        <span class="n">fileName</span> <span class="o">=</span> <span class="s1">&#39;/tmp/performanceTable.html&#39;</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_htmlPerformanceTableau</span><span class="p">(</span><span class="n">actions</span><span class="o">=</span><span class="n">actionsSubset</span><span class="p">,</span>\
                                             <span class="n">fromIndex</span><span class="o">=</span><span class="n">fromIndex</span><span class="p">,</span>\
                                             <span class="n">toIndex</span><span class="o">=</span><span class="n">toIndex</span><span class="p">,</span>\
                                             <span class="n">isSorted</span><span class="o">=</span><span class="n">isSorted</span><span class="p">,</span>\
                                           <span class="n">Transposed</span><span class="o">=</span><span class="n">Transposed</span><span class="p">,</span>\
                                           <span class="n">ndigits</span><span class="o">=</span><span class="n">ndigits</span><span class="p">,</span>
                                           <span class="n">ContentCentered</span><span class="o">=</span><span class="n">ContentCentered</span><span class="p">,</span>
                                           <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;file://&#39;</span><span class="o">+</span><span class="n">fileName</span>
        <span class="n">webbrowser</span><span class="o">.</span><span class="n">open_new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span></div>
           
            
    <span class="k">def</span> <span class="nf">_htmlPerformanceTableau</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">actions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>\
                               <span class="n">fromIndex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>\
                               <span class="n">toIndex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>\
                               <span class="n">isSorted</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>\
                             <span class="n">Transposed</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">ndigits</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>\
                             <span class="n">ContentCentered</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                             <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the performance tableau citerion x actions in html format.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">minMaxEvaluations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeMinMaxEvaluations</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">title</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">=</span> <span class="s1">&#39;&lt;h1&gt;Performance table </span><span class="si">%s</span><span class="s1">&lt;/h1&gt;&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">=</span> <span class="s1">&#39;&lt;h1&gt;</span><span class="si">%s</span><span class="s1">&lt;/h1&gt;&#39;</span> <span class="o">%</span> <span class="n">title</span>            
        <span class="n">criteriaKeys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">criteria</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">isSorted</span><span class="p">:</span>
            <span class="n">criteriaKeys</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">actions</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
            <span class="n">actionsKeys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">actionsKeys</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">isSorted</span><span class="p">:</span>
            <span class="n">actionsKeys</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="k">if</span> <span class="n">ContentCentered</span><span class="p">:</span>
            <span class="n">alignFormat</span> <span class="o">=</span> <span class="s1">&#39;center&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">alignFormat</span> <span class="o">=</span> <span class="s1">&#39;right&#39;</span>
        <span class="k">if</span> <span class="n">Transposed</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;table style=&quot;background-color:White;&quot; border=&quot;1&quot;&gt;&#39;</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr bgcolor=&quot;#9acd32&quot;&gt;&lt;th&gt;criterion&lt;/th&gt;&#39;</span>
            <span class="k">if</span> <span class="n">fromIndex</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">fromIndex</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">if</span> <span class="n">toIndex</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">toIndex</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actionsKeys</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">fromIndex</span><span class="p">,</span><span class="n">toIndex</span><span class="p">):</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">actionsKeys</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">xName</span> <span class="o">=</span> <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;shortName&#39;</span><span class="p">]</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">xName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;th bgcolor=&quot;#FFF79B&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/th&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">xName</span><span class="p">)</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;&#39;</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaKeys</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">gName</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;shortName&#39;</span><span class="p">]</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">gName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&lt;th bgcolor=&quot;#FFF79B&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/th&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">gName</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsKeys</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;-999&quot;</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">minMaxEvaluations</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;minimum&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">minMaxEvaluations</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;maximum&#39;</span><span class="p">]:</span>
                            <span class="n">formatString</span> <span class="o">=</span> <span class="s1">&#39;&lt;td align=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="si">%%</span><span class="s1"> .</span><span class="si">%d</span><span class="s1">f&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">alignFormat</span><span class="p">,</span><span class="n">ndigits</span><span class="p">)</span>
                            <span class="n">html</span> <span class="o">+=</span> <span class="n">formatString</span> <span class="o">%</span> <span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="n">minMaxEvaluations</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;minimum&#39;</span><span class="p">]:</span>
                            <span class="n">formatString</span> <span class="o">=</span> <span class="s1">&#39;&lt;td bgcolor=&quot;#ffddff&quot;  align=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="si">%%</span><span class="s1"> .</span><span class="si">%d</span><span class="s1">f&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">alignFormat</span><span class="p">,</span><span class="n">ndigits</span><span class="p">)</span>
                            <span class="n">html</span> <span class="o">+=</span> <span class="n">formatString</span> <span class="o">%</span> <span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="n">minMaxEvaluations</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;maximum&#39;</span><span class="p">]:</span>
                            <span class="n">formatString</span> <span class="o">=</span> <span class="s1">&#39;&lt;td bgcolor=&quot;#ddffdd&quot; align=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="si">%%</span><span class="s1"> .</span><span class="si">%d</span><span class="s1">f&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">alignFormat</span><span class="p">,</span><span class="n">ndigits</span><span class="p">)</span>
                            <span class="n">html</span> <span class="o">+=</span> <span class="n">formatString</span> <span class="o">%</span> <span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">formatString</span> <span class="o">=</span> <span class="s1">&#39;&lt;td align=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="si">%%</span><span class="s1"> .</span><span class="si">%d</span><span class="s1">f&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">alignFormat</span><span class="p">,</span><span class="n">ndigits</span><span class="p">)</span>
                            <span class="n">html</span> <span class="o">+=</span> <span class="n">formatString</span> <span class="o">%</span> <span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                            
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td align=&quot;center&quot;&gt;&lt;span style=&quot;color: LightGrey;font-size:75%; &quot;&gt;NA&lt;/span&gt;&lt;/td&gt;&#39;</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;&#39;</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/table&gt;&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;table style=&quot;background-color:White;&quot; border=&quot;1&quot;&gt;&#39;</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr bgcolor=&quot;#9acd32&quot;&gt;&lt;th&gt;criteria&lt;/th&gt;&#39;</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaKeys</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">gName</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;shortName&#39;</span><span class="p">]</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">gName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;th bgcolor=&quot;#FFF79B&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/th&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">gName</span><span class="p">)</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;&#39;</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr bgcolor=&quot;#9acd32&quot;&gt;&lt;th&gt;weight&lt;/th&gt;&#39;</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaKeys</span><span class="p">:</span>
                <span class="n">gWeight</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;th bgcolor=&quot;#FFF79B&quot;&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/th&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">gWeight</span><span class="p">)</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;&#39;</span>
            <span class="k">if</span> <span class="n">fromIndex</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">fromIndex</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">if</span> <span class="n">toIndex</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">toIndex</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actionsKeys</span><span class="p">)</span>
            <span class="c1">#for x in actionsKeys:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">fromIndex</span><span class="p">,</span><span class="n">toIndex</span><span class="p">):</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">actionsKeys</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">xName</span> <span class="o">=</span> <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;shortName&#39;</span><span class="p">]</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">xName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&lt;th bgcolor=&quot;#FFF79B&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/th&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">xName</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaKeys</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;-999&quot;</span><span class="p">):</span>
                            <span class="k">if</span> <span class="n">minMaxEvaluations</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;minimum&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">minMaxEvaluations</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;maximum&#39;</span><span class="p">]:</span>
                                <span class="n">formatString</span> <span class="o">=</span> <span class="s1">&#39;&lt;td align=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="si">%%</span><span class="s1"> .</span><span class="si">%d</span><span class="s1">f&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">alignFormat</span><span class="p">,</span><span class="n">ndigits</span><span class="p">)</span>
                                <span class="n">html</span> <span class="o">+=</span> <span class="n">formatString</span> <span class="o">%</span> <span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="n">minMaxEvaluations</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;minimum&#39;</span><span class="p">]:</span>
                                <span class="n">formatString</span> <span class="o">=</span> <span class="s1">&#39;&lt;td bgcolor=&quot;#ddffdd&quot;  align=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="si">%%</span><span class="s1"> .</span><span class="si">%d</span><span class="s1">f&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">alignFormat</span><span class="p">,</span><span class="n">ndigits</span><span class="p">)</span>
                                <span class="n">html</span> <span class="o">+=</span> <span class="n">formatString</span> <span class="o">%</span> <span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="n">minMaxEvaluations</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;maximum&#39;</span><span class="p">]:</span>
                                <span class="n">formatString</span> <span class="o">=</span> <span class="s1">&#39;&lt;td bgcolor=&quot;#ffddff&quot; align=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="si">%%</span><span class="s1"> .</span><span class="si">%d</span><span class="s1">f&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">alignFormat</span><span class="p">,</span><span class="n">ndigits</span><span class="p">)</span>
                                <span class="n">html</span> <span class="o">+=</span> <span class="n">formatString</span> <span class="o">%</span> <span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">formatString</span> <span class="o">=</span> <span class="s1">&#39;&lt;td align=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="si">%%</span><span class="s1"> .</span><span class="si">%d</span><span class="s1">f&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">alignFormat</span><span class="p">,</span><span class="n">ndigits</span><span class="p">)</span>
                                <span class="n">html</span> <span class="o">+=</span> <span class="n">formatString</span> <span class="o">%</span> <span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td align=&quot;center&quot;&gt;&lt;span style=&quot;color: LightGrey;font-size:75%;&quot;&gt;NA&lt;/span&gt;&lt;/td&gt;&#39;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;-999&quot;</span><span class="p">):</span>
                            <span class="k">if</span> <span class="n">minMaxEvaluations</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;minimum&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">minMaxEvaluations</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;maximum&#39;</span><span class="p">]:</span>
                                <span class="n">formatString</span> <span class="o">=</span> <span class="s1">&#39;&lt;td align=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="si">%%</span><span class="s1"> .</span><span class="si">%d</span><span class="s1">f&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">alignFormat</span><span class="p">,</span><span class="n">ndigits</span><span class="p">)</span>
                                <span class="n">html</span> <span class="o">+=</span> <span class="n">formatString</span> <span class="o">%</span> <span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="n">minMaxEvaluations</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;minimum&#39;</span><span class="p">]:</span>
                                <span class="n">formatString</span> <span class="o">=</span> <span class="s1">&#39;&lt;td bgcolor=&quot;#ffddff&quot;  align=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="si">%%</span><span class="s1"> .</span><span class="si">%d</span><span class="s1">f&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">alignFormat</span><span class="p">,</span><span class="n">ndigits</span><span class="p">)</span>
                                <span class="n">html</span> <span class="o">+=</span> <span class="n">formatString</span> <span class="o">%</span> <span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="n">minMaxEvaluations</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;maximum&#39;</span><span class="p">]:</span>
                                <span class="n">formatString</span> <span class="o">=</span> <span class="s1">&#39;&lt;td bgcolor=&quot;#ddffdd&quot; align=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="si">%%</span><span class="s1"> .</span><span class="si">%d</span><span class="s1">f&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">alignFormat</span><span class="p">,</span><span class="n">ndigits</span><span class="p">)</span>
                                <span class="n">html</span> <span class="o">+=</span> <span class="n">formatString</span> <span class="o">%</span> <span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">formatString</span> <span class="o">=</span> <span class="s1">&#39;&lt;td align=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="si">%%</span><span class="s1"> .</span><span class="si">%d</span><span class="s1">f&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">alignFormat</span><span class="p">,</span><span class="n">ndigits</span><span class="p">)</span>
                                <span class="n">html</span> <span class="o">+=</span> <span class="n">formatString</span> <span class="o">%</span> <span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td align=&quot;center&quot;&gt;&lt;span style=&quot;color: LightGrey;font-size:75%;&quot;&gt;NA&lt;/span&gt;&lt;/td&gt;&#39;</span>
                        
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;&#39;</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/table&gt;&#39;</span>
            
        <span class="k">return</span> <span class="n">html</span>



<span class="c1">##    # MCSR serialization added by Ian</span>
<span class="c1">##    def to_JSON(self):</span>
<span class="c1">##        &quot;&quot;&quot;</span>
<span class="c1">##        Convert the performance table .__dict__ into a JSON string</span>
<span class="c1">##        &quot;&quot;&quot;</span>
<span class="c1">##        return json.dumps(self.__dict__,sort_keys=True, indent=4, cls=_DecimalJSONEncoder)</span>
<span class="c1">##</span>
<span class="c1">##</span>
<span class="c1">########################################################################################################################</span>
<span class="c1">#######                                                showHTMLMCSRPerformanceTableau                             ######</span>
<span class="c1">#######                                                         START                                             ######</span>
<span class="c1">########################################################################################################################</span>
<span class="c1">##</span>
<span class="c1">##    def _showHTMLMCSRPerformanceTableau(self,ndigits=2,title=&#39;Min/Max Performance Tableau&#39;):</span>
<span class="c1">##</span>
<span class="c1">##        &quot;&quot;&quot;</span>
<span class="c1">##        Ask the server for an HTML representation of the performance tableau.</span>
<span class="c1">##</span>
<span class="c1">##        &quot;&quot;&quot;</span>
<span class="c1">##        import gzip</span>
<span class="c1">##        RESTurl = &quot;http://leopold-loewenheim.uni.lu/MCSR_REST_Service/Master_Thesis/performance_Tableau&quot;</span>
<span class="c1">##        params = gzip.compress(json.dumps({&#39;typeDict&#39;:self.to_JSON(),&#39;precision&#39;:ndigits,&#39;title&#39;:title}).encode(&#39;utf-8&#39;))</span>
<span class="c1">##        jsonHeader = {&#39;content-Type&#39;: &#39;application/json&#39;,&#39;content-Encoding&#39;: &#39;gzip&#39;}</span>
<span class="c1">##</span>
<span class="c1">##        #urllib</span>
<span class="c1">##        import urllib.request</span>
<span class="c1">##        req = urllib.request.Request(url=RESTurl, data=params, headers=jsonHeader)</span>
<span class="c1">##        resp = urllib.request.urlopen(req)</span>
<span class="c1">##        data = resp.read()</span>
<span class="c1">##        htmlResp = data.decode(&#39;utf-8&#39;)</span>
<span class="c1">##</span>
<span class="c1">##        import tempfile</span>
<span class="c1">##        temp=tempfile.NamedTemporaryFile(mode=&#39;w+t&#39;,delete=False)</span>
<span class="c1">##        temp.write(htmlResp)</span>
<span class="c1">##        temp.seek(0)</span>
<span class="c1">##</span>
<span class="c1">##        from urllib.request import pathname2url</span>
<span class="c1">##        import os</span>
<span class="c1">##        filePath = &#39;file:{}&#39;.format(pathname2url(os.path.abspath(temp.name)))</span>
<span class="c1">##</span>
<span class="c1">##        import webbrowser</span>
<span class="c1">##        webbrowser.open(filePath)</span>
<span class="c1">##</span>
<span class="c1">##        temp.close</span>
<span class="c1">###</span>
<span class="c1">########################################################################################################################</span>
<span class="c1">#######                                                showHTMLMCSRPerformanceTableau                              ######</span>
<span class="c1">#######                                                         END                                             ######</span>
<span class="c1">########################################################################################################################</span>
<span class="c1">##</span>
<span class="c1">##</span>
<span class="c1">##    # precision string needed to round decimals</span>
<span class="c1">##    def _calcPrecision(self,ndigits):</span>
<span class="c1">##        if(ndigits!=0):</span>
<span class="c1">##            precision=&#39;0.&#39;</span>
<span class="c1">##        else:</span>
<span class="c1">##            precision=&#39;0&#39;</span>
<span class="c1">##        for x in range(ndigits):</span>
<span class="c1">##            precision+=&#39;0&#39;</span>
<span class="c1">##        return precision</span>
<span class="c1">##</span>
<span class="c1">##</span>
<span class="c1">########################################################################################################################</span>
<span class="c1">#######                                                computeMCSRPerformanceTableau                              ######</span>
<span class="c1">#######                                                         START                                             ######</span>
<span class="c1">########################################################################################################################</span>
<span class="c1">##    def _computeMCSRPerformanceTableau(self,isSorted=True,</span>
<span class="c1">##                               ndigits=2,title=&#39;Min/Max Performance Tableau&#39;,Debug=False):</span>
<span class="c1">##</span>
<span class="c1">##        &quot;&quot;&quot;</span>
<span class="c1">##        Computes the performance table in a JSON compatible format with minima and maxima. Used by the Web API.</span>
<span class="c1">##</span>
<span class="c1">##        For a performance tableau with 5 criteria one obtains for instance</span>
<span class="c1">##        the following ordered dictionary in return::</span>
<span class="c1">##</span>
<span class="c1">##            OrderedDict([</span>
<span class="c1">##                (&#39;title&#39;, &#39;Min/Max Performance Tableau&#39;),</span>
<span class="c1">##                (&#39;precision&#39;, 2),</span>
<span class="c1">##                (&#39;criteriaList&#39;, OrderedDict([(&#39;0&#39;,&#39;g5&#39;), (&#39;1&#39;,&#39;g2&#39;), (&#39;2&#39;,&#39;g4&#39;), (&#39;3&#39;,&#39;g1&#39;), (&#39;4&#39;,&#39;g3&#39;)]),</span>
<span class="c1">##                (&#39;quantiles&#39;, OrderedDict([</span>
<span class="c1">##                                           (&#39;0&#39;,{&#39;a1&#39;:OrderedDict([</span>
<span class="c1">##                                                             (&#39;0&#39;,{&#39;quantile&#39;:Decimal(&#39;3&#39;), &#39;qantileClass&#39;:&#39;minimum&#39;}),</span>
<span class="c1">##                                                             (&#39;1&#39;,{&#39;quantile&#39;:Decimal(&#39;-17.92&#39;), &#39;qantileClass&#39;:&#39;default&#39;}),</span>
<span class="c1">##                                                             (&#39;2&#39;,{&#39;quantile&#39;:Decimal(&#39;26.68&#39;), &#39;qantileClass&#39;:&#39;maximum&#39;}),</span>
<span class="c1">##                                                             (&#39;3&#39;,{&#39;quantile&#39;:&#39;NaN, &#39;qantileClass&#39;:&#39;NaN&#39;}),</span>
<span class="c1">##                                                             (&#39;4&#39;,{&#39;quantile&#39;:Decimal(&#39;-33.99&#39;), &#39;qantileClass&#39;:&#39;default&#39;})</span>
<span class="c1">##                                           ])}),</span>
<span class="c1">##                                           (&#39;1&#39;,{&#39;a2&#39;:OrderedDict([</span>
<span class="c1">##                                                             (&#39;0&#39;,{&#39;quantile&#39;:Decimal(&#39;6&#39;), &#39;qantileClass&#39;:&#39;minimum&#39;}),</span>
<span class="c1">##                                                             (&#39;1&#39;,{&#39;quantile&#39;:Decimal(&#39;-30.71&#39;), &#39;qantileClass&#39;:&#39;default&#39;}),</span>
<span class="c1">##                                                             (&#39;2&#39;,{&#39;quantile&#39;:&#39;NaN&#39;, &#39;qantileClass&#39;:&#39;NaN&#39;}),</span>
<span class="c1">##                                                             (&#39;3&#39;,{&#39;quantile&#39;:Decimal(&#39;8&#39;), &#39;qantileClass&#39;:&#39;maximum&#39;}),</span>
<span class="c1">##                                                             (&#39;4&#39;,{&#39;quantile&#39;:Decimal(&#39;-77.77&#39;), &#39;qantileClass&#39;:&#39;default&#39;})</span>
<span class="c1">##                                           ])}),</span>
<span class="c1">##                                           (&#39;2&#39;, ...</span>
<span class="c1">##                ]))...</span>
<span class="c1">##            ]))</span>
<span class="c1">##</span>
<span class="c1">##        &quot;&quot;&quot;</span>
<span class="c1">##</span>
<span class="c1">##        if Debug: print(&#39;/nSTART: computeMCSRPerformanceTableau&#39;)</span>
<span class="c1">##</span>
<span class="c1">##        from collections import OrderedDict</span>
<span class="c1">##        from decimal import Decimal</span>
<span class="c1">##        from digraphs import flatten</span>
<span class="c1">##        performanceTableau = {}</span>
<span class="c1">##        performanceTableau[&#39;title&#39;] = title</span>
<span class="c1">##</span>
<span class="c1">##        min=&quot;minimum&quot;</span>
<span class="c1">##        max=&quot;maximum&quot;</span>
<span class="c1">##</span>
<span class="c1">##        minMaxEvaluations = self.computeMinMaxEvaluations()</span>
<span class="c1">##</span>
<span class="c1">##        performanceTableau[&quot;precision&quot;] = ndigits</span>
<span class="c1">##</span>
<span class="c1">##        if Debug: print(&#39;/nSTART: Calculating criteria list&#39;)</span>
<span class="c1">##</span>
<span class="c1">##        #need a dict, but list(self.criteria) is not a dict</span>
<span class="c1">##        #therefore I need to construct criteriaList as a dict first</span>
<span class="c1">##        criteriaList = {}</span>
<span class="c1">##        tempCriteria= list(self.criteria)</span>
<span class="c1">##        if isSorted:</span>
<span class="c1">##            tempCriteria.sort()</span>
<span class="c1">##        for index,c in enumerate(tempCriteria):</span>
<span class="c1">##            criteriaList[str(index)] = c</span>
<span class="c1">##        criteriaList = OrderedDict(sorted(criteriaList.items(),key=lambda index: int(index[0])))</span>
<span class="c1">##</span>
<span class="c1">##        if Debug: print(&#39;/nDONE: Calculating criteria list&#39;)</span>
<span class="c1">##</span>
<span class="c1">##        performanceTableau[&quot;criteriaList&quot;] = criteriaList</span>
<span class="c1">##</span>
<span class="c1">##        actionsList = list(self.actions)</span>
<span class="c1">##        if isSorted:</span>
<span class="c1">##            actionsList.sort()</span>
<span class="c1">##</span>
<span class="c1">##        precision = self._calcPrecision(ndigits)</span>
<span class="c1">##</span>
<span class="c1">##        if Debug: print(&#39;/nSTART: Calculating quantiles&#39;)</span>
<span class="c1">##</span>
<span class="c1">##        quantiles=OrderedDict()</span>
<span class="c1">##        for index, x in enumerate(actionsList):</span>
<span class="c1">##            quantiles[str(index)] = OrderedDict()</span>
<span class="c1">##            quantiles[str(index)][x] = {}</span>
<span class="c1">##            for gKey,gValue in criteriaList.items():</span>
<span class="c1">##                quantilexg = self.computeActionCriterionQuantile(x,gValue)</span>
<span class="c1">##                if quantilexg != &#39;NA&#39;:</span>
<span class="c1">##                    quantile=self.evaluation[gValue][x]</span>
<span class="c1">##                    constantQuantile = (minMaxEvaluations[gValue][&#39;minimum&#39;] == minMaxEvaluations[gValue][&#39;maximum&#39;])</span>
<span class="c1">##                    if quantile != Decimal(&quot;-999&quot;):</span>
<span class="c1">##                        if ((quantile == minMaxEvaluations[gValue][&#39;minimum&#39;]) and (not constantQuantile)):</span>
<span class="c1">##                            quantiles[str(index)][x][gKey]={&#39;quantile&#39;:quantile.quantize(Decimal(precision),rounding=decimal.ROUND_DOWN),</span>
<span class="c1">##                                                            &#39;quantileClass&#39;:min}</span>
<span class="c1">##                        elif ((quantile == minMaxEvaluations[gValue][&#39;maximum&#39;]) and (not constantQuantile)):</span>
<span class="c1">##                            quantiles[str(index)][x][gKey]={&#39;quantile&#39;:quantile.quantize(Decimal(precision),rounding=decimal.ROUND_DOWN),</span>
<span class="c1">##                                                            &#39;quantileClass&#39;:max}</span>
<span class="c1">##                        else:</span>
<span class="c1">##                            quantiles[str(index)][x][gKey]={&#39;quantile&#39;:quantile.quantize(Decimal(precision),rounding=decimal.ROUND_DOWN),</span>
<span class="c1">##                                                            &#39;quantileClass&#39;:&quot;default&quot;}</span>
<span class="c1">##</span>
<span class="c1">##                else:</span>
<span class="c1">##                    quantiles[str(index)][x][gKey]={&#39;quantile&#39;:&quot;NaN&quot;,</span>
<span class="c1">##                                                            &#39;quantileClass&#39;:&quot;NaN&quot;}</span>
<span class="c1">##                    # break</span>
<span class="c1">##            quantiles[str(index)]={x:OrderedDict(sorted(quantiles[str(index)][x].items(),key=lambda index: int(index[0])))}</span>
<span class="c1">##</span>
<span class="c1">##        if Debug: print(&#39;/nDONE: Calculating quantiles&#39;)</span>
<span class="c1">##</span>
<span class="c1">##        quantiles=OrderedDict(sorted(quantiles.items(),key=lambda index: int(index[0])))</span>
<span class="c1">##        performanceTableau[&#39;quantiles&#39;] = quantiles</span>
<span class="c1">##</span>
<span class="c1">##        if Debug: print(&#39;/nDONE: computeMCSRPerformanceTableau&#39;)</span>
<span class="c1">##</span>
<span class="c1">##        return performanceTableau</span>
<span class="c1">##</span>
<span class="c1">########################################################################################################################</span>
<span class="c1">#######                                                computeMCSRPerformanceTableau                            ######</span>
<span class="c1">#######                                                         END                                             ######</span>
<span class="c1">########################################################################################################################</span>
<span class="c1">##</span>
<span class="c1">##</span>
<span class="c1">########################################################################################################################</span>
<span class="c1">#######                                                computeMCSRPerformanceHeatmap                              ######</span>
<span class="c1">#######                                                         START                                             ######</span>
<span class="c1">########################################################################################################################</span>
<span class="c1">##    def _computeMCSRPerformanceHeatmap(self,criteriaList=None,</span>
<span class="c1">##                               actionsList=None,</span>
<span class="c1">##                               ndigits=2,</span>
<span class="c1">##                               colorLevels=7,</span>
<span class="c1">##                               Ranked=True,</span>
<span class="c1">##                               title=&#39;Performance Heatmap&#39;,</span>
<span class="c1">##                               Correlations=False,</span>
<span class="c1">##                               Threading=False,</span>
<span class="c1">##                               Debug=False):</span>
<span class="c1">##        &quot;&quot;&quot;</span>
<span class="c1">##        Computes the Brewer RdYlGn colored heatmap of the performance table</span>
<span class="c1">##        actions x criteria in ordered dictionary format. Three color levels (5,7 or 9)</span>
<span class="c1">##        are provided. Used by the Web API.</span>
<span class="c1">##</span>
<span class="c1">##        For a performance tableau with 5 criteria, colorLevels=5 and</span>
<span class="c1">##        Correlations = True, one obtains for instance</span>
<span class="c1">##        the following ordered dictionary in return::</span>
<span class="c1">##</span>
<span class="c1">##            OrderedDict([</span>
<span class="c1">##                (&#39;title&#39;, &#39;Performance Heatmap&#39;),</span>
<span class="c1">##                (&#39;precision&#39;, 2),</span>
<span class="c1">##                (&#39;colorPalette&#39;, OrderedDict([</span>
<span class="c1">##                                  (&#39;0&#39;,{&#39;quantile&#39;:Decimal(&#39;0.2&#39;),&#39;quantileClass&#39;:&#39;q5_1&#39;}),</span>
<span class="c1">##                                  (&#39;1&#39;,{&#39;quantile&#39;:Decimal(&#39;0.4&#39;),&#39;quantileClass&#39;:&#39;q5_2&#39;}),</span>
<span class="c1">##                                  (&#39;2&#39;,{&#39;quantile&#39;:Decimal(&#39;0.6&#39;),&#39;quantileClass&#39;:&#39;q5_3&#39;}),</span>
<span class="c1">##                                  (&#39;3&#39;,{&#39;quantile&#39;:Decimal(&#39;0.8&#39;),&#39;quantileClass&#39;:&#39;q5_4&#39;}),</span>
<span class="c1">##                                  (&#39;4&#39;,{&#39;quantile&#39;:Decimal(&#39;1.0&#39;),&#39;quantileClass&#39;:&#39;q5_5&#39;})</span>
<span class="c1">##                ])),</span>
<span class="c1">##                (&#39;criteriaList&#39;, OrderedDict([(&#39;0&#39;,&#39;g5&#39;), (&#39;1&#39;,&#39;g2&#39;), (&#39;2&#39;,&#39;g4&#39;), (&#39;3&#39;,&#39;g1&#39;), (&#39;4&#39;,&#39;g3&#39;)]),</span>
<span class="c1">##                (&#39;criteriaCorrelations&#39;, OrderedDict([</span>
<span class="c1">##                                                     (&#39;0&#39;,Decimal(&#39;0.71428&#39;)),</span>
<span class="c1">##                                                     (&#39;1&#39;,Decimal(&#39;0.48571&#39;)),</span>
<span class="c1">##                                                     (&#39;2&#39;,Decimal(&#39;0.40952&#39;)),</span>
<span class="c1">##                                                     (&#39;3&#39;,Decimal(&#39;0.35238&#39;)),</span>
<span class="c1">##                                                     (&#39;4&#39;,Decimal(&#39;0.16190&#39;))</span>
<span class="c1">##                ])),</span>
<span class="c1">##                (&#39;quantiles&#39;, OrderedDict([</span>
<span class="c1">##                                           (&#39;0&#39;,{&#39;a1&#39;:OrderedDict([</span>
<span class="c1">##                                                             (&#39;0&#39;,{&#39;quantile&#39;:Decimal(&#39;3&#39;), &#39;qantileClass&#39;:&#39;q5-2&#39;}),</span>
<span class="c1">##                                                             (&#39;1&#39;,{&#39;quantile&#39;:Decimal(&#39;-17.92&#39;), &#39;qantileClass&#39;:&#39;q5-5&#39;}),</span>
<span class="c1">##                                                             (&#39;2&#39;,{&#39;quantile&#39;:Decimal(&#39;26.68&#39;), &#39;qantileClass&#39;:&#39;q5-2&#39;}),</span>
<span class="c1">##                                                             (&#39;3&#39;,{&#39;quantile&#39;:Decimal(&#39;1&#39;), &#39;qantileClass&#39;:&#39;q5-1&#39;}),</span>
<span class="c1">##                                                             (&#39;4&#39;,{&#39;quantile&#39;:Decimal(&#39;-33.99&#39;), &#39;qantileClass&#39;:&#39;q5-3&#39;})</span>
<span class="c1">##                                           ])}),</span>
<span class="c1">##                                           (&#39;1&#39;,{&#39;a2&#39;:OrderedDict([</span>
<span class="c1">##                                                             (&#39;0&#39;,{&#39;quantile&#39;:Decimal(&#39;6&#39;), &#39;qantileClass&#39;:&#39;q5-3&#39;}),</span>
<span class="c1">##                                                             (&#39;1&#39;,{&#39;quantile&#39;:Decimal(&#39;-30.71&#39;), &#39;qantileClass&#39;:&#39;q5-5&#39;}),</span>
<span class="c1">##                                                             (&#39;2&#39;,{&#39;quantile&#39;:Decimal(&#39;66.35&#39;), &#39;qantileClass&#39;:&#39;q5-4&#39;}),</span>
<span class="c1">##                                                             (&#39;3&#39;,{&#39;quantile&#39;:Decimal(&#39;8&#39;), &#39;qantileClass&#39;:&#39;q5-5&#39;}),</span>
<span class="c1">##                                                             (&#39;4&#39;,{&#39;quantile&#39;:Decimal(&#39;-77.77&#39;), &#39;qantileClass&#39;:&#39;q5-3&#39;})</span>
<span class="c1">##                                           ])}),</span>
<span class="c1">##                                           (&#39;2&#39;, ...</span>
<span class="c1">##                ]))...</span>
<span class="c1">##            ]))</span>
<span class="c1">##</span>
<span class="c1">##        &quot;&quot;&quot;</span>
<span class="c1">##        if Debug: print(&#39;/nSTART: computeMCSRPerformanceHeatmap&#39;)</span>
<span class="c1">##</span>
<span class="c1">##        from collections import OrderedDict</span>
<span class="c1">##        from decimal import Decimal</span>
<span class="c1">##        from digraphs import flatten</span>
<span class="c1">##        heatmap = OrderedDict()</span>
<span class="c1">##        heatmap[&#39;title&#39;] = title</span>
<span class="c1">##</span>
<span class="c1">##        heatmap[&quot;precision&quot;] = ndigits</span>
<span class="c1">##</span>
<span class="c1">##        brewerRdYlGn9Colors = {&#39;0&#39;:{&#39;quantile&#39;:Decimal(&#39;0.1111&#39;),&#39;quantileClass&#39;:&quot;q9_1&quot;},</span>
<span class="c1">##                               &#39;1&#39;:{&#39;quantile&#39;:Decimal(&#39;0.2222&#39;),&#39;quantileClass&#39;:&quot;q9_2&quot;},</span>
<span class="c1">##                               &#39;2&#39;:{&#39;quantile&#39;:Decimal(&#39;0.3333&#39;),&#39;quantileClass&#39;:&quot;q9_3&quot;},</span>
<span class="c1">##                               &#39;3&#39;:{&#39;quantile&#39;:Decimal(&#39;0.4444&#39;),&#39;quantileClass&#39;:&quot;q9_4&quot;},</span>
<span class="c1">##                               &#39;4&#39;:{&#39;quantile&#39;:Decimal(&#39;0.5555&#39;),&#39;quantileClass&#39;:&quot;q9_5&quot;},</span>
<span class="c1">##                               &#39;5&#39;:{&#39;quantile&#39;:Decimal(&#39;0.6666&#39;),&#39;quantileClass&#39;:&quot;q9_6&quot;},</span>
<span class="c1">##                               &#39;6&#39;:{&#39;quantile&#39;:Decimal(&#39;0.7777&#39;),&#39;quantileClass&#39;:&quot;q9_7&quot;},</span>
<span class="c1">##                               &#39;7&#39;:{&#39;quantile&#39;:Decimal(&#39;0.8888&#39;),&#39;quantileClass&#39;:&quot;q9_8&quot;},</span>
<span class="c1">##                               &#39;8&#39;:{&#39;quantile&#39;:Decimal(&#39;1.0000&#39;),&#39;quantileClass&#39;:&quot;q9_9&quot;}</span>
<span class="c1">##                               }</span>
<span class="c1">##</span>
<span class="c1">##        brewerRdYlGn7Colors = {&#39;0&#39;:{&#39;quantile&#39;:Decimal(&#39;0.1429&#39;),&#39;quantileClass&#39;:&#39;q7_1&#39;},</span>
<span class="c1">##                               &#39;1&#39;:{&#39;quantile&#39;:Decimal(&#39;0.2857&#39;),&#39;quantileClass&#39;:&#39;q7_2&#39;},</span>
<span class="c1">##                               &#39;2&#39;:{&#39;quantile&#39;:Decimal(&#39;0.4286&#39;),&#39;quantileClass&#39;:&#39;q7_3&#39;},</span>
<span class="c1">##                               &#39;3&#39;:{&#39;quantile&#39;:Decimal(&#39;0.5714&#39;),&#39;quantileClass&#39;:&#39;q7_4&#39;},</span>
<span class="c1">##                               &#39;4&#39;:{&#39;quantile&#39;:Decimal(&#39;0.7143&#39;),&#39;quantileClass&#39;:&#39;q7_5&#39;},</span>
<span class="c1">##                               &#39;5&#39;:{&#39;quantile&#39;:Decimal(&#39;0.8571&#39;),&#39;quantileClass&#39;:&#39;q7_6&#39;},</span>
<span class="c1">##                               &#39;6&#39;:{&#39;quantile&#39;:Decimal(&#39;1.0000&#39;),&#39;quantileClass&#39;:&#39;q7_7&#39;}</span>
<span class="c1">##        }</span>
<span class="c1">##</span>
<span class="c1">##        brewerRdYlGn5Colors = {&#39;0&#39;:{&#39;quantile&#39;:Decimal(&#39;0.2&#39;),&#39;quantileClass&#39;:&#39;q5_1&#39;},</span>
<span class="c1">##                               &#39;1&#39;:{&#39;quantile&#39;:Decimal(&#39;0.4&#39;),&#39;quantileClass&#39;:&#39;q5_2&#39;},</span>
<span class="c1">##                               &#39;2&#39;:{&#39;quantile&#39;:Decimal(&#39;0.6&#39;),&#39;quantileClass&#39;:&#39;q5_3&#39;},</span>
<span class="c1">##                               &#39;3&#39;:{&#39;quantile&#39;:Decimal(&#39;0.8&#39;),&#39;quantileClass&#39;:&#39;q5_4&#39;},</span>
<span class="c1">##                               &#39;4&#39;:{&#39;quantile&#39;:Decimal(&#39;1.0&#39;),&#39;quantileClass&#39;:&#39;q5_5&#39;}</span>
<span class="c1">##        }</span>
<span class="c1">##</span>
<span class="c1">##        if colorLevels == 7:</span>
<span class="c1">##            colorPalette = brewerRdYlGn7Colors</span>
<span class="c1">##        elif colorLevels == 9:</span>
<span class="c1">##            colorPalette = brewerRdYlGn9Colors</span>
<span class="c1">##        elif colorLevels == 5:</span>
<span class="c1">##            colorPalette = brewerRdYlGn5Colors</span>
<span class="c1">##        else:</span>
<span class="c1">##            colorPalette = brewerRdYlGn7Colors</span>
<span class="c1">##</span>
<span class="c1">##        colorPalette = OrderedDict(sorted(colorPalette.items()))</span>
<span class="c1">##        heatmap[&#39;colorPalette&#39;] = colorPalette</span>
<span class="c1">##</span>
<span class="c1">##        nc = len(colorPalette)</span>
<span class="c1">##</span>
<span class="c1">##        if Debug: print(&#39;/nSTART: Calculating action list&#39;)</span>
<span class="c1">##</span>
<span class="c1">##        if Ranked and actionsList == None:</span>
<span class="c1">##            # from weakOrders import QuantilesRankingDigraph</span>
<span class="c1">##            # qsr = QuantilesRankingDigraph(self,LowerClosed=True,</span>
<span class="c1">##            #                               Threading=Threading,</span>
<span class="c1">##            #                               Debug=Debug)</span>
<span class="c1">##            # actionsList = [x for x in flatten(qsr.computeQsRbcRanking())]</span>
<span class="c1">##            from sparseOutrankingDigraphs import PreRankedOutrankingDigraph</span>
<span class="c1">##            prg = PreRankedOutrankingDigraph(self,LowerClosed=True,</span>
<span class="c1">##                                             Threading=Threading,Debug=Debug)</span>
<span class="c1">##            actionsList = prg.computeBoostedRanking()</span>
<span class="c1">##        else:</span>
<span class="c1">##            if actionsList == None:</span>
<span class="c1">##                actionsList = list(self.actions.keys())</span>
<span class="c1">##                actionsList.sort()</span>
<span class="c1">##</span>
<span class="c1">##        if Debug: print(&#39;/nDONE: Calculating action list&#39;)</span>
<span class="c1">##</span>
<span class="c1">##        if Debug: print(&#39;/nSTART: Calculating criteria list and correlations/weights&#39;)</span>
<span class="c1">##</span>
<span class="c1">##        if criteriaList == None:</span>
<span class="c1">##            from outrankingDigraphs import OutrankingDigraph</span>
<span class="c1">##            if Correlations:</span>
<span class="c1">##                criteriaCorrelations = OutrankingDigraph.showMarginalVersusGlobalOutrankingCorrelation(</span>
<span class="c1">##                    qsr,</span>
<span class="c1">##                    Threading=Threading,</span>
<span class="c1">##                    Comments=False)</span>
<span class="c1">##                criteriaList={}</span>
<span class="c1">##                correlations={}</span>
<span class="c1">##</span>
<span class="c1">##                criteriaWeightsList = [(self.criteria[g][&#39;weight&#39;],g) for g in self.criteria.keys()]</span>
<span class="c1">##                criteriaWeightsList.sort(reverse=True)</span>
<span class="c1">##</span>
<span class="c1">##                criteriaWeights={}</span>
<span class="c1">##                for index,c in enumerate(criteriaCorrelations):</span>
<span class="c1">##                    criteriaList[str(index)]=c[1]</span>
<span class="c1">##                    correlations[str(index)]=c[0]</span>
<span class="c1">##                    for indexW,g in enumerate(criteriaWeightsList):</span>
<span class="c1">##                     if (g[1]==c[1]):</span>
<span class="c1">##                         criteriaWeights[str(index)]=g[0]</span>
<span class="c1">##                         break</span>
<span class="c1">##            else:</span>
<span class="c1">##                criteriaWeightsList = [(self.criteria[g][&#39;weight&#39;],g) for g in self.criteria.keys()]</span>
<span class="c1">##                criteriaWeightsList.sort(reverse=True)</span>
<span class="c1">##                criteriaList={}</span>
<span class="c1">##                criteriaWeights={}</span>
<span class="c1">##                for index,g in enumerate(criteriaWeightsList):</span>
<span class="c1">##                    criteriaList[str(index)]=g[1]</span>
<span class="c1">##                    criteriaWeights[str(index)]=g[0]</span>
<span class="c1">##</span>
<span class="c1">##                criteriaCorrelations = None</span>
<span class="c1">##        else:</span>
<span class="c1">##            criteriaCorrelations = None</span>
<span class="c1">##</span>
<span class="c1">##        if Debug: print(&#39;/nDONE: Calculating criteria list and correlations/weights&#39;)</span>
<span class="c1">##</span>
<span class="c1">##        criteriaList= OrderedDict(sorted(criteriaList.items(),key=lambda index: int(index[0])))</span>
<span class="c1">##        heatmap[&#39;criteriaList&#39;] = criteriaList</span>
<span class="c1">##</span>
<span class="c1">##        if criteriaCorrelations != None:</span>
<span class="c1">##            correlations= OrderedDict(sorted(correlations.items(),key=lambda index: int(index[0])))</span>
<span class="c1">##            heatmap[&#39;criteriaCorrelations&#39;] = correlations</span>
<span class="c1">##</span>
<span class="c1">##            criteriaWeights= OrderedDict(sorted(criteriaWeights.items(),key=lambda index: int(index[0])))</span>
<span class="c1">##            heatmap[&#39;criteriaWeights&#39;] = criteriaWeights</span>
<span class="c1">##        else:</span>
<span class="c1">##            criteriaWeights= OrderedDict(sorted(criteriaWeights.items(),key=lambda index: int(index[0])))</span>
<span class="c1">##            heatmap[&#39;criteriaWeights&#39;] = criteriaWeights</span>
<span class="c1">##</span>
<span class="c1">##        precision = self._calcPrecision(ndigits)</span>
<span class="c1">##</span>
<span class="c1">##        if Debug: print(&#39;/nSTART: Calculating quantiles&#39;)</span>
<span class="c1">##</span>
<span class="c1">##        quantiles=OrderedDict()</span>
<span class="c1">##        for index, x in enumerate(actionsList):</span>
<span class="c1">##            quantiles[str(index)] = OrderedDict()</span>
<span class="c1">##            quantiles[str(index)][x] = {}</span>
<span class="c1">##            for gKey,gValue in criteriaList.items():</span>
<span class="c1">##                quantilexg = self.computeActionCriterionQuantile(x,gValue)</span>
<span class="c1">##                if Debug:</span>
<span class="c1">##                    print(x,gValue,quantilexg)</span>
<span class="c1">##                if quantilexg != &#39;NA&#39;:</span>
<span class="c1">##                    for i in range(nc):</span>
<span class="c1">##                        if Debug:</span>
<span class="c1">##                            print(i, colorPalette[str(i)][&#39;quantile&#39;])</span>
<span class="c1">##</span>
<span class="c1">##                        if quantilexg &lt;= colorPalette[str(i)][&#39;quantile&#39;]:</span>
<span class="c1">##                            quantiles[str(index)][x][gKey]={&#39;quantile&#39;:self.evaluation[gValue][x].quantize(Decimal(precision),rounding=decimal.ROUND_DOWN),</span>
<span class="c1">##                                             &#39;quantileClass&#39;:colorPalette[str(i)][&#39;quantileClass&#39;]}</span>
<span class="c1">##                            break</span>
<span class="c1">##                else:</span>
<span class="c1">##                    quantiles[str(index)][x][gKey]={&#39;quantile&#39;:&quot;NaN&quot;,</span>
<span class="c1">##                                             &#39;quantileClass&#39;:&quot;NaN&quot;}</span>
<span class="c1">##                if Debug:</span>
<span class="c1">##                    print(x,gValue,quantiles[index][x][gValue])</span>
<span class="c1">##            quantiles[str(index)]={x:OrderedDict(sorted(quantiles[str(index)][x].items(),key=lambda index: int(index[0])))}</span>
<span class="c1">##</span>
<span class="c1">##        if Debug: print(&#39;/nSTART: Calculating quantiles&#39;)</span>
<span class="c1">##</span>
<span class="c1">##</span>
<span class="c1">##        heatmap[&#39;quantiles&#39;] = OrderedDict(sorted(quantiles.items(),key=lambda index: int(index[0])))</span>
<span class="c1">##</span>
<span class="c1">##        if Debug: print(&#39;/nDONE: computeMCSRPerformanceHeatmap&#39;)</span>
<span class="c1">##        return heatmap </span>
<span class="c1">##</span>
<span class="c1">########################################################################################################################</span>
<span class="c1">#######                                                computeMCSRPerformanceHeatmap                            ######</span>
<span class="c1">#######                                                         END                                             ######</span>
<span class="c1">########################################################################################################################</span>

<div class="viewcode-block" id="PerformanceTableau.showHTMLPerformanceHeatmap"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.showHTMLPerformanceHeatmap">[docs]</a>    <span class="k">def</span> <span class="nf">showHTMLPerformanceHeatmap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">actionsList</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>\
                                   <span class="n">fromIndex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>\
                                   <span class="n">toIndex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>\
                                   <span class="n">Transposed</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>\
                                   <span class="n">criteriaList</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>\
                                   <span class="n">colorLevels</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span>\
                                   <span class="n">pageTitle</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>\
                                   <span class="n">ndigits</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>\
                                   <span class="n">SparseModel</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>\
                                   <span class="n">minimalComponentSize</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>\
                                   <span class="n">rankingRule</span><span class="o">=</span><span class="s1">&#39;NetFlows&#39;</span><span class="p">,</span>\
                                   <span class="n">quantiles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>\
                                   <span class="n">strategy</span><span class="o">=</span><span class="s1">&#39;average&#39;</span><span class="p">,</span>\
                                   <span class="n">Correlations</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>\
                                   <span class="n">Threading</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>\
                                   <span class="n">nbrOfCPUs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>\
                                   <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        shows the html heatmap version of the performance tableau in a browser window</span>
<span class="sd">        (see perfTabs.htmlPerformanceHeatMap() method ).</span>

<span class="sd">        **Parameters**:</span>

<span class="sd">              - *actionsList* and *criteriaList*, if provided,  give the possibility to show the decision alternatives, resp. criteria, in a given ordering.</span>
<span class="sd">              - *ndigits* = 0 may be used to show integer evaluation values.</span>
<span class="sd">              - If no *actionsList* is provided, the decision actions are ordered from the best to the worst. This</span>
<span class="sd">                ranking is obtained by default with the Copeland rule applied on a standard *BipolarOutrankingDigraph*.</span>
<span class="sd">                When the *SparseModel* flag is put to *True*, a sparse *PreRankedOutrankingDigraph* construction is used instead.                </span>
<span class="sd">              - The *minimalComponentSize* allows to control the fill rate of the pre-ranked model.</span>
<span class="sd">                If *minimalComponentSize* = *n* (the number of decision actions) both the pre-ranked model will be</span>
<span class="sd">                in fact equivalent to the standard model.</span>
<span class="sd">              - It may interesting in some cases to use *rankingRule* = &#39;NetFlows&#39;.</span>
<span class="sd">              - Quantiles used for the pre-ranked decomposition are put by default to *n*</span>
<span class="sd">                (the number of decision alternatives) for *n* &lt; 50. For larger cardinalities up to 1000, quantiles = *n* /10.</span>
<span class="sd">                For bigger performance tableaux the *quantiles* parameter may be set to a much lower value</span>
<span class="sd">                not exceeding usually 1000.</span>
<span class="sd">              - The pre-ranking may be obtained with three ordering strategies for the</span>
<span class="sd">                quantiles equivalence classes: &#39;average&#39; (default), &#39;optimistic&#39; or  &#39;pessimistic&#39;.</span>
<span class="sd">              - With *Correlations* = *True* and *criteriaList* = *None*, the criteria will be presented from left to right in decreasing</span>
<span class="sd">                order of the correlations between the marginal criterion based ranking and the global ranking used for</span>
<span class="sd">                presenting the decision alternatives.</span>
<span class="sd">              - For large performance Tableaux, *multiprocessing* techniques may be used by setting</span>
<span class="sd">                *Threading* = *True* in order to speed up the computations; especially when *Correlations* = *True*.</span>
<span class="sd">              - By default, the number of cores available, will be detected. It may be efficient in a HPC context</span>
<span class="sd">                to indicate the exact number of singled threaded cores in fact allocated to the job.</span>


<span class="sd">        &gt;&gt;&gt; from randomPerfTabs import RandomPerformanceTableau</span>
<span class="sd">        &gt;&gt;&gt; rt = RandomPerformanceTableau(seed=100)</span>
<span class="sd">        &gt;&gt;&gt; rt.showHTMLPerformanceHeatmap(colorLevels=5,Correlations=True)</span>

<span class="sd">        .. image:: perfTabsExample.png</span>
<span class="sd">           :alt: HTML heat map of the performance tableau</span>
<span class="sd">           :width: 600 px</span>
<span class="sd">           :align: center</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">webbrowser</span>
        <span class="n">fileName</span> <span class="o">=</span> <span class="s1">&#39;/tmp/performanceHeatmap.html&#39;</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">pageTitle</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">pageTitle</span> <span class="o">=</span> <span class="s1">&#39;Heatmap of Performance Tableau </span><span class="se">\&#39;</span><span class="si">%s</span><span class="se">\&#39;</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
            
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_htmlPerformanceHeatmap</span><span class="p">(</span><span class="n">argCriteriaList</span><span class="o">=</span><span class="n">criteriaList</span><span class="p">,</span>
                                             <span class="n">argActionsList</span><span class="o">=</span><span class="n">actionsList</span><span class="p">,</span>
                                             <span class="n">fromIndex</span><span class="o">=</span><span class="n">fromIndex</span><span class="p">,</span>
                                             <span class="n">Transposed</span><span class="o">=</span><span class="n">Transposed</span><span class="p">,</span>
                                             <span class="n">toIndex</span><span class="o">=</span><span class="n">toIndex</span><span class="p">,</span>
                                             <span class="n">SparseModel</span><span class="o">=</span><span class="n">SparseModel</span><span class="p">,</span>
                                             <span class="n">minimalComponentSize</span><span class="o">=</span><span class="n">minimalComponentSize</span><span class="p">,</span>
                                             <span class="n">rankingRule</span><span class="o">=</span><span class="n">rankingRule</span><span class="p">,</span>
                                             <span class="n">quantiles</span><span class="o">=</span><span class="n">quantiles</span><span class="p">,</span>
                                             <span class="n">strategy</span><span class="o">=</span><span class="n">strategy</span><span class="p">,</span>
                                             <span class="n">ndigits</span><span class="o">=</span><span class="n">ndigits</span><span class="p">,</span>
                                             <span class="n">colorLevels</span><span class="o">=</span><span class="n">colorLevels</span><span class="p">,</span>
                                             <span class="n">pageTitle</span><span class="o">=</span><span class="n">pageTitle</span><span class="p">,</span>
                                             <span class="n">Correlations</span><span class="o">=</span><span class="n">Correlations</span><span class="p">,</span>
                                             <span class="n">Threading</span><span class="o">=</span><span class="n">Threading</span><span class="p">,</span>
                                             <span class="n">nbrOfCPUs</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                             <span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;file://&#39;</span><span class="o">+</span><span class="n">fileName</span>
        <span class="n">webbrowser</span><span class="o">.</span><span class="n">open_new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_htmlPerformanceHeatmap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">argCriteriaList</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                               <span class="n">argActionsList</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                               <span class="n">fromIndex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                               <span class="n">toIndex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                <span class="n">Transposed</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                               <span class="n">SparseModel</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                               <span class="n">minimalComponentSize</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                               <span class="n">rankingRule</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                               <span class="n">quantiles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                               <span class="n">strategy</span><span class="o">=</span><span class="s1">&#39;average&#39;</span><span class="p">,</span>
                               <span class="n">ndigits</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                               <span class="n">ContentCentered</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                               <span class="n">colorLevels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                               <span class="n">pageTitle</span><span class="o">=</span><span class="s1">&#39;Performance Heatmap&#39;</span><span class="p">,</span>
                               <span class="n">Correlations</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                               <span class="n">Threading</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                               <span class="n">nbrOfCPUs</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                               <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;       </span>
<span class="sd">        Renders the Brewer RdYlGn 5,7, or 9 levels colored heatmap of the performance table</span>
<span class="sd">        actions x criteria in html format.</span>

<span class="sd">        See the corresponding perfTabs.showHTMLPerformanceHeatMap() method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
                    
        <span class="n">brewerRdYlGn9Colors</span> <span class="o">=</span> <span class="p">[(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.1111&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#D53E4F&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.2222&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#F46D43&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.3333&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#FDAE61&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.4444&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#FEE08B&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.5555&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#FFFFBF&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.6666&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#D9EF8B&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.7777&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#A6D96A&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.8888&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#65BD63&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.000&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#1A9850&quot;&#39;</span><span class="p">)]</span>
        <span class="n">brewerRdYlGn7Colors</span> <span class="o">=</span> <span class="p">[</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.1429&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#F46D43&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.2857&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#FDAE61&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.4286&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#FEE08B&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.5714&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#FFFFBF&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.7143&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#D9EF8B&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.8571&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#A6D96A&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0000&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#65BD63&quot;&#39;</span><span class="p">)</span>
                               <span class="p">]</span>
        <span class="n">brewerRdYlGn5Colors</span> <span class="o">=</span> <span class="p">[</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.2&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#FDAE61&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.4&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#FEE08B&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.6&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#FFFFBF&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.8&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#D9EF8B&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#A6D96A&quot;&#39;</span><span class="p">)</span>
                               <span class="p">]</span>
        <span class="k">if</span> <span class="n">colorLevels</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">colorLevels</span> <span class="o">=</span> <span class="mi">7</span>
        <span class="k">if</span> <span class="n">colorLevels</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>
            <span class="n">colorPalette</span> <span class="o">=</span> <span class="n">brewerRdYlGn7Colors</span>
        <span class="k">elif</span> <span class="n">colorLevels</span> <span class="o">==</span> <span class="mi">9</span><span class="p">:</span>
            <span class="n">colorPalette</span> <span class="o">=</span> <span class="n">brewerRdYlGn9Colors</span>
        <span class="k">elif</span> <span class="n">colorLevels</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">colorPalette</span> <span class="o">=</span> <span class="n">brewerRdYlGn5Colors</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">colorPalette</span> <span class="o">=</span> <span class="n">brewerRdYlGn7Colors</span>
        <span class="n">nc</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">colorPalette</span><span class="p">)</span>
        <span class="n">backGroundColor</span>   <span class="o">=</span> <span class="s1">&#39;&quot;#FFFFFF&quot;&#39;</span>
        <span class="n">naColor</span>           <span class="o">=</span> <span class="s1">&#39;&quot;#FFFFFF&quot;&#39;</span>
        <span class="n">columnHeaderColor</span> <span class="o">=</span> <span class="s1">&#39;&quot;#CCFFFF&quot;&#39;</span>
        <span class="n">rowHeaderColor</span>    <span class="o">=</span> <span class="s1">&#39;&quot;#FFFFFF&quot;&#39;</span>

        <span class="n">html</span> <span class="o">=</span> <span class="s1">&#39;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;title&gt;</span><span class="si">%s</span><span class="s1">&lt;/title&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="s1">&#39;Digraph3 performance heat map&#39;</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;style type=&quot;text/css&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="c1">#html += &#39;table {border-collapse: collapse;}&#39;</span>
        <span class="k">if</span> <span class="n">ContentCentered</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;td {text-align: center;}</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;td.na {color: rgb(192,192,192);}</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/style&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/head&gt;</span><span class="se">\n</span><span class="s1">&lt;body&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;h2&gt;</span><span class="si">%s</span><span class="s1">&lt;/h2&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">pageTitle</span>
        
        <span class="k">if</span> <span class="n">argCriteriaList</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">argCriteriaList</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="n">criteriaList</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">criteriaList</span> <span class="o">=</span> <span class="n">argCriteriaList</span>

<span class="c1">##        if rankingRule == None:</span>
<span class="c1">##            rankingRule = &#39;NetFlows&#39;</span>

        <span class="k">if</span> <span class="n">argActionsList</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span> <span class="c1"># actions ranking is needed</span>
            
            <span class="n">na</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">SparseModel</span><span class="p">:</span>
                <span class="kn">from</span> <span class="nn">sparseOutrankingDigraphs</span> <span class="kn">import</span> <span class="n">PreRankedOutrankingDigraph</span>
                <span class="k">if</span> <span class="n">quantiles</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">na</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span>
                        <span class="n">q</span> <span class="o">=</span> <span class="mi">5</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">q</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">q</span> <span class="o">=</span> <span class="n">quantiles</span>
                <span class="n">g</span> <span class="o">=</span> <span class="n">PreRankedOutrankingDigraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">quantiles</span><span class="o">=</span><span class="n">q</span><span class="p">,</span><span class="n">LowerClosed</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                               <span class="n">minimalComponentSize</span><span class="o">=</span><span class="n">minimalComponentSize</span><span class="p">,</span>
                                           <span class="n">componentRankingRule</span><span class="o">=</span><span class="n">rankingRule</span><span class="p">,</span><span class="n">Threading</span><span class="o">=</span><span class="n">Threading</span><span class="p">,</span>
                                           <span class="n">nbrOfCPUs</span><span class="o">=</span><span class="n">nbrOfCPUs</span><span class="p">)</span>
                <span class="n">actionsList</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">boostedRanking</span>
                <span class="n">rankCorrelation</span> <span class="o">=</span> <span class="kc">None</span>
                
            <span class="k">else</span><span class="p">:</span> <span class="c1"># standard outranking model</span>
                <span class="kn">from</span> <span class="nn">outrankingDigraphs</span> <span class="kn">import</span> <span class="n">BipolarOutrankingDigraph</span>
                <span class="n">g</span> <span class="o">=</span> <span class="n">BipolarOutrankingDigraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">actionsSubset</span><span class="o">=</span><span class="n">argActionsList</span><span class="p">,</span><span class="n">Normalized</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">rankingRule</span> <span class="o">==</span> <span class="s1">&#39;NetFlows&#39;</span><span class="p">:</span>
                    <span class="n">actionsList</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">computeNetFlowsRanking</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">rankingRule</span> <span class="o">==</span> <span class="s1">&#39;Copeland&#39;</span><span class="p">:</span>
                    <span class="n">actionsList</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">computeCopelandRanking</span><span class="p">()</span>
                <span class="k">elif</span> <span class="n">rankingRule</span> <span class="o">==</span> <span class="s1">&#39;Kohler&#39;</span><span class="p">:</span>
                    <span class="n">actionsList</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">computeKohlerRanking</span><span class="p">()</span>
                <span class="k">elif</span> <span class="n">rankingRule</span> <span class="o">==</span> <span class="s1">&#39;RankedPairs&#39;</span><span class="p">:</span>
                    <span class="kn">from</span> <span class="nn">linearOrders</span> <span class="kn">import</span> <span class="n">RankedPairsOrder</span>
                    <span class="n">rp</span> <span class="o">=</span> <span class="n">RankedPairsOrder</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
                    <span class="n">actionsList</span> <span class="o">=</span> <span class="n">rp</span><span class="o">.</span><span class="n">computeRanking</span><span class="p">()</span>
                <span class="k">elif</span> <span class="n">rankingRule</span> <span class="o">==</span> <span class="s1">&#39;ArrowRaynaud&#39;</span><span class="p">:</span>
                    <span class="n">actionsList</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">computeArrowRaynaudRanking</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span> <span class="c1"># default ranking rule</span>
                    <span class="n">actionsList</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">computeNetFlowsRanking</span><span class="p">()</span>
                    <span class="n">rankingRule</span><span class="o">=</span><span class="s1">&#39;NetFlows&#39;</span>
                <span class="n">rankCorrelation</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">computeOrderCorrelation</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">actionsList</span><span class="p">)))</span>

        <span class="k">else</span><span class="p">:</span>  <span class="c1"># actions list given</span>
            <span class="n">actionsList</span> <span class="o">=</span> <span class="n">argActionsList</span>
            <span class="n">rankingRule</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="c1">#Correlations = False</span>
            <span class="n">rankCorrelation</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">SparseModel</span><span class="p">:</span>
                <span class="n">rankCorrelation</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="kn">from</span> <span class="nn">outrankingDigraphs</span> <span class="kn">import</span> <span class="n">BipolarOutrankingDigraph</span>
                <span class="n">g</span> <span class="o">=</span> <span class="n">BipolarOutrankingDigraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">actionsSubset</span><span class="o">=</span><span class="n">argActionsList</span><span class="p">,</span><span class="n">Normalized</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">rankCorrelation</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">computeOrderCorrelation</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">actionsList</span><span class="p">)))</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="n">actionsList</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">,</span><span class="n">rankCorrelation</span><span class="p">)</span>
            
        <span class="c1">##########</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="k">if</span> <span class="n">criteriaList</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Correlations</span><span class="p">:</span>
                <span class="n">criteriaCorrelation</span> <span class="o">=</span>\
                        <span class="n">g</span><span class="o">.</span><span class="n">computeMarginalVersusGlobalRankingCorrelations</span><span class="p">(</span>\
                                <span class="n">actionsList</span><span class="p">,</span><span class="n">ValuedCorrelation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Threading</span><span class="o">=</span><span class="n">Threading</span><span class="p">,</span>
                                <span class="n">nbrCores</span><span class="o">=</span><span class="n">nbrOfCPUs</span><span class="p">)</span>
                <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteriaCorrelation</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">criteriaList</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">criteria</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
                <span class="n">criteriaList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
                <span class="n">criteriaWeightsList</span> <span class="o">=</span> <span class="p">[(</span><span class="o">-</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">],</span><span class="n">g</span><span class="p">)</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">]</span>
                <span class="n">criteriaWeightsList</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">g</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaWeightsList</span><span class="p">]</span>
                <span class="n">criteriaCorrelation</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">criteriaList</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">criteria</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">argActionsList</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">Correlations</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">Correlations</span><span class="p">:</span>
                <span class="n">criteriaCorrelation</span> <span class="o">=</span>\
                        <span class="n">g</span><span class="o">.</span><span class="n">computeMarginalVersusGlobalRankingCorrelations</span><span class="p">(</span>\
                                <span class="n">actionsList</span><span class="p">,</span><span class="n">ValuedCorrelation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Threading</span><span class="o">=</span><span class="n">Threading</span><span class="p">,</span>
                                <span class="n">nbrCores</span><span class="o">=</span><span class="n">nbrOfCPUs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">criteriaCorrelation</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">quantileColor</span><span class="o">=</span><span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="n">quantileColor</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="n">quantilexg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeActionCriterionQuantile</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">g</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">g</span><span class="p">,</span><span class="n">quantilexg</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">quantilexg</span> <span class="o">!=</span> <span class="s1">&#39;NA&#39;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">):</span>
                        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nc</span><span class="p">):</span>
                            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">colorPalette</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>

                            <span class="k">if</span> <span class="n">quantilexg</span> <span class="o">&lt;=</span> <span class="n">colorPalette</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
                                <span class="n">quantileColor</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="n">colorPalette</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="k">break</span>
                    <span class="k">else</span><span class="p">:</span> <span class="c1"># negative weight and reversed quatile coloring</span>
                        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nc</span><span class="p">):</span>
                            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">colorPalette</span><span class="p">[</span><span class="n">nc</span><span class="o">-</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>

                            <span class="k">if</span> <span class="n">quantilexg</span> <span class="o">&lt;=</span> <span class="n">colorPalette</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
                                <span class="n">quantileColor</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="n">colorPalette</span><span class="p">[</span><span class="n">nc</span><span class="o">-</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="k">break</span>        
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">quantileColor</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="n">naColor</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">g</span><span class="p">,</span><span class="n">quantileColor</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">g</span><span class="p">])</span>
        <span class="c1"># legend            </span>
<span class="c1">##        html += &#39;&lt;i&gt;Color legend: &lt;/i&gt;\n&#39;</span>
<span class="c1">##        html += &#39;&lt;table style=&quot;background-color:%s; border-collapse: collapse;&quot; border=&quot;1&quot;&gt;\n&#39; % (backGroundColor) </span>
<span class="c1">##        html += &#39;&lt;tr bgcolor=%s&gt;&lt;th&gt;quantile&lt;/th&gt;&#39; % (columnHeaderColor)</span>
<span class="c1">##        for col in range(nc):</span>
<span class="c1">##            html += &#39;&lt;td bgcolor=%s&gt;%s&lt;/td&gt;&#39; % (colorPalette[col][1],str(colorPalette[col][0]))</span>
<span class="c1">##        html += &#39;&lt;/tr&gt;\n&#39;</span>
<span class="c1">##        html += &#39;&lt;/table&gt;\n&#39;</span>
        <span class="c1"># heatmap with transposed criteria x actions layout</span>
        <span class="k">if</span> <span class="n">Transposed</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;table style=&quot;background-color:</span><span class="si">%s</span><span class="s1">;&quot; border=&quot;1&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">backGroundColor</span><span class="p">)</span> 
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr bgcolor=</span><span class="si">%s</span><span class="s1">&gt;&lt;th&gt;criteria&lt;/th&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">columnHeaderColor</span><span class="p">)</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;th&gt;weight&lt;/th&gt;&#39;</span>
            <span class="k">if</span> <span class="n">Correlations</span><span class="p">:</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;th&gt;tau*&lt;/th&gt;&#39;</span>
            <span class="k">if</span> <span class="n">fromIndex</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">fromIndex</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">if</span> <span class="n">toIndex</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">toIndex</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actionsList</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">fromIndex</span><span class="p">,</span><span class="n">toIndex</span><span class="p">):</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">xName</span> <span class="o">=</span> <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;shortName&#39;</span><span class="p">]</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">xName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;th bgcolor=&quot;#FFF79B&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/th&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">xName</span><span class="p">)</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">gn</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">criteriaList</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">gn</span><span class="p">):</span>
                <span class="n">g</span> <span class="o">=</span> <span class="n">criteriaList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">gName</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;shortName&#39;</span><span class="p">]</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">gName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&lt;th bgcolor=&quot;#FFF79B&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/th&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">gName</span><span class="p">)</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td align=&quot;center&quot;&gt;</span><span class="si">%+.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">criteriaCorrelation</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">cg</span> <span class="o">=</span> <span class="n">criteriaCorrelation</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                    <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td align=&quot;center&quot;&gt;</span><span class="si">%+.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">cg</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">fromIndex</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fromIndex</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">if</span> <span class="n">toIndex</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">toIndex</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actionsList</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">fromIndex</span><span class="p">,</span><span class="n">toIndex</span><span class="p">):</span>
                    <span class="n">x</span> <span class="o">=</span> <span class="n">actionsList</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">xName</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;shortName&#39;</span><span class="p">]</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="n">xName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;-999&quot;</span><span class="p">):</span>
                        <span class="n">formatString</span> <span class="o">=</span> <span class="s1">&#39;&lt;td bgcolor=</span><span class="si">%s</span><span class="s1"> align=&quot;right&quot;&gt;</span><span class="si">%%</span><span class="s1"> .</span><span class="si">%d</span><span class="s1">f&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">quantileColor</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">g</span><span class="p">],</span><span class="n">ndigits</span><span class="p">)</span>
                        <span class="n">html</span> <span class="o">+=</span> <span class="n">formatString</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td bgcolor=</span><span class="si">%s</span><span class="s1"> class=&quot;na&quot;&gt;NA&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="n">naColor</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;&#39;</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/table&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
<span class="c1">##            if criteriaCorrelation != None:</span>
<span class="c1">##                html += &#39;&lt;b&gt;(*) tau:&lt;/b&gt; &lt;i&gt;Ordinal (Kendall) correlation between marginal criterion and global ranking relation&lt;/i&gt;&lt;br/&gt;\n&#39;</span>
<span class="c1">##            if rankCorrelation != None:</span>
<span class="c1">##                html += &#39;&lt;i&gt;Ranking rule&lt;/i&gt;: &lt;b&gt;%s&lt;/b&gt;&lt;br/&gt;\n&#39; % rankingRule</span>
<span class="c1">##                html += &#39;&lt;i&gt;Ordinal (Kendall) correlation between global ranking and global outranking relation:&lt;/i&gt; &lt;b&gt;%+.3f&lt;/b&gt;&lt;br/&gt;\n&#39; % (rankCorrelation[&#39;correlation&#39;])</span>
<span class="c1">##                html += &#39;&lt;/body&gt;&lt;/html&gt;&#39;</span>
<span class="c1">##            return html</span>
        <span class="k">else</span><span class="p">:</span> <span class="c1"># standard actions x criteria layout</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;table style=&quot;background-color:</span><span class="si">%s</span><span class="s1">;&quot; border=&quot;1&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">backGroundColor</span><span class="p">)</span> 
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr bgcolor=</span><span class="si">%s</span><span class="s1">&gt;&lt;th&gt;criteria&lt;/th&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">columnHeaderColor</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">gName</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;shortName&#39;</span><span class="p">]</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">gName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;th&gt;</span><span class="si">%s</span><span class="s1">&lt;/th&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">gName</span><span class="p">)</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&lt;th bgcolor=</span><span class="si">%s</span><span class="s1">&gt;weights&lt;/th&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">columnHeaderColor</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td align=&quot;center&quot;&gt;</span><span class="si">%+.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">if</span> <span class="n">criteriaCorrelation</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&lt;th bgcolor=</span><span class="si">%s</span><span class="s1">&gt;tau&lt;sup&gt;(*)&lt;/sup&gt;&lt;/th&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">columnHeaderColor</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">cg</span> <span class="ow">in</span> <span class="n">criteriaCorrelation</span><span class="p">:</span>
                    <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td align=&quot;center&quot;&gt;</span><span class="si">%+.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">cg</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">fromIndex</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">fromIndex</span><span class="o">=</span><span class="mi">0</span>
            <span class="k">if</span> <span class="n">toIndex</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">toIndex</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actionsList</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">fromIndex</span><span class="p">,</span><span class="n">toIndex</span><span class="p">):</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">xName</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;shortName&#39;</span><span class="p">]</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">xName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&lt;th bgcolor=</span><span class="si">%s</span><span class="s1">&gt;</span><span class="si">%s</span><span class="s1">&lt;/th&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">rowHeaderColor</span><span class="p">,</span><span class="n">xName</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;-999&quot;</span><span class="p">):</span>
                        <span class="n">formatString</span> <span class="o">=</span> <span class="s1">&#39;&lt;td bgcolor=</span><span class="si">%s</span><span class="s1"> align=&quot;right&quot;&gt;</span><span class="si">%%</span><span class="s1"> .</span><span class="si">%d</span><span class="s1">f&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">quantileColor</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">g</span><span class="p">],</span><span class="n">ndigits</span><span class="p">)</span>
                        <span class="n">html</span> <span class="o">+=</span> <span class="n">formatString</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td bgcolor=</span><span class="si">%s</span><span class="s1"> class=&quot;na&quot;&gt;NA&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="n">naColor</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/table&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="c1"># legend</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;i&gt;Color legend: &lt;/i&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;table style=&quot;background-color:</span><span class="si">%s</span><span class="s1">;&quot; border=&quot;1&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">backGroundColor</span><span class="p">)</span> 
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr bgcolor=</span><span class="si">%s</span><span class="s1">&gt;&lt;th&gt;quantile&lt;/th&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">columnHeaderColor</span><span class="p">)</span>
        <span class="c1">#html += &#39;&lt;td bgcolor=%s&gt;&amp;nbsp;[%.2f - %.2f[&amp;nbsp;&lt;/td&gt;&#39; % (colorPalette[0][1],0.0,colorPalette[0][0])</span>
        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">nc</span><span class="p">):</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td bgcolor=</span><span class="si">%s</span><span class="s1">&gt;&amp;nbsp;</span><span class="si">%.2f</span><span class="s1">&amp;#037;&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">colorPalette</span><span class="p">[</span><span class="n">col</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
                                                                   <span class="c1">#colorPalette[col-1][0],</span>
                                                                   <span class="n">colorPalette</span><span class="p">[</span><span class="n">col</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">))</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/table&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="n">criteriaCorrelation</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;b&gt;(*) tau:&lt;/b&gt; &lt;i&gt;Ordinal (Kendall) correlation between marginal criterion and global ranking relation&lt;/i&gt;&lt;br/&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="n">rankCorrelation</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;i&gt;Ranking rule&lt;/i&gt;: &lt;b&gt;</span><span class="si">%s</span><span class="s1">&lt;/b&gt;&lt;br/&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">rankingRule</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;i&gt;Ordinal (Kendall) correlation between global ranking and global outranking relation:&lt;/i&gt; &lt;b&gt;</span><span class="si">%+.3f</span><span class="s1">&lt;/b&gt;&lt;br/&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">rankCorrelation</span><span class="p">[</span><span class="s1">&#39;correlation&#39;</span><span class="p">])</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/body&gt;&lt;/html&gt;&#39;</span>
        <span class="k">return</span> <span class="n">html</span>

<div class="viewcode-block" id="PerformanceTableau.computeWeightPreorder"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.computeWeightPreorder">[docs]</a>    <span class="k">def</span> <span class="nf">computeWeightPreorder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders the weight preorder following from the given</span>
<span class="sd">        criteria weights in a list of increasing equivalence</span>
<span class="sd">        lists of criteria. </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">weightorder</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="c1"># generate weightslist</span>
        <span class="n">weightslist</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
            <span class="n">weightslist</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="nb">abs</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]),</span><span class="n">g</span><span class="p">))</span>
        <span class="n">weightslist</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="c1"># generate weightPreorder</span>
        <span class="n">weightPreorder</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">weightclass</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">weightslist</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">weightslist</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">weightslist</span><span class="p">[</span><span class="n">cur</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
                <span class="n">weightclass</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">weightslist</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">cur</span> <span class="o">=</span> <span class="n">i</span>
                <span class="n">weightPreorder</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">weightclass</span><span class="p">)</span>
                <span class="n">weightclass</span> <span class="o">=</span> <span class="p">[</span><span class="n">weightslist</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]]</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>        
        <span class="n">weightPreorder</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">weightclass</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">weightPreorder</span></div>
   
<div class="viewcode-block" id="PerformanceTableau.showAll"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.showAll">[docs]</a>    <span class="k">def</span> <span class="nf">showAll</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Show fonction for performance tableau</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*-------- show performance tableau -------*&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Name         :&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Actions      :&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Criteria     :&#39;</span><span class="p">)</span>       
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; criterion name        :&#39;</span><span class="p">,</span> <span class="n">g</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;   scale: &#39;</span><span class="p">,</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">],</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;, weight: </span><span class="si">%.3f</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;   thresholds:&#39;</span><span class="p">,</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="nb">print</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Weights preorder :&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">weightPreorder</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Evaluations      :&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">evaluation</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">])</span></div>

<div class="viewcode-block" id="PerformanceTableau.showEvaluationStatistics"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.showEvaluationStatistics">[docs]</a>    <span class="k">def</span> <span class="nf">showEvaluationStatistics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders the variance and standard deviation of</span>
<span class="sd">        the values observed in the performance Tableau.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">math</span>
        <span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
        
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*---- Evaluation statistics ----*&#39;</span><span class="p">)</span>
        <span class="n">average</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                <span class="n">average</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span>
                <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">average</span> <span class="o">=</span> <span class="n">average</span><span class="o">/</span><span class="n">n</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;average      : </span><span class="si">%2.2f</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">average</span><span class="p">))</span>
        <span class="n">variance</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                <span class="n">variance</span> <span class="o">+=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span><span class="o">-</span><span class="n">average</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span><span class="o">-</span><span class="n">average</span><span class="p">)</span>
        <span class="n">variance</span> <span class="o">=</span> <span class="n">variance</span><span class="o">/</span><span class="n">n</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;variance     : </span><span class="si">%2.2f</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">variance</span><span class="p">))</span>
        <span class="n">stddev</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">variance</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;std deviation: </span><span class="si">%2.2f</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">stddev</span><span class="p">))</span>      </div>

<div class="viewcode-block" id="PerformanceTableau.save"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.save">[docs]</a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;tempperftab&#39;</span><span class="p">,</span><span class="n">isDecimal</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">valueDigits</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Persistant storage of Performance Tableaux.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*--- Saving performance tableau in file: &lt;&#39;</span> <span class="o">+</span>\
              <span class="nb">str</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.py&gt; ---*&#39;</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">objectives</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">objectives</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">fileNameExt</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="s1">&#39;.py&#39;</span><span class="p">)</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileNameExt</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;# Saved performance Tableau: </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;from decimal import Decimal</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;from collections import OrderedDict</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="c1"># actions</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;actions = OrderedDict([</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;(</span><span class="se">\&#39;</span><span class="si">%s</span><span class="se">\&#39;</span><span class="s1">, {</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="si">%s</span><span class="se">\&#39;</span><span class="s1">: </span><span class="si">%s</span><span class="s1">,</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">it</span><span class="p">,</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">it</span><span class="p">]))</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;}),</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="c1">##            try:</span>
<span class="c1">##                xnameString = actions[x][&#39;name&#39;]</span>
<span class="c1">##            except:</span>
<span class="c1">##                xnameString = str(x)</span>
<span class="c1">##            try:</span>
<span class="c1">##                xcommentString = actions[x][&#39;comment&#39;]</span>
<span class="c1">##            except:</span>
<span class="c1">##                xcommentString = &#39;&#39;</span>
<span class="c1">##            fo.write(&#39;(\&#39;%s\&#39;, {\&#39;name\&#39;: \&#39;%s\&#39;,\&#39;comment\&#39;:\&#39;%s\&#39;}),\n&#39; %(x,xnameString,xcommentString))</span>
<span class="c1">##            </span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;])</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="c1"># objectives</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;objectives = OrderedDict([</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objectives</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;(</span><span class="se">\&#39;</span><span class="si">%s</span><span class="se">\&#39;</span><span class="s1">, {</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="si">%s</span><span class="se">\&#39;</span><span class="s1">: </span><span class="si">%s</span><span class="s1">,</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">it</span><span class="p">,</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="p">][</span><span class="n">it</span><span class="p">])))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;}),</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="c1">##            fo.write( &#39;(\&#39;%s\&#39;, {\&#39;name\&#39;: \&#39;%s\&#39;,\n&#39; % (obj,objectives[obj][&#39;name&#39;]) )</span>
<span class="c1">##            weightString = &#39;%%.%df&#39; % (valueDigits)</span>
<span class="c1">##            objString = &#39;\&#39;criteria\&#39;: %s, \&#39;weight\&#39;:&#39;+weightString+&#39;}),\n&#39;</span>
<span class="c1">##            fo.write(objString % (objectives[obj][&#39;criteria&#39;],\</span>
<span class="c1">##                                                                objectives[obj][&#39;weight&#39;]))  </span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;])</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>            
        <span class="c1"># criteria</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;criteria = OrderedDict([</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span> 
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;(</span><span class="se">\&#39;</span><span class="si">%s</span><span class="se">\&#39;</span><span class="s1">, {</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="si">%s</span><span class="se">\&#39;</span><span class="s1">: </span><span class="si">%s</span><span class="s1">,</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">it</span><span class="p">,</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">it</span><span class="p">])))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;}),</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="c1">##            fo.write(&#39;(\&#39;&#39; +str(g)+&#39;\&#39;, {\n&#39;)</span>
<span class="c1">##            try:</span>
<span class="c1">##                fo.write(&#39;\&#39;name\&#39;: \&#39;%s\&#39;,\n&#39; % criteria[g][&#39;name&#39;]) </span>
<span class="c1">##            except:</span>
<span class="c1">##                pass</span>
<span class="c1">##            try:</span>
<span class="c1">##                fo.write(&#39;\&#39;objective\&#39;: \&#39;%s\&#39;,\n&#39; % criteria[g][&#39;objective&#39;]) </span>
<span class="c1">##            except:</span>
<span class="c1">##                pass</span>
            
<span class="c1">##            if isDecimal:</span>
<span class="c1">##                #fo.write(&#39;\&#39;weight\&#39;:Decimal(&quot;&#39;+str(criteria[g][&#39;weight&#39;])+&#39;&quot;),\&#39;scale\&#39;: (Decimal(&quot;&#39;+str(criteria[g][&#39;scale&#39;][0])+&#39;&quot;),Decimal(&quot;&#39;+str(criteria[g][&#39;scale&#39;][1])+&#39;&quot;)),\n&#39;)</span>
<span class="c1">##                #fo.write(&#39;\&#39;thresholds\&#39; :&#39; + str(criteria[g][&#39;thresholds&#39;]) + &#39;},\n&#39;)</span>
<span class="c1">##                weightScaleString = &#39;\&#39;weight\&#39;:Decimal(&quot;%%.%df&quot;),\&#39;scale\&#39;: (Decimal(&quot;%%.%df&quot;),Decimal(&quot;%%.%df&quot;)),\n&#39; % (valueDigits,valueDigits,valueDigits)</span>
<span class="c1">##                fo.write(weightScaleString % (criteria[g][&#39;weight&#39;],criteria[g][&#39;scale&#39;][0],criteria[g][&#39;scale&#39;][1]))</span>
<span class="c1">##                try:</span>
<span class="c1">##                    fo.write(&#39;\&#39;thresholds\&#39; : %s }),\n&#39; % ( str(criteria[g][&#39;thresholds&#39;]) ) )</span>
<span class="c1">##                except:</span>
<span class="c1">##                    fo.write(&#39;}),\n&#39;)</span>
<span class="c1">##            else:</span>
<span class="c1">##                fo.write(&#39;\&#39;weight\&#39;:&#39;+str(criteria[g][&#39;weight&#39;])+&#39;,\&#39;scale\&#39;:&#39;+str(criteria[g][&#39;scale&#39;])+&#39;,\n&#39;)</span>
<span class="c1">##                try:</span>
<span class="c1">##                    fo.write(&#39;\&#39;thresholds\&#39; :&#39; + str(criteria[g][&#39;thresholds&#39;]) + &#39;}),\n&#39;)</span>
<span class="c1">##                except:</span>
<span class="c1">##                    fo.write(&#39;}),\n&#39;)</span>
<span class="c1">##            </span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;])</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="c1"># evaluation</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;evaluation = {</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">&#39;</span> <span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">: {</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">Decimal</span><span class="p">:</span>
                    <span class="c1">#fo.write(&#39;\&#39;&#39; + str(x) + &#39;\&#39;:Decimal(&quot;&#39; + str(evaluation[g][x]) + &#39;&quot;),\n&#39;)</span>
                    <span class="n">evaluationString</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\&#39;</span><span class="si">%%</span><span class="s1">s</span><span class="se">\&#39;</span><span class="s1">:Decimal(&quot;</span><span class="si">%%</span><span class="s1">.</span><span class="si">%d</span><span class="s1">f&quot;),</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">valueDigits</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">evaluationString</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">])</span> <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;,</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;},</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span> <span class="s1">&#39;}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="PerformanceTableau.saveXML"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.saveXML">[docs]</a>    <span class="k">def</span> <span class="nf">saveXML</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;temp&#39;</span><span class="p">,</span><span class="n">category</span><span class="o">=</span><span class="s1">&#39;standard&#39;</span><span class="p">,</span><span class="n">subcategory</span><span class="o">=</span><span class="s1">&#39;standard&#39;</span><span class="p">,</span><span class="n">author</span><span class="o">=</span><span class="s1">&#39;digraphs Module (RB)&#39;</span><span class="p">,</span><span class="n">reference</span><span class="o">=</span><span class="s1">&#39;saved from Python&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        save temporary performance tableau self in XML format.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----- saving performance tableau in XML format  -------------*&#39;</span><span class="p">)</span>        
        <span class="n">nameExt</span> <span class="o">=</span> <span class="n">name</span><span class="o">+</span><span class="s1">&#39;.xml&#39;</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">nameExt</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;performanceTableau.xsl&quot;?&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;!DOCTYPE digraph SYSTEM &quot;digraphs.dtd&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;performancetableau &#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;category=&quot;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">category</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&quot; subcategory=&quot;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">subcategory</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;header&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;name&gt;&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">nameExt</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/name&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>       
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;author&gt;&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">author</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/author&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;reference&gt;&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">reference</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/reference&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/header&gt;&#39;</span><span class="p">)</span>
        <span class="n">listActions</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">listActions</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">na</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">listActions</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;actions&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">na</span><span class="p">):</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;action&gt;&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">listActions</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/action&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/actions&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criteria&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criterion&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;critname&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/critname&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;scale&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;min&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39;&lt;/min&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;max&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39;&lt;/max&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/scale&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;thresholds&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;indifference&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39;&lt;/indifference&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;preference&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39;&lt;/preference&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;weakVeto&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39;&lt;/weakVeto&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;veto&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39;&lt;/veto&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/thresholds&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="c1">#fo.write(&#39;&lt;weight&gt;&#39;+str(criteria[g][&#39;weight&#39;])+&#39;&lt;/weight&gt;\n&#39;)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;weight&gt;</span><span class="si">%.3f</span><span class="s1">&lt;/weight&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/criterion&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/criteria&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;evaluations&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;evaluation&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;critname&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/critname&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">na</span><span class="p">):</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;evalactions&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;action&gt;&#39;</span><span class="p">)</span>       
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">listActions</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/action&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                    
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value&gt;&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">listActions</span><span class="p">[</span><span class="n">i</span><span class="p">]]))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/evalactions&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/evaluation&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>        
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/evaluations&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>        
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/performancetableau&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>         
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;File: &#39;</span> <span class="o">+</span> <span class="n">nameExt</span> <span class="o">+</span> <span class="s1">&#39; saved !&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="PerformanceTableau.saveXMLRubis"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.saveXMLRubis">[docs]</a>    <span class="k">def</span> <span class="nf">saveXMLRubis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;temp&#39;</span><span class="p">,</span><span class="n">category</span><span class="o">=</span><span class="s1">&#39;Rubis&#39;</span><span class="p">,</span><span class="n">subcategory</span><span class="o">=</span><span class="s1">&#39;new D2 version&#39;</span><span class="p">,</span><span class="n">author</span><span class="o">=</span><span class="s1">&#39;digraphs Module (RB)&#39;</span><span class="p">,</span><span class="n">reference</span><span class="o">=</span><span class="s1">&#39;saved from Python&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        save temporary performance tableau self in XML Rubis format.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">codecs</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----- saving performance tableau in XML Rubis format  -------------*&#39;</span><span class="p">)</span>        
        <span class="n">nameExt</span> <span class="o">=</span> <span class="n">name</span><span class="o">+</span><span class="s1">&#39;.xml&#39;</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">nameExt</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;rubisPerformanceTableau.xsl&quot;?&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="c1">#fo.write(&#39;&lt;!DOCTYPE rubisPerformaceTableau SYSTEM &quot;http://localhost/rubisServer/Schemas/rubisPerformanceTableau-1.0/rubisPerformanceTableau.dtd&quot;&gt;\n&#39;)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;rubisPerformanceTableau xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:noNamespaceSchemaLocation=&quot;rubisPerformanceTableau.xsd&quot; &#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;category=&quot;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">category</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&quot; subcategory=&quot;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">subcategory</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;Performance Tableau in XML Rubis format.&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;header&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;name&gt;&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">nameExt</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/name&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>       
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;author&gt;&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">author</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/author&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;reference&gt;&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">reference</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/reference&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/header&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">actionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">na</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actionsList</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;actions&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;Potential decision actions.&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">na</span><span class="p">):</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;action id=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;name&gt;&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">actions</span><span class="p">[</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="s1">&#39;name&#39;</span><span class="p">]))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/name&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">actions</span><span class="p">[</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="s1">&#39;comment&#39;</span><span class="p">]))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/action&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/actions&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
        <span class="n">criteriaList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criteria&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;Rubis family of criteria.&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>   
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criterion id=&quot;</span><span class="si">%s</span><span class="s1">&quot; category=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">g</span><span class="p">,</span><span class="s1">&#39;performance&#39;</span><span class="p">)</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;name&gt;</span><span class="si">%s</span><span class="s1">&lt;/name&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">])</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;</span><span class="si">%s</span><span class="s1">&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;comment&#39;</span><span class="p">])</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;scale&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="c1">#fo.write(&#39;&lt;min&gt;&#39;+unicode(criteria[g][&#39;scale&#39;][0])+&#39;&lt;/min&gt;\n&#39;)</span>
            <span class="c1">#fo.write(&#39;&lt;max&gt;&#39;+unicode(criteria[g][&#39;scale&#39;][1])+&#39;&lt;/max&gt;\n&#39;)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;min&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/min&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;max&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/max&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/scale&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;thresholds&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;indifference&gt;(</span><span class="si">%.2f</span><span class="s1">,</span><span class="si">%.3f</span><span class="s1">)&lt;/indifference&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">])</span> <span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;weakPreference&gt;(</span><span class="si">%.2f</span><span class="s1">,</span><span class="si">%.3f</span><span class="s1">)&lt;/weakPreference&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">])</span> <span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;preference&gt;(</span><span class="si">%.2f</span><span class="s1">,</span><span class="si">%.3f</span><span class="s1">)&lt;/preference&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">])</span> <span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;weakVeto&gt;(</span><span class="si">%.2f</span><span class="s1">,</span><span class="si">%.3f</span><span class="s1">)&lt;/weakVeto&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">])</span> <span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;veto&gt;(</span><span class="si">%.2f</span><span class="s1">,</span><span class="si">%.3f</span><span class="s1">)&lt;/veto&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">])</span> <span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/thresholds&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;weight&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/weight&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/criterion&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/criteria&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;evaluations&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;Rubis Performance Table.&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;evaluation&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criterionID&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/criterionID&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">na</span><span class="p">):</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;performance&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;actionID&gt;&#39;</span><span class="p">)</span>       
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/actionID&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                    
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value&gt;&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span> <span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/performance&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/evaluation&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>        
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/evaluations&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>        
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/rubisPerformanceTableau&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>         
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;File: &#39;</span> <span class="o">+</span> <span class="n">nameExt</span> <span class="o">+</span> <span class="s1">&#39; saved !&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="PerformanceTableau.saveXMCDA"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.saveXMCDA">[docs]</a>    <span class="k">def</span> <span class="nf">saveXMCDA</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;temp&#39;</span><span class="p">,</span><span class="n">category</span><span class="o">=</span><span class="s1">&#39;New XMCDA Rubis format&#39;</span><span class="p">,</span><span class="n">user</span><span class="o">=</span><span class="s1">&#39;digraphs Module (RB)&#39;</span><span class="p">,</span><span class="n">version</span><span class="o">=</span><span class="s1">&#39;saved from Python session&#39;</span><span class="p">,</span><span class="n">variant</span><span class="o">=</span><span class="s1">&#39;Rubis&#39;</span><span class="p">,</span><span class="n">valuationType</span><span class="o">=</span><span class="s1">&#39;standard&#39;</span><span class="p">,</span><span class="n">servingD3</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        save performance tableau object self in XMCDA format.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">codecs</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----- saving performance tableau in XMCDA format  -------------*&#39;</span><span class="p">)</span>        
        <span class="n">nameExt</span> <span class="o">=</span> <span class="n">fileName</span><span class="o">+</span><span class="s1">&#39;.xmcda&#39;</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">nameExt</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">servingD3</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;!-- ?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;xmcdaDefault.xsl&quot;? --&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;xmcdaDefault.xsl&quot;?&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="s1">&#39;&lt;xmcda:XMCDA xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.decision-deck.org/2008/UMCDA-ML-1.0 umcda-ml-1.0.xsd&quot; xmlns:xmcda=&quot;http://www.decision-deck.org/2008/UMCDA-ML-1.0&quot; instanceID=&quot;void&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>
       <span class="c1"># write description</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;caseReference&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;title&gt;Performance Tableau in XMCDA format.&lt;/title&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>   
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;id&gt;</span><span class="si">%s</span><span class="s1">&lt;/id&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fileName</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;name&gt;</span><span class="si">%s</span><span class="s1">&lt;/name&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nameExt</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;type&gt;root&lt;/type&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;author&gt;</span><span class="si">%s</span><span class="s1">&lt;/author&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">user</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;version&gt;</span><span class="si">%s</span><span class="s1">&lt;/version&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">version</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/caseReference&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="c1"># write methodData</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;methodData&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;subTitle&gt;Method data&lt;/subTitle&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>   
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;id&gt;</span><span class="si">%s</span><span class="s1">&lt;/id&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Rubis&#39;</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;name&gt;</span><span class="si">%s</span><span class="s1">&lt;/name&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Rubis best choice method&#39;</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;type&gt;methodData&lt;/type&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;version&gt;</span><span class="si">%s</span><span class="s1">&lt;/version&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;parameters&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;parameter&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;name&gt;</span><span class="si">%s</span><span class="s1">&lt;/name&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;variant&#39;</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;label&gt;</span><span class="si">%s</span><span class="s1">&lt;/label&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">variant</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/parameter&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;parameter&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;name&gt;</span><span class="si">%s</span><span class="s1">&lt;/name&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;valuationType&#39;</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;label&gt;</span><span class="si">%s</span><span class="s1">&lt;/label&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">valuationType</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/parameter&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;parameter&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;name&gt;</span><span class="si">%s</span><span class="s1">&lt;/name&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;significanceThreshold&#39;</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;label&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/label&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/parameter&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/parameters&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/methodData&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="c1">#  save alternatives</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">actionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">na</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actionsList</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;alternatives&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;subTitle&gt;Potential decision actions.&lt;/subTitle&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;type&gt;</span><span class="si">%s</span><span class="s1">&lt;/type&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;alternatives&#39;</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                  
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">na</span><span class="p">):</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;alternative id=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;name&gt;&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">actions</span><span class="p">[</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="s1">&#39;name&#39;</span><span class="p">]))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/name&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">actions</span><span class="p">[</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="s1">&#39;comment&#39;</span><span class="p">]))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                  
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;alternativeType&gt;potential&lt;/alternativeType&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>  
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;status&gt;active&lt;/status&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternative&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternatives&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="c1"># save criteria</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
        <span class="n">criteriaList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criteria&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;subTitle&gt;Family of criteria.&lt;/subTitle&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;type&gt;</span><span class="si">%s</span><span class="s1">&lt;/type&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;criteria&#39;</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>       
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>   
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criterion id=&quot;</span><span class="si">%s</span><span class="s1">&quot; &gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">))</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;name&gt;</span><span class="si">%s</span><span class="s1">&lt;/name&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]))</span> <span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;name&gt;</span><span class="si">%s</span><span class="s1">&lt;/name&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">))</span> <span class="p">)</span>
                
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;type&gt;</span><span class="si">%s</span><span class="s1">&lt;/type&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;criterion&#39;</span><span class="p">))</span>            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;</span><span class="si">%s</span><span class="s1">&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;comment&#39;</span><span class="p">]))</span> <span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;</span><span class="si">%s</span><span class="s1">&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;No comment&#39;</span><span class="p">)</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;version&gt;</span><span class="si">%s</span><span class="s1">&lt;/version&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;performance&#39;</span><span class="p">)</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;status&gt;active&lt;/status&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;IntegerWeights&#39;</span><span class="p">]:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;significance&gt;&lt;integer&gt;</span><span class="si">%d</span><span class="s1">&lt;/integer&gt;&lt;/significance&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span> <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;significance&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/significance&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span> <span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;significance&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/significance&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criterionFunction category=&quot;</span><span class="si">%s</span><span class="s1">&quot; subCategory=&quot;</span><span class="si">%s</span><span class="s1">&quot; &gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Rubis&#39;</span><span class="p">,</span><span class="s1">&#39;performance&#39;</span><span class="p">))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;scale&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;quantitative&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;preferenceDirection&gt;</span><span class="si">%s</span><span class="s1">&lt;/preferenceDirection&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">])</span> <span class="p">)</span>
                <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;min&#39;</span><span class="p">:</span>
                    <span class="c1">#pdir = -1</span>
                    <span class="n">pdir</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pdir</span> <span class="o">=</span> <span class="mi">1</span>
 
            <span class="k">except</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;preferenceDirection&gt;</span><span class="si">%s</span><span class="s1">&lt;/preferenceDirection&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;max&#39;</span><span class="p">)</span> <span class="p">)</span>
                <span class="n">pdir</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;min&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/min&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;max&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/max&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="p">)</span>

            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/quantitative&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/scale&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;thresholds&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;threshold&gt;&lt;type&gt;ind&lt;/type&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;function&gt;&lt;linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;slope&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/slope&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pdir</span><span class="o">*</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;intercept&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/intercept&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/linear&gt;&lt;/function&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;function&gt;&lt;constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/constant&gt;&lt;/function&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                       
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/threshold&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;threshold&gt;&lt;type&gt;weakPreference&lt;/type&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;function&gt;&lt;linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;slope&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/slope&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pdir</span><span class="o">*</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;intercept&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/intercept&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/linear&gt;&lt;/function&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;function&gt;&lt;constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/constant&gt;&lt;/function&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                       
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/threshold&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;threshold&gt;&lt;type&gt;pref&lt;/type&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;function&gt;&lt;linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;slope&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/slope&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pdir</span><span class="o">*</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;intercept&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/intercept&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/linear&gt;&lt;/function&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;function&gt;&lt;constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/constant&gt;&lt;/function&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                       
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/threshold&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;threshold&gt;&lt;type&gt;weakVeto&lt;/type&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;function&gt;&lt;linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;slope&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/slope&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pdir</span><span class="o">*</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;intercept&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/intercept&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/linear&gt;&lt;/function&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;function&gt;&lt;constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/constant&gt;&lt;/function&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                       
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/threshold&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;threshold&gt;&lt;type&gt;veto&lt;/type&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;function&gt;&lt;linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;slope&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/slope&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pdir</span><span class="o">*</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;intercept&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/intercept&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/linear&gt;&lt;/function&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;function&gt;&lt;constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/constant&gt;&lt;/function&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                       
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/threshold&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/thresholds&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/criterionFunction&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/criterion&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="c1">#fo.write(&#39;&lt;majorityThreshold&gt;&lt;value&gt;&lt;real&gt;0.5&lt;/real&gt;&lt;/value&gt;&lt;/majorityThreshold&gt;\n&#39;)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/criteria&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="c1"># save performance table</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;performanceTable&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;subTitle&gt;Rubis Performance Table.&lt;/subTitle&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;type&gt;</span><span class="si">%s</span><span class="s1">&lt;/type&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;performanceTable&#39;</span><span class="p">))</span>            
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criterionEvaluations&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criterionID&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/criterionID&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;min&#39;</span><span class="p">:</span>
                    <span class="n">pdir</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pdir</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">pdir</span> <span class="o">=</span> <span class="mi">1</span>

            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">na</span><span class="p">):</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;evaluation&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;alternativeID&gt;&#39;</span><span class="p">)</span>       
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternativeID&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                    
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value&gt;&lt;real&gt;&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pdir</span><span class="o">*</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span> <span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/real&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/evaluation&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/criterionEvaluations&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/performanceTable&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>        
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/xmcda:XMCDA&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>         
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;File: &#39;</span> <span class="o">+</span> <span class="n">nameExt</span> <span class="o">+</span> <span class="s1">&#39; saved !&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="PerformanceTableau.saveXMCDA2"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.saveXMCDA2">[docs]</a>    <span class="k">def</span> <span class="nf">saveXMCDA2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;temp&#39;</span><span class="p">,</span>\
                   <span class="n">category</span><span class="o">=</span><span class="s1">&#39;XMCDA 2.0 Extended format&#39;</span><span class="p">,</span>\
                   <span class="n">user</span><span class="o">=</span><span class="s1">&#39;digraphs Module (RB)&#39;</span><span class="p">,</span>\
                   <span class="n">version</span><span class="o">=</span><span class="s1">&#39;saved from Python session&#39;</span><span class="p">,</span>\
                   <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Performance Tableau in XMCDA-2.0 format.&#39;</span><span class="p">,</span>\
                   <span class="n">variant</span><span class="o">=</span><span class="s1">&#39;Rubis&#39;</span><span class="p">,</span>\
                   <span class="n">valuationType</span><span class="o">=</span><span class="s1">&#39;bipolar&#39;</span><span class="p">,</span>\
                   <span class="n">servingD3</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>\
                   <span class="n">isStringIO</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>\
                   <span class="n">stringNA</span><span class="o">=</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span>\
                   <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;produced by saveXMCDA2()&#39;</span><span class="p">,</span>\
                   <span class="n">hasVeto</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        save performance tableau object self in XMCDA 2.0 format including decision objectives, the case given.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">codecs</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">isStringIO</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----- saving performance tableau in XMCDA 2.0 format  -------------*&#39;</span><span class="p">)</span>
        <span class="n">nameExt</span> <span class="o">=</span> <span class="n">fileName</span><span class="o">+</span><span class="s1">&#39;.xml&#39;</span>
        <span class="k">if</span> <span class="n">isStringIO</span><span class="p">:</span>
            <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;produced by stringIO()&#39;</span>
            <span class="kn">import</span> <span class="nn">io</span>
            <span class="c1">## ms = 100 * len(self.actions) + 500 * len(self.criteria) * 20 * len(self.evaluation)</span>
            <span class="c1">## print &#39;estimated mapped memory size = %d&#39; % (ms)</span>
            <span class="c1">##fo = mmap.mmap(-1,ms)</span>
            <span class="n">fo</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#nameExt = fileName+&#39;.xmcda2&#39;</span>
            <span class="n">fo</span> <span class="o">=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">nameExt</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">servingD3</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;!-- ?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;xmcda2Rubis.xsl&quot;? --&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;xmcda2Rubis.xsl&quot;?&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="s1">&#39;&lt;xmcda:XMCDA xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.decision-deck.org/2009/XMCDA-2.0.0 http://www.decision-deck.org/xmcda/_downloads/XMCDA-2.0.0.xsd&quot; xmlns:xmcda=&quot;http://www.decision-deck.org/2009/XMCDA-2.0.0&quot; instanceID=&quot;void&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>

        <span class="c1"># write description</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;projectReference id=&quot;</span><span class="si">%s</span><span class="s1">&quot; name=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fileName</span><span class="p">,</span><span class="n">nameExt</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;title&gt;</span><span class="si">%s</span><span class="s1">&lt;/title&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">title</span><span class="p">))</span> <span class="p">)</span>  
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;author&gt;</span><span class="si">%s</span><span class="s1">&lt;/author&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">user</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;version&gt;</span><span class="si">%s</span><span class="s1">&lt;/version&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">version</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;</span><span class="si">%s</span><span class="s1">&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">comment</span><span class="p">))</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/projectReference&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="c1"># write methodParameters</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;methodParameters id=&quot;</span><span class="si">%s</span><span class="s1">&quot; name=&quot;</span><span class="si">%s</span><span class="s1">&quot; mcdaConcept=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Rubis&#39;</span><span class="p">,</span><span class="s1">&#39;Rubis best choice method&#39;</span><span class="p">,</span><span class="s1">&#39;methodData&#39;</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;subTitle&gt;Method parameters&lt;/subTitle&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>   
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;version&gt;</span><span class="si">%s</span><span class="s1">&lt;/version&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;parameters&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;parameter name=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;variant&#39;</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;label&gt;</span><span class="si">%s</span><span class="s1">&lt;/label&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">variant</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/parameter&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;parameter name=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;valuationType&#39;</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;label&gt;</span><span class="si">%s</span><span class="s1">&lt;/label&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">valuationType</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/parameter&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/parameters&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/methodParameters&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="c1">#  save alternatives</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">actionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">na</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actionsList</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;alternatives mcdaConcept=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;alternatives&#39;</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;subTitle&gt;Potential decision actions.&lt;/subTitle&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                  
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">na</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">actionName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">actions</span><span class="p">[</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">actionName</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;alternative id=&quot;</span><span class="si">%s</span><span class="s1">&quot; name=&quot;</span><span class="si">%s</span><span class="s1">&quot; mcdaConcept=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">actionName</span><span class="p">,</span><span class="s1">&#39;potentialDecisionAction&#39;</span><span class="p">))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">actions</span><span class="p">[</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="s1">&#39;comment&#39;</span><span class="p">]))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                  
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;type&gt;real&lt;/type&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>  
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;active&gt;true&lt;/active&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternative&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternatives&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="c1"># save objectives</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">objectivesList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span><span class="p">]</span>
            <span class="n">objectivesList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="n">objectives</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;objectives mcdaConcept=&quot;objectives&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;subTitle&gt;Set of decision objectives&lt;/subTitle&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objectivesList</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">objectiveName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">objectiveName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;objective id=&quot;</span><span class="si">%s</span><span class="s1">&quot; name=&quot;</span><span class="si">%s</span><span class="s1">&quot; mcdaConcept=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="p">),</span><span class="n">objectiveName</span><span class="p">,</span><span class="s1">&#39;objective&#39;</span> <span class="p">)</span> <span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;</span><span class="si">%s</span><span class="s1">&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">objective</span><span class="p">[</span><span class="n">obj</span><span class="p">][</span><span class="s1">&#39;comment&#39;</span><span class="p">]))</span> <span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;</span><span class="si">%s</span><span class="s1">&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;No comment&#39;</span><span class="p">)</span> <span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;version&gt;</span><span class="si">%s</span><span class="s1">&lt;/version&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Rubis&#39;</span><span class="p">)</span> <span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;active&gt;true&lt;/active&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;weight&gt;&lt;value&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/value&gt;&lt;/weight&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span> <span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">objCriteria</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;objective&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">obj</span><span class="p">]</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;objectiveCriteria&gt;</span><span class="si">%s</span><span class="s1">&lt;/objectiveCriteria&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">objCriteria</span><span class="p">))</span> <span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/objective&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/objectives&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="c1"># save criteria</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
        <span class="n">criteriaList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criteria mcdaConcept=&quot;criteria&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;subTitle&gt;Family of criteria.&lt;/subTitle&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>       
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">criterionName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">criterionName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>

            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criterion id=&quot;</span><span class="si">%s</span><span class="s1">&quot; name=&quot;</span><span class="si">%s</span><span class="s1">&quot; mcdaConcept=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">),</span><span class="n">criterionName</span><span class="p">,</span><span class="s1">&#39;criterion&#39;</span> <span class="p">)</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;</span><span class="si">%s</span><span class="s1">&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;comment&#39;</span><span class="p">]))</span> <span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;</span><span class="si">%s</span><span class="s1">&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;No comment&#39;</span><span class="p">)</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;version&gt;</span><span class="si">%s</span><span class="s1">&lt;/version&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;performance&#39;</span><span class="p">)</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;active&gt;true&lt;/active&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criterionObjective&gt;</span><span class="si">%s</span><span class="s1">&lt;/criterionObjective&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;objective&#39;</span><span class="p">])</span> <span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;IntegerWeights&#39;</span><span class="p">]:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criterionValue&gt;&lt;value&gt;&lt;integer&gt;</span><span class="si">%d</span><span class="s1">&lt;/integer&gt;&lt;/value&gt;&lt;/criterionValue&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span> <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criterionValue&gt;&lt;value&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/value&gt;&lt;/criterionValue&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span> <span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criterionValue&gt;&lt;value&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/value&gt;&lt;/criterionValue&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;scale&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;quantitative&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;preferenceDirection&gt;</span><span class="si">%s</span><span class="s1">&lt;/preferenceDirection&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">])</span> <span class="p">)</span>
                <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;min&#39;</span><span class="p">:</span>
                    <span class="c1">#pdir = -1</span>
                    <span class="n">pdir</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pdir</span> <span class="o">=</span> <span class="mi">1</span>

            <span class="k">except</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;preferenceDirection&gt;</span><span class="si">%s</span><span class="s1">&lt;/preferenceDirection&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;max&#39;</span><span class="p">)</span> <span class="p">)</span>
                <span class="n">pdir</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;minimum&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/minimum&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;maximum&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/maximum&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="p">)</span>

            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/quantitative&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/scale&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">])</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;thresholds&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;threshold id=&quot;ind&quot; name=&quot;indifference&quot; mcdaConcept=&quot;performanceDiscriminationThreshold&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;slope&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/slope&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pdir</span><span class="o">*</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;intercept&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/intercept&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                       
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/threshold&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;threshold id=&quot;weakPreference&quot; name=&quot;weak Preference&quot; mcdaConcept=&quot;performanceDiscriminationThreshold&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;slope&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/slope&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pdir</span><span class="o">*</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;intercept&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/intercept&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                       
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/threshold&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;threshold id=&quot;pref&quot; name=&quot;preference&quot; mcdaConcept=&quot;performanceDiscriminationThreshold&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;slope&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/slope&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pdir</span><span class="o">*</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;intercept&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/intercept&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                       
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/threshold&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">if</span> <span class="n">hasVeto</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;threshold id=&quot;weakVeto&quot; name=&quot;weak veto&quot; mcdaConcept=&quot;performanceDiscriminationThreshold&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">:</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;slope&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/slope&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pdir</span><span class="o">*</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="p">)</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;intercept&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/intercept&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                       
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/threshold&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;threshold id=&quot;veto&quot; name=&quot;veto&quot; mcdaConcept=&quot;performanceDiscriminationThreshold&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">:</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;slope&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/slope&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pdir</span><span class="o">*</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="p">)</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;intercept&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/intercept&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                       
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/threshold&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">])</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/thresholds&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/criterion&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/criteria&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="c1"># save performance table</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;performanceTable mcdaConcept=&quot;performanceTable&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;subTitle&gt;Rubis Performance Table.&lt;/subTitle&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">actionsList</span><span class="p">)):</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;alternativePerformances&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;alternativeID&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39;&lt;/alternativeID&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;min&#39;</span><span class="p">:</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
                            <span class="n">pdir</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">pdir</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">pdir</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">pdir</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>

                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;performance&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criterionID&gt;&#39;</span><span class="p">)</span>       
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/criterionID&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">==</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-999&#39;</span><span class="p">):</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">pdir</span><span class="o">*</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
                <span class="k">if</span> <span class="n">val</span> <span class="o">==</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;-999&quot;</span><span class="p">):</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value&gt;&lt;NA&gt;&#39;</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">stringNA</span> <span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/NA&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/performance&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value&gt;&lt;real&gt;&#39;</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">val</span> <span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/real&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/performance&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                    
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternativePerformances&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/performanceTable&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>        
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/xmcda:XMCDA&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">isStringIO</span><span class="p">:</span>
            <span class="n">problemText</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">close</span>            
            <span class="k">return</span> <span class="n">problemText</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;File: &#39;</span> <span class="o">+</span> <span class="n">nameExt</span> <span class="o">+</span> <span class="s1">&#39; saved !&#39;</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_saveXMCDA2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;temp&#39;</span><span class="p">,</span>\
                   <span class="n">category</span><span class="o">=</span><span class="s1">&#39;XMCDA 2.0 format&#39;</span><span class="p">,</span>\
                   <span class="n">user</span><span class="o">=</span><span class="s1">&#39;digraphs Module (RB)&#39;</span><span class="p">,</span>\
                   <span class="n">version</span><span class="o">=</span><span class="s1">&#39;saved from Python session&#39;</span><span class="p">,</span>\
                   <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Performance Tableau in XMCDA-2.0 format.&#39;</span><span class="p">,</span>\
                   <span class="n">variant</span><span class="o">=</span><span class="s1">&#39;Rubis&#39;</span><span class="p">,</span>\
                   <span class="n">valuationType</span><span class="o">=</span><span class="s1">&#39;bipolar&#39;</span><span class="p">,</span>\
                   <span class="n">servingD3</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>\
                   <span class="n">isStringIO</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>\
                   <span class="n">stringNA</span><span class="o">=</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span>\
                   <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;produced by saveXMCDA2()&#39;</span><span class="p">,</span>\
                   <span class="n">hasVeto</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        save performance tableau object self in XMCDA 2.0 format.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">codecs</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">isStringIO</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----- saving performance tableau in XMCDA 2.0 format  -------------*&#39;</span><span class="p">)</span>
        <span class="n">nameExt</span> <span class="o">=</span> <span class="n">fileName</span><span class="o">+</span><span class="s1">&#39;.xml&#39;</span>
        <span class="k">if</span> <span class="n">isStringIO</span><span class="p">:</span>
            <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;produced by stringIO()&#39;</span>
            <span class="kn">import</span> <span class="nn">io</span>
            <span class="c1">## ms = 100 * len(self.actions) + 500 * len(self.criteria) * 20 * len(self.evaluation)</span>
            <span class="c1">## print &#39;estimated mapped memory size = %d&#39; % (ms)</span>
            <span class="c1">##fo = mmap.mmap(-1,ms)</span>
            <span class="n">fo</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#nameExt = fileName+&#39;.xmcda2&#39;</span>
            <span class="n">fo</span> <span class="o">=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">nameExt</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">servingD3</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;!-- ?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;xmcda2Rubis.xsl&quot;? --&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;xmcda2Rubis.xsl&quot;?&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="s1">&#39;&lt;xmcda:XMCDA xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.decision-deck.org/2009/XMCDA-2.0.0 http://www.decision-deck.org/xmcda/_downloads/XMCDA-2.0.0.xsd&quot; xmlns:xmcda=&quot;http://www.decision-deck.org/2009/XMCDA-2.0.0&quot; instanceID=&quot;void&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>

        <span class="c1"># write description</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;projectReference id=&quot;</span><span class="si">%s</span><span class="s1">&quot; name=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fileName</span><span class="p">,</span><span class="n">nameExt</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;title&gt;</span><span class="si">%s</span><span class="s1">&lt;/title&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">title</span><span class="p">))</span> <span class="p">)</span>  
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;author&gt;</span><span class="si">%s</span><span class="s1">&lt;/author&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">user</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;version&gt;</span><span class="si">%s</span><span class="s1">&lt;/version&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">version</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;</span><span class="si">%s</span><span class="s1">&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">comment</span><span class="p">))</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/projectReference&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="c1"># write methodParameters</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;methodParameters id=&quot;</span><span class="si">%s</span><span class="s1">&quot; name=&quot;</span><span class="si">%s</span><span class="s1">&quot; mcdaConcept=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Rubis&#39;</span><span class="p">,</span><span class="s1">&#39;Rubis best choice method&#39;</span><span class="p">,</span><span class="s1">&#39;methodData&#39;</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;subTitle&gt;Method parameters&lt;/subTitle&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>   
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;version&gt;</span><span class="si">%s</span><span class="s1">&lt;/version&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;parameters&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;parameter name=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;variant&#39;</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;label&gt;</span><span class="si">%s</span><span class="s1">&lt;/label&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">variant</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/parameter&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;parameter name=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;valuationType&#39;</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;label&gt;</span><span class="si">%s</span><span class="s1">&lt;/label&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">valuationType</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/parameter&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/parameters&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/methodParameters&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="c1">#  save alternatives</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">actionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">na</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actionsList</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;alternatives mcdaConcept=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;alternatives&#39;</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;subTitle&gt;Potential decision actions.&lt;/subTitle&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                  
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">na</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">actionName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">actions</span><span class="p">[</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">actionName</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;alternative id=&quot;</span><span class="si">%s</span><span class="s1">&quot; name=&quot;</span><span class="si">%s</span><span class="s1">&quot; mcdaConcept=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">actionName</span><span class="p">,</span><span class="s1">&#39;potentialDecisionAction&#39;</span><span class="p">))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">actions</span><span class="p">[</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="s1">&#39;comment&#39;</span><span class="p">]))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                  
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;type&gt;real&lt;/type&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>  
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;active&gt;true&lt;/active&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternative&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternatives&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="c1"># save criteria</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
        <span class="n">criteriaList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criteria mcdaConcept=&quot;criteria&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;subTitle&gt;Family of criteria.&lt;/subTitle&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>       
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">criterionName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">criterionName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>

            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criterion id=&quot;</span><span class="si">%s</span><span class="s1">&quot; name=&quot;</span><span class="si">%s</span><span class="s1">&quot; mcdaConcept=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">),</span><span class="n">criterionName</span><span class="p">,</span><span class="s1">&#39;criterion&#39;</span> <span class="p">)</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;</span><span class="si">%s</span><span class="s1">&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;comment&#39;</span><span class="p">]))</span> <span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;</span><span class="si">%s</span><span class="s1">&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;No comment&#39;</span><span class="p">)</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;version&gt;</span><span class="si">%s</span><span class="s1">&lt;/version&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;performance&#39;</span><span class="p">)</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;active&gt;true&lt;/active&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;IntegerWeights&#39;</span><span class="p">]:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criterionValue&gt;&lt;value&gt;&lt;integer&gt;</span><span class="si">%d</span><span class="s1">&lt;/integer&gt;&lt;/value&gt;&lt;/criterionValue&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span> <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criterionValue&gt;&lt;value&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/value&gt;&lt;/criterionValue&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span> <span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criterionValue&gt;&lt;value&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/value&gt;&lt;/criterionValue&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;scale&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;quantitative&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;preferenceDirection&gt;</span><span class="si">%s</span><span class="s1">&lt;/preferenceDirection&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">])</span> <span class="p">)</span>
                <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;min&#39;</span><span class="p">:</span>
                    <span class="c1">#pdir = -1</span>
                    <span class="n">pdir</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pdir</span> <span class="o">=</span> <span class="mi">1</span>

            <span class="k">except</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;preferenceDirection&gt;</span><span class="si">%s</span><span class="s1">&lt;/preferenceDirection&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;max&#39;</span><span class="p">)</span> <span class="p">)</span>
                <span class="n">pdir</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;minimum&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/minimum&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;maximum&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/maximum&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="p">)</span>

            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/quantitative&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/scale&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">])</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;thresholds&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;threshold id=&quot;ind&quot; name=&quot;indifference&quot; mcdaConcept=&quot;performanceDiscriminationThreshold&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;slope&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/slope&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pdir</span><span class="o">*</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;intercept&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/intercept&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                       
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/threshold&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;threshold id=&quot;weakPreference&quot; name=&quot;weak Preference&quot; mcdaConcept=&quot;performanceDiscriminationThreshold&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;slope&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/slope&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pdir</span><span class="o">*</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;intercept&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/intercept&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                       
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/threshold&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;threshold id=&quot;pref&quot; name=&quot;preference&quot; mcdaConcept=&quot;performanceDiscriminationThreshold&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;slope&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/slope&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pdir</span><span class="o">*</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;intercept&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/intercept&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                       
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/threshold&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">if</span> <span class="n">hasVeto</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;threshold id=&quot;weakVeto&quot; name=&quot;weak veto&quot; mcdaConcept=&quot;performanceDiscriminationThreshold&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">:</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;slope&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/slope&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pdir</span><span class="o">*</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="p">)</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;intercept&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/intercept&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                       
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/threshold&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;threshold id=&quot;veto&quot; name=&quot;veto&quot; mcdaConcept=&quot;performanceDiscriminationThreshold&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">:</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;slope&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/slope&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pdir</span><span class="o">*</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="p">)</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;intercept&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/intercept&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                       
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/threshold&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">])</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/thresholds&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/criterion&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/criteria&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="c1"># save performance table</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;performanceTable mcdaConcept=&quot;performanceTable&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;subTitle&gt;Rubis Performance Table.&lt;/subTitle&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">actionsList</span><span class="p">)):</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;alternativePerformances&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;alternativeID&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39;&lt;/alternativeID&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;min&#39;</span><span class="p">:</span>
                        <span class="n">pdir</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">pdir</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">pdir</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>

                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;performance&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criterionID&gt;&#39;</span><span class="p">)</span>       
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/criterionID&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">val</span> <span class="o">=</span> <span class="n">pdir</span><span class="o">*</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
                <span class="k">if</span> <span class="n">val</span> <span class="o">==</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;-999&quot;</span><span class="p">):</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value&gt;&lt;NA&gt;&#39;</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">stringNA</span> <span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/NA&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/performance&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value&gt;&lt;real&gt;&#39;</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">val</span> <span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/real&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/performance&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                    
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternativePerformances&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/performanceTable&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>        
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/xmcda:XMCDA&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">isStringIO</span><span class="p">:</span>
            <span class="n">problemText</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">close</span>            
            <span class="k">return</span> <span class="n">problemText</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;File: &#39;</span> <span class="o">+</span> <span class="n">nameExt</span> <span class="o">+</span> <span class="s1">&#39; saved !&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="PerformanceTableau.saveXMCDA2String"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.saveXMCDA2String">[docs]</a>    <span class="k">def</span> <span class="nf">saveXMCDA2String</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;temp&#39;</span><span class="p">,</span><span class="n">category</span><span class="o">=</span><span class="s1">&#39;XMCDA 2.0 format&#39;</span><span class="p">,</span>\
                         <span class="n">user</span><span class="o">=</span><span class="s1">&#39;digraphs Module (RB)&#39;</span><span class="p">,</span><span class="n">version</span><span class="o">=</span><span class="s1">&#39;saved from Python session&#39;</span><span class="p">,</span>\
                         <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Performance Tableau in XMCDA-2.0 format.&#39;</span><span class="p">,</span><span class="n">variant</span><span class="o">=</span><span class="s1">&#39;Rubis&#39;</span><span class="p">,</span>\
                         <span class="n">valuationType</span><span class="o">=</span><span class="s1">&#39;bipolar&#39;</span><span class="p">,</span><span class="n">servingD3</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">comment</span><span class="o">=</span><span class="s1">&#39;produced by stringIO()&#39;</span><span class="p">,</span>\
                         <span class="n">stringNA</span><span class="o">=</span><span class="s1">&#39;NA&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        save performance tableau object self in XMCDA 2.0 format.</span>
<span class="sd">        !!! obsolete: replaced by the isStringIO in the saveXMCDA2 method !!!</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">codecs</span>
        <span class="n">nameExt</span> <span class="o">=</span> <span class="n">fileName</span><span class="o">+</span><span class="s1">&#39;.xml&#39;</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="n">servingD3</span><span class="p">:</span>
            <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;!-- ?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;xmcda2Rubis.xsl&quot;? --&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;xmcda2Rubis.xsl&quot;?&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;&lt;xmcda:XMCDA xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.decision-deck.org/2009/XMCDA-2.0.0 http://www.decision-deck.org/xmcda/_downloads/XMCDA-2.0.0.xsd&quot; xmlns:xmcda=&quot;http://www.decision-deck.org/2009/XMCDA-2.0.0&quot; instanceID=&quot;void&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="c1"># write description</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;projectReference id=&quot;</span><span class="si">%s</span><span class="s1">&quot; name=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fileName</span><span class="p">,</span><span class="n">nameExt</span><span class="p">)</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;title&gt;</span><span class="si">%s</span><span class="s1">&lt;/title&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">title</span><span class="p">))</span>  
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;author&gt;</span><span class="si">%s</span><span class="s1">&lt;/author&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">user</span><span class="p">))</span> 
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;version&gt;</span><span class="si">%s</span><span class="s1">&lt;/version&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">version</span><span class="p">))</span> 
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;comment&gt;</span><span class="si">%s</span><span class="s1">&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">comment</span><span class="p">))</span> 
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/projectReference&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="c1"># write methodParameters</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;methodParameters id=&quot;</span><span class="si">%s</span><span class="s1">&quot; name=&quot;</span><span class="si">%s</span><span class="s1">&quot; mcdaConcept=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Rubis&#39;</span><span class="p">,</span><span class="s1">&#39;Rubis best choice method&#39;</span><span class="p">,</span><span class="s1">&#39;methodData&#39;</span><span class="p">)</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;subTitle&gt;Method parameters&lt;/subTitle&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>   
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;version&gt;</span><span class="si">%s</span><span class="s1">&lt;/version&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;parameters&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;parameter name=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;variant&#39;</span><span class="p">)</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;label&gt;</span><span class="si">%s</span><span class="s1">&lt;/label&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">variant</span><span class="p">)</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/parameter&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;parameter name=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;valuationType&#39;</span><span class="p">)</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;label&gt;</span><span class="si">%s</span><span class="s1">&lt;/label&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">valuationType</span><span class="p">)</span> 
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/parameter&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/parameters&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/methodParameters&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="c1">#  save alternatives</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">actionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">na</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actionsList</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;alternatives mcdaConcept=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;alternatives&#39;</span><span class="p">)</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;subTitle&gt;Potential decision actions.&lt;/subTitle&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>                  
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">na</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">actionName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">actions</span><span class="p">[</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">actionName</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;alternative id=&quot;</span><span class="si">%s</span><span class="s1">&quot; name=&quot;</span><span class="si">%s</span><span class="s1">&quot; mcdaConcept=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">actionName</span><span class="p">,</span><span class="s1">&#39;potentialDecisionAction&#39;</span><span class="p">)</span>
            <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;comment&gt;&#39;</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">actions</span><span class="p">[</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="s1">&#39;comment&#39;</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>                  
            <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;type&gt;real&lt;/type&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>  
            <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;active&gt;true&lt;/active&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/alternative&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/alternatives&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="c1"># save objectives</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">objectivesList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span><span class="p">]</span>
            <span class="n">objectivesList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="n">objectives</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span>
            <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;objectives mcdaConcept=&quot;objectives&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;subTitle&gt;Set of decision objectives&lt;/subTitle&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objectivesList</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">objectiveName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">objectiveName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
                <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;objective id=&quot;</span><span class="si">%s</span><span class="s1">&quot; name=&quot;</span><span class="si">%s</span><span class="s1">&quot; mcdaConcept=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="p">),</span><span class="n">objectiveName</span><span class="p">,</span><span class="s1">&#39;objective&#39;</span> <span class="p">)</span> 
                <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;comment&gt;</span><span class="si">%s</span><span class="s1">&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">objective</span><span class="p">[</span><span class="n">obj</span><span class="p">][</span><span class="s1">&#39;comment&#39;</span><span class="p">]))</span> 
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;comment&gt;</span><span class="si">%s</span><span class="s1">&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;No comment&#39;</span><span class="p">)</span>
                <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;version&gt;</span><span class="si">%s</span><span class="s1">&lt;/version&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Rubis&#39;</span><span class="p">)</span>
                <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;active&gt;true&lt;/active&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;weight&gt;&lt;value&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/value&gt;&lt;/weight&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">objCriteria</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;objective&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">obj</span><span class="p">]</span>
                    <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;objectiveCriteria&gt;</span><span class="si">%s</span><span class="s1">&lt;/objectiveCriteria&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">objCriteria</span><span class="p">))</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/objective&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/objectives&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="c1"># save criteria</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
        <span class="n">criteriaList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;criteria mcdaConcept=&quot;criteria&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;subTitle&gt;Family of criteria.&lt;/subTitle&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>       
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">criterionName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">criterionName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>

            <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;criterion id=&quot;</span><span class="si">%s</span><span class="s1">&quot; name=&quot;</span><span class="si">%s</span><span class="s1">&quot; mcdaConcept=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">),</span><span class="n">criterionName</span><span class="p">,</span><span class="s1">&#39;criterion&#39;</span> <span class="p">)</span>
            <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>                
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;comment&gt;</span><span class="si">%s</span><span class="s1">&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;comment&#39;</span><span class="p">]))</span> 
            <span class="k">except</span><span class="p">:</span>
                <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;comment&gt;</span><span class="si">%s</span><span class="s1">&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;No comment&#39;</span><span class="p">)</span>
            <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;version&gt;</span><span class="si">%s</span><span class="s1">&lt;/version&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;performance&#39;</span><span class="p">)</span>
            <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;active&gt;true&lt;/active&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;criterionObjective&gt;</span><span class="si">%s</span><span class="s1">&lt;/criterionObjective&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;objective&#39;</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;IntegerWeights&#39;</span><span class="p">]:</span>
                    <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;criterionValue&gt;&lt;value&gt;&lt;integer&gt;</span><span class="si">%d</span><span class="s1">&lt;/integer&gt;&lt;/value&gt;&lt;/criterionValue&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;criterionValue&gt;&lt;value&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/value&gt;&lt;/criterionValue&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;criterionValue&gt;&lt;value&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/value&gt;&lt;/criterionValue&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
            <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;scale&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;quantitative&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;preferenceDirection&gt;</span><span class="si">%s</span><span class="s1">&lt;/preferenceDirection&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;min&#39;</span><span class="p">:</span>
                    <span class="c1">#pdir = -1</span>
                    <span class="n">pdir</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pdir</span> <span class="o">=</span> <span class="mi">1</span>

            <span class="k">except</span><span class="p">:</span>
                <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;preferenceDirection&gt;</span><span class="si">%s</span><span class="s1">&lt;/preferenceDirection&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;max&#39;</span><span class="p">)</span>
                <span class="n">pdir</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;minimum&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/minimum&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;maximum&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/maximum&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>

            <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/quantitative&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/scale&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;thresholds&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;threshold id=&quot;ind&quot; name=&quot;indifference&quot; mcdaConcept=&quot;performanceDiscriminationThreshold&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">:</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;slope&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/slope&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pdir</span><span class="o">*</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;intercept&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/intercept&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>                       
                    <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/threshold&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;threshold id=&quot;weakPreference&quot; name=&quot;weak Preference&quot; mcdaConcept=&quot;performanceDiscriminationThreshold&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">:</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;slope&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/slope&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pdir</span><span class="o">*</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;intercept&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/intercept&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>                       
                    <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/threshold&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;threshold id=&quot;pref&quot; name=&quot;preference&quot; mcdaConcept=&quot;performanceDiscriminationThreshold&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">:</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;slope&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/slope&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pdir</span><span class="o">*</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;intercept&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/intercept&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>                       
                    <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/threshold&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;threshold id=&quot;weakVeto&quot; name=&quot;weak veto&quot; mcdaConcept=&quot;performanceDiscriminationThreshold&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">:</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;slope&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/slope&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pdir</span><span class="o">*</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;intercept&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/intercept&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>                       
                    <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/threshold&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;threshold id=&quot;veto&quot; name=&quot;veto&quot; mcdaConcept=&quot;performanceDiscriminationThreshold&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">:</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;slope&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/slope&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pdir</span><span class="o">*</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;intercept&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/intercept&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>                       
                    <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/threshold&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/thresholds&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/criterion&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/criteria&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="c1"># save performance table</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;performanceTable mcdaConcept=&quot;performanceTable&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;subTitle&gt;Rubis Performance Table.&lt;/subTitle&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">actionsList</span><span class="p">)):</span>
            <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;alternativePerformances&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;alternativeID&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39;&lt;/alternativeID&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;performance&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;criterionID&gt;&#39;</span>       
                <span class="n">fo</span> <span class="o">+=</span> <span class="n">g</span>
                <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/criterionID&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="n">val</span> <span class="o">=</span> <span class="n">pdir</span><span class="o">*</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
                <span class="k">if</span> <span class="n">val</span> <span class="o">==</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;-999&quot;</span><span class="p">):</span>
                    <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;value&gt;&lt;NA&gt;&#39;</span>
                    <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">stringNA</span>
                    <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/NA&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="k">else</span><span class="p">:</span> 
                    <span class="k">try</span><span class="p">:</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;min&#39;</span><span class="p">:</span>
                            <span class="n">pdir</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">pdir</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="n">pdir</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
                    <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;value&gt;&lt;real&gt;&#39;</span>
                    <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pdir</span><span class="o">*</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span>
                    <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/real&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/performance&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/alternativePerformances&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/performanceTable&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>        
        <span class="n">fo</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/xmcda:XMCDA&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="n">fo</span></div>
     


    <span class="c1">## def showStatistics(self,withOutput=False,Comments=True):</span>
    <span class="c1">##     &quot;&quot;&quot;</span>
    <span class="c1">##     show version of the computeStatistics method for PerformanceTableau instances</span>
    <span class="c1">##     &quot;&quot;&quot;</span>
    <span class="c1">##     self.computeStatistics(withOutput=withOutput,Comments=Comments)</span>

<div class="viewcode-block" id="PerformanceTableau.computeNormalizedDiffEvaluations"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.computeNormalizedDiffEvaluations">[docs]</a>    <span class="k">def</span> <span class="nf">computeNormalizedDiffEvaluations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">lowValue</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span><span class="n">highValue</span><span class="o">=</span><span class="mf">100.0</span><span class="p">,</span><span class="n">withOutput</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders and csv stores (withOutput=True) the</span>
<span class="sd">        list of normalized evaluation differences observed on the family of criteria</span>
<span class="sd">        Is only adequate if all criteria have the same</span>
<span class="sd">        evaluation scale. Therefore the performance tableau is normalized to 0.0-100.0 scales.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">normalizeEvaluations</span><span class="p">(</span><span class="n">lowValue</span><span class="o">=</span><span class="n">lowValue</span><span class="p">,</span><span class="n">highValue</span><span class="o">=</span><span class="n">highValue</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">showPerformanceTableau</span><span class="p">()</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">diffEvaluations</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">withOutput</span><span class="p">:</span>
            <span class="n">fileoutName</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;_diff.csv&#39;</span>
            <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileoutName</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;# Evaluation differences statistics </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&quot;diffperf&quot;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                        <span class="n">diffxy</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">y</span><span class="p">]</span>
                        <span class="n">diffEvaluations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">diffxy</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;diffxy = evaluation[g][x] = evaluation[g][y]&#39;</span><span class="p">,</span> <span class="n">diffxy</span><span class="p">,</span> <span class="s1">&#39; = &#39;</span><span class="p">,</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">],</span> <span class="s1">&#39; - &#39;</span><span class="p">,</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">y</span><span class="p">])</span>
                        <span class="k">if</span> <span class="n">withOutput</span><span class="p">:</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.2f</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">diffxy</span><span class="p">)</span>                
        <span class="k">if</span> <span class="n">withOutput</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">diffEvaluations</span> <span class="o">=</span> <span class="n">diffEvaluations</span>

        <span class="k">return</span> <span class="n">diffEvaluations</span></div>

    
<div class="viewcode-block" id="PerformanceTableau.showStatistics"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.showStatistics">[docs]</a>    <span class="k">def</span> <span class="nf">showStatistics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        show statistics concerning the evaluation distributions</span>
<span class="sd">        on each criteria.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">math</span>
        <span class="n">criteriaKeys</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
        <span class="n">criteriaKeys</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">nc</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">)</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*-------- Performance tableau summary statistics -------*&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Instance name      :&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;#Actions           :&#39;</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;#Criteria          :&#39;</span><span class="p">,</span> <span class="n">nc</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*Statistics per Criterion*&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaKeys</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Criterion name       :&#39;</span><span class="p">,</span> <span class="n">g</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Criterion weight     :&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
            <span class="n">averageEvaluation</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="n">varianceEvaluation</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
            <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
            <span class="n">minEvaluation</span> <span class="o">=</span> <span class="n">Max</span>
            <span class="n">maxEvaluation</span> <span class="o">=</span> <span class="n">Min</span>
            <span class="n">evaluationList</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-999&#39;</span><span class="p">):</span>
                    <span class="n">evaluationList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                    <span class="n">averageEvaluation</span> <span class="o">+=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span>
                    <span class="n">varianceEvaluation</span> <span class="o">+=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span><span class="o">**</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">minEvaluation</span><span class="p">:</span>
                        <span class="n">minEvaluation</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">maxEvaluation</span><span class="p">:</span>
                        <span class="n">maxEvaluation</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span>
            <span class="n">evaluationList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="n">na</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">evaluationList</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">evaluationList</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  criterion scale      : </span><span class="si">%.2f</span><span class="s1"> - </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">Min</span><span class="p">,</span> <span class="n">Max</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  criterion scale      : </span><span class="si">%.2f</span><span class="s1"> - </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="o">-</span><span class="n">Max</span><span class="p">,</span> <span class="n">Min</span><span class="p">))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  criterion scale    : </span><span class="si">%.2f</span><span class="s1"> - </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">Min</span><span class="p">,</span> <span class="n">Max</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  # missing evaluations : </span><span class="si">%d</span><span class="s1">&#39;</span>   <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="n">na</span><span class="p">))</span>
            <span class="c1"># !! index on evaluation List goes from 0 to na -1 !!</span>
            <span class="k">if</span> <span class="n">na</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
                <span class="n">rankQ1</span> <span class="o">=</span> <span class="n">na</span> <span class="o">/</span> <span class="mf">4.0</span>
                <span class="n">lowRankQ1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">rankQ1</span><span class="p">))</span>
                <span class="n">proportQ1</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">rankQ1</span> <span class="o">-</span> <span class="n">lowRankQ1</span><span class="p">))</span>
                <span class="n">quantileQ1</span> <span class="o">=</span> <span class="n">evaluationList</span><span class="p">[</span><span class="n">lowRankQ1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">proportQ1</span> <span class="o">*</span> <span class="p">(</span><span class="n">evaluationList</span><span class="p">[</span><span class="n">lowRankQ1</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">evaluationList</span><span class="p">[</span><span class="n">lowRankQ1</span><span class="p">])</span> <span class="p">)</span>
                <span class="c1">#print rankQ1, lowRankQ1, proportQ1</span>

                <span class="n">rankQ2</span> <span class="o">=</span> <span class="n">na</span> <span class="o">/</span> <span class="mf">2.0</span>
                <span class="n">lowRankQ2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">rankQ2</span><span class="p">))</span>
                <span class="n">proportQ2</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">rankQ2</span> <span class="o">-</span> <span class="n">lowRankQ2</span><span class="p">))</span>
                
                <span class="n">quantileQ2</span> <span class="o">=</span> <span class="n">evaluationList</span><span class="p">[</span><span class="n">lowRankQ2</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">proportQ2</span> <span class="o">*</span> <span class="p">(</span> <span class="n">evaluationList</span><span class="p">[</span><span class="n">lowRankQ2</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluationList</span><span class="p">[</span><span class="n">lowRankQ2</span><span class="p">])</span> <span class="p">)</span>

                <span class="n">rankQ3</span> <span class="o">=</span> <span class="p">(</span><span class="n">na</span> <span class="o">*</span> <span class="mf">3.0</span><span class="p">)</span> <span class="o">/</span> <span class="mf">4.0</span>
                <span class="n">lowRankQ3</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">rankQ3</span><span class="p">))</span>
                <span class="n">proportQ3</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">rankQ3</span> <span class="o">-</span> <span class="n">lowRankQ3</span><span class="p">))</span>
                              
                <span class="n">quantileQ3</span> <span class="o">=</span> <span class="n">evaluationList</span><span class="p">[</span><span class="n">lowRankQ3</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span> <span class="n">proportQ3</span> <span class="o">*</span> <span class="p">(</span><span class="n">evaluationList</span><span class="p">[</span><span class="n">lowRankQ3</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">evaluationList</span><span class="p">[</span><span class="n">lowRankQ3</span><span class="p">])</span> <span class="p">)</span>
                    
                <span class="n">averageEvaluation</span> <span class="o">/=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">na</span><span class="p">))</span>
                <span class="n">varianceEvaluation</span> <span class="o">=</span> <span class="n">varianceEvaluation</span><span class="o">/</span><span class="n">na</span> <span class="o">-</span> <span class="n">averageEvaluation</span><span class="o">**</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">)</span>
                <span class="n">stdDevEvaluation</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">varianceEvaluation</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  mean evaluation       : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">averageEvaluation</span><span class="p">))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  standard deviation    : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">stdDevEvaluation</span><span class="p">))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  maximal evaluation    : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">maxEvaluation</span><span class="p">))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  quantile Q3 (x_75)    : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">quantileQ3</span><span class="p">))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  median evaluation     : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">quantileQ2</span><span class="p">))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  quantile Q1 (x_25)    : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">quantileQ1</span><span class="p">))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  minimal evaluation    : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">minEvaluation</span><span class="p">))</span>
                <span class="n">averageAbsDiffEvaluation</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                <span class="n">varianceDiffEvaluation</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                <span class="n">nd</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-999&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-999&#39;</span><span class="p">):</span>
                            <span class="n">diffxy</span> <span class="o">=</span> <span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">y</span><span class="p">])</span>
                            <span class="n">averageAbsDiffEvaluation</span> <span class="o">+=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">diffxy</span><span class="p">)</span>
                            <span class="n">varianceDiffEvaluation</span> <span class="o">+=</span> <span class="n">diffxy</span><span class="o">**</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">)</span>
                            <span class="n">nd</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="c1">#            print &#39;  Sum of evaluation differences = &#39;, averageAbsDiffEvaluation</span>
                <span class="n">averageAbsDiffEvaluation</span> <span class="o">/=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">nd</span><span class="p">))</span>
                <span class="c1">## averageDiffEvaluation == 0 per construction  </span>
                <span class="n">varianceDiffEvaluation</span> <span class="o">=</span> <span class="n">varianceDiffEvaluation</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">nd</span><span class="p">))</span>
                <span class="n">stdDevDiffEvaluation</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">varianceDiffEvaluation</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  mean absolute difference      : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">averageAbsDiffEvaluation</span><span class="p">))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  standard difference deviation : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">stdDevDiffEvaluation</span><span class="p">))</span></div>

<div class="viewcode-block" id="PerformanceTableau.normalizeEvaluations"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.normalizeEvaluations">[docs]</a>    <span class="k">def</span> <span class="nf">normalizeEvaluations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">lowValue</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span><span class="n">highValue</span><span class="o">=</span><span class="mf">100.0</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        recode the evaluations between lowValue and highValue on all criteria</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">##from math import copysign</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">lowValue</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">lowValue</span><span class="p">))</span>
        <span class="n">highValue</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">highValue</span><span class="p">))</span>
        <span class="n">amplitude</span> <span class="o">=</span> <span class="n">highValue</span><span class="o">-</span><span class="n">lowValue</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;lowValue&#39;</span><span class="p">,</span> <span class="n">lowValue</span><span class="p">,</span> <span class="s1">&#39;amplitude&#39;</span><span class="p">,</span> <span class="n">amplitude</span><span class="p">)</span>
        <span class="n">criterionKeys</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">]</span>
        <span class="n">actionKeys</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">]</span>
        <span class="n">normEvaluation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criterionKeys</span><span class="p">:</span>
            <span class="c1">#print(g, criteria[g][&#39;weight&#39;], criteria[g][&#39;preferenceDirection&#39;])</span>
            <span class="n">normEvaluation</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">glow</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
            <span class="n">ghigh</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
            <span class="n">gamp</span> <span class="o">=</span> <span class="n">ghigh</span> <span class="o">-</span> <span class="n">glow</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;--&gt;&gt; g, glow, ghigh, gamp&#39;</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">glow</span><span class="p">,</span> <span class="n">ghigh</span><span class="p">,</span> <span class="n">gamp</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionKeys</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-999&#39;</span><span class="p">):</span>
                    <span class="n">evalx</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">evalx</span><span class="p">)</span>
                    <span class="n">normEvaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">lowValue</span> <span class="o">+</span> <span class="p">((</span><span class="n">evalx</span><span class="o">-</span><span class="n">glow</span><span class="p">)</span><span class="o">/</span><span class="n">gamp</span><span class="p">)</span><span class="o">*</span><span class="n">amplitude</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span>
                            <span class="n">normEvaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">lowValue</span> <span class="o">+</span> <span class="p">((</span><span class="n">evalx</span><span class="o">-</span><span class="n">glow</span><span class="p">)</span><span class="o">/</span><span class="n">gamp</span><span class="p">)</span><span class="o">*</span><span class="n">amplitude</span><span class="p">)</span>
                            <span class="c1">#print(&#39;passing here&#39;,normEvaluation[g][x])</span>
                            
                        <span class="k">elif</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;min&#39;</span><span class="p">:</span>
                        <span class="c1">#else:</span>
                            <span class="n">normEvaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">lowValue</span> <span class="o">+</span> <span class="p">((</span><span class="n">evalx</span><span class="o">-</span><span class="n">glow</span><span class="p">)</span><span class="o">/</span><span class="n">gamp</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="o">-</span><span class="n">amplitude</span><span class="p">))</span>
                            <span class="c1">#print(&#39;passing here&#39;,normEvaluation[g][x])</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">):</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;max&#39;</span>
                            <span class="n">normEvaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">lowValue</span> <span class="o">+</span> <span class="p">((</span><span class="n">evalx</span><span class="o">-</span><span class="n">glow</span><span class="p">)</span><span class="o">/</span><span class="n">gamp</span><span class="p">)</span><span class="o">*</span><span class="n">amplitude</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;min&#39;</span>
                            <span class="n">normEvaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="n">lowValue</span> <span class="o">+</span> <span class="p">((</span><span class="n">evalx</span><span class="o">-</span><span class="n">glow</span><span class="p">)</span><span class="o">/</span><span class="n">gamp</span><span class="p">)</span><span class="o">*</span><span class="n">amplitude</span><span class="p">)</span>
                        
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">],</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">],</span> <span class="n">normEvaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">normEvaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-999&#39;</span><span class="p">)</span>
                    
        <span class="k">return</span> <span class="n">normEvaluation</span></div>

<div class="viewcode-block" id="PerformanceTableau.restoreOriginalEvaluations"><a class="viewcode-back" href="../techDoc.html#perfTabs.PerformanceTableau.restoreOriginalEvaluations">[docs]</a>    <span class="k">def</span> <span class="nf">restoreOriginalEvaluations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">lowValue</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span><span class="n">highValue</span><span class="o">=</span><span class="mf">100.0</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        recode the evaluations to their original values on all criteria</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">lowValue</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">lowValue</span><span class="p">))</span>
        <span class="n">highValue</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">highValue</span><span class="p">))</span>
        <span class="n">amplitude</span> <span class="o">=</span> <span class="n">highValue</span><span class="o">-</span><span class="n">lowValue</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;lowValue&#39;</span><span class="p">,</span> <span class="n">lowValue</span><span class="p">,</span> <span class="s1">&#39;amplitude&#39;</span><span class="p">,</span> <span class="n">amplitude</span><span class="p">)</span>
        <span class="n">criterionKeys</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">evaluation</span><span class="p">]</span>
        <span class="n">restoredEvaluation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criterionKeys</span><span class="p">:</span>
            <span class="n">restoredEvaluation</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">glow</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
            <span class="n">ghigh</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
            <span class="n">gamp</span> <span class="o">=</span> <span class="n">ghigh</span> <span class="o">-</span> <span class="n">glow</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;--&gt;&gt; g, glow, ghigh, gamp&#39;</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">glow</span><span class="p">,</span> <span class="n">ghigh</span><span class="p">,</span> <span class="n">gamp</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-999&#39;</span><span class="p">):</span>
                    <span class="n">evalx</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">evalx</span><span class="p">)</span>
                    <span class="c1">## normEvaluation[g][x] = lowValue + ((evalx-glow)/gamp)*amplitude</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;min&#39;</span><span class="p">:</span>
                            <span class="n">sign</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">sign</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
                        <span class="c1">#normEvaluation[g][x] = (lowValue + ((evalx-glow)/gamp)*amplitude)*sign</span>
                        <span class="n">restoredEvaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">glow</span> <span class="o">+</span> <span class="p">((</span><span class="n">evalx</span><span class="o">-</span><span class="n">lowValue</span><span class="p">)</span><span class="o">/</span><span class="n">amplitude</span><span class="p">)</span><span class="o">*</span><span class="n">gamp</span><span class="p">)</span><span class="o">*</span><span class="n">sign</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;max&#39;</span>
                        <span class="n">restoredEvaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">glow</span><span class="o">+</span> <span class="p">((</span><span class="n">evalx</span><span class="o">-</span><span class="n">lowValue</span><span class="p">)</span><span class="o">/</span><span class="n">amplitude</span><span class="p">)</span><span class="o">*</span><span class="n">gamp</span>
                        
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">],</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">],</span> <span class="n">restoredEvaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">restoredEvaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-999&#39;</span><span class="p">)</span>
                    
        <span class="k">return</span> <span class="n">restoredEvaluation</span></div></div>

<span class="c1">#-----------------------</span>
<div class="viewcode-block" id="EmptyPerformanceTableau"><a class="viewcode-back" href="../techDoc.html#perfTabs.EmptyPerformanceTableau">[docs]</a><span class="k">class</span> <span class="nc">EmptyPerformanceTableau</span><span class="p">(</span><span class="n">PerformanceTableau</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Template for PerformanceTableau objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;PerfTab-template&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="p">{}</span></div>

<span class="c1">#-----------------------</span>
<div class="viewcode-block" id="PartialPerformanceTableau"><a class="viewcode-back" href="../techDoc.html#perfTabs.PartialPerformanceTableau">[docs]</a><span class="k">class</span> <span class="nc">PartialPerformanceTableau</span><span class="p">(</span><span class="n">PerformanceTableau</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructor for partial performance tableaux concerning a subset of actions and/or criteria and/or objectives</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">inPerfTab</span><span class="p">,</span><span class="n">actionsSubset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">criteriaSubset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">objectivesSubset</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
        <span class="kn">from</span> <span class="nn">randomPerfTabs</span> <span class="kn">import</span> <span class="n">RandomCBPerformanceTableau</span><span class="p">,</span>\
                                   <span class="n">Random3ObjectivesPerformanceTableau</span><span class="p">,</span>\
                                   <span class="n">RandomPerformanceTableau</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">=</span> <span class="n">inPerfTab</span><span class="o">.</span><span class="vm">__class__</span>
        <span class="c1"># name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;partial-&#39;</span><span class="o">+</span><span class="n">inPerfTab</span><span class="o">.</span><span class="n">name</span>
        <span class="c1"># actions</span>
        <span class="k">if</span> <span class="n">actionsSubset</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsSubset</span><span class="p">:</span>
                <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">inPerfTab</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">inPerfTab</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">actions</span>
        <span class="n">actionsTypeStatistics</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">inPerfTab</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">inPerfTab</span><span class="p">)</span> <span class="o">==</span> <span class="n">RandomCBPerformanceTableau</span><span class="p">:</span>
                <span class="n">xType</span> <span class="o">=</span> <span class="n">inPerfTab</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;type&#39;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">inPerfTab</span><span class="p">)</span> <span class="o">==</span> <span class="n">Random3ObjectivesPerformanceTableau</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">objectiveSupportingTypes</span> <span class="o">=</span> <span class="n">inPerfTab</span><span class="o">.</span><span class="n">objectiveSupportingTypes</span>
                <span class="n">xType</span> <span class="o">=</span> <span class="s1">&#39;Soc&#39;</span> <span class="o">+</span> <span class="n">inPerfTab</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;profile&#39;</span><span class="p">][</span><span class="s1">&#39;Soc&#39;</span><span class="p">]</span>
                <span class="n">xType</span> <span class="o">+=</span> <span class="s1">&#39;Eco&#39;</span> <span class="o">+</span> <span class="n">inPerfTab</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;profile&#39;</span><span class="p">][</span><span class="s1">&#39;Eco&#39;</span><span class="p">]</span>
                <span class="n">xType</span> <span class="o">+=</span> <span class="s1">&#39;Env&#39;</span> <span class="o">+</span> <span class="n">inPerfTab</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;profile&#39;</span><span class="p">][</span><span class="s1">&#39;Env&#39;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">xType</span> <span class="o">=</span> <span class="s1">&#39;NA&#39;</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">actionsTypeStatistics</span><span class="p">[</span><span class="n">xType</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">actionsTypeStatistics</span><span class="p">[</span><span class="n">xType</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actionsTypeStatistics</span> <span class="o">=</span> <span class="n">actionsTypeStatistics</span>
        
        <span class="c1"># objectives &amp; criteria</span>
        <span class="n">objectives</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="n">HasObjectives</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">objectivesSubset</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">objectives</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">inPerfTab</span><span class="o">.</span><span class="n">objectives</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">HasObjectives</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">criteriaSubset</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">criteria</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">HasObjectives</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objectives</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                        <span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="p">][</span><span class="s1">&#39;criteria&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaSubset</span><span class="p">:</span>
                    <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">inPerfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">])</span>
<span class="c1">##                    if HasObjectives:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">obj</span> <span class="o">=</span> <span class="n">inPerfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;objective&#39;</span><span class="p">]</span>
                        <span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="p">][</span><span class="s1">&#39;criteria&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">criteria</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">inPerfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">objectives</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
            <span class="n">criteria</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">criteriaSubset</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">criteriaSubset</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">inPerfTab</span><span class="o">.</span><span class="n">criteria</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objectivesSubset</span><span class="p">:</span>
                <span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="p">]</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">inPerfTab</span><span class="o">.</span><span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="p">])</span>
                <span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="p">][</span><span class="s1">&#39;criteria&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">inPerfTab</span><span class="o">.</span><span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="p">][</span><span class="s1">&#39;criteria&#39;</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaSubset</span><span class="p">:</span>
                        <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">inPerfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">])</span>
                        <span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="p">][</span><span class="s1">&#39;criteria&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span> <span class="o">=</span> <span class="n">objectives</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">commonScale</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">commonScale</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">OrdinalScales</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">OrdinalScales</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">BigData</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">BigData</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">missingDataProbability</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">missingDataProbability</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">criteria</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weightPreorder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeWeightPreorder</span><span class="p">()</span>
        <span class="c1"># evaluations</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valueDigits</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">valueDigits</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valueDigits</span> <span class="o">=</span> <span class="mi">2</span>

        <span class="n">evaluation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteria</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">inPerfTab</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">evaluation</span></div>
        
<span class="c1">#-----------------------</span>
<div class="viewcode-block" id="ConstantPerformanceTableau"><a class="viewcode-back" href="../techDoc.html#perfTabs.ConstantPerformanceTableau">[docs]</a><span class="k">class</span> <span class="nc">ConstantPerformanceTableau</span><span class="p">(</span><span class="n">PerformanceTableau</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructor for (partially) constant performance tableaux.</span>

<span class="sd">    *Parameter*:</span>
<span class="sd">    </span>
<span class="sd">        * *actionsSubset* selects the actions to be set at equal constant performances,</span>
<span class="sd">        * *criteriaSubset* select the concerned subset of criteria,</span>
<span class="sd">        * The *position* parameter (default = median performance) selects the constant performance in the respective scale of each performance criterion.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">inPerfTab</span><span class="p">,</span><span class="n">actionsSubset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">criteriaSubset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">position</span><span class="o">=</span><span class="mf">0.5</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;constant-&#39;</span><span class="o">+</span><span class="n">inPerfTab</span><span class="o">.</span><span class="n">name</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">inPerfTab</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">inPerfTab</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">actionsSubset</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">actionsSubset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">inPerfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">criteriaSubset</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">criteriaSubset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">weightPreorder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeWeightPreorder</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">inPerfTab</span><span class="o">.</span><span class="n">evaluation</span><span class="p">)</span>

        <span class="n">actionsKeys</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsSubset</span><span class="p">]</span>
        <span class="n">criteriaKeys</span> <span class="o">=</span> <span class="p">[</span><span class="n">g</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaSubset</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaKeys</span><span class="p">:</span>
            <span class="n">constantPerformance</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> \
                    <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="n">position</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsKeys</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">constantPerformance</span><span class="p">))</span></div>
                                    
                                    
<span class="c1"># ----------------------</span>
<div class="viewcode-block" id="NormalizedPerformanceTableau"><a class="viewcode-back" href="../techDoc.html#perfTabs.NormalizedPerformanceTableau">[docs]</a><span class="k">class</span> <span class="nc">NormalizedPerformanceTableau</span><span class="p">(</span><span class="n">PerformanceTableau</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    specialsation of the PerformanceTableau class for</span>
<span class="sd">    constructing normalized, 0 - 100, valued PerformanceTableau</span>
<span class="sd">    instances from a given argPerfTab instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">argPerfTab</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">lowValue</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">highValue</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">coalition</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">copy</span>
        <span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">,(</span><span class="nb">str</span><span class="p">)):</span>
            <span class="n">perfTab</span> <span class="o">=</span> <span class="n">PerformanceTableau</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">argPerfTab</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error: a valid PerformanceTableau instance is required !&#39;</span><span class="p">)</span>
            <span class="n">perfTab</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">perfTab</span> <span class="o">=</span> <span class="n">argPerfTab</span>      
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;norm_&#39;</span><span class="o">+</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">name</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">evaluation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">normalizeEvaluations</span><span class="p">(</span><span class="n">lowValue</span><span class="p">,</span><span class="n">highValue</span><span class="p">,</span><span class="n">Debug</span><span class="p">)</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>        
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">th</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">]:</span>
                    <span class="n">empan</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
                    <span class="n">intercept</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="n">th</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="n">empan</span><span class="o">*</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">highValue</span><span class="o">-</span><span class="n">lowValue</span><span class="p">)))</span>
                    <span class="n">slope</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="n">th</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="n">th</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">intercept</span><span class="p">,</span><span class="n">slope</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">lowValue</span><span class="p">,</span><span class="n">highValue</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">criteria</span></div>
            
        

<span class="c1">#########################################</span>
<span class="c1"># specializations of the generic PerformanceTableau Class</span>

<span class="k">class</span> <span class="nc">_RandomPerformanceTableau</span><span class="p">(</span><span class="n">PerformanceTableau</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Obsolete class definition. Please use the corresponding randomPerfTabs module class instead.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">numberOfActions</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>\
                 <span class="n">numberOfCriteria</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>\
                 <span class="n">weightDistribution</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>\
                 <span class="n">weightScale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>\
                 <span class="n">integerWeights</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>\
                 <span class="n">commonScale</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">100.0</span><span class="p">],</span>\
                 <span class="n">commonThresholds</span> <span class="o">=</span> <span class="p">[(</span><span class="mf">10.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">),(</span><span class="mf">20.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">),(</span><span class="mf">80.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">)],</span>\
                 <span class="n">commonMode</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>\
                 <span class="n">valueDigits</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>\
                 <span class="n">Debug</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span><span class="nn">random</span><span class="o">,</span><span class="nn">time</span><span class="o">,</span><span class="nn">math</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;randomperftab&#39;</span>
        
        <span class="c1"># generate actions</span>
        <span class="k">if</span> <span class="n">numberOfActions</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">numberOfActions</span> <span class="o">=</span> <span class="mi">13</span>
        <span class="n">actionsIndex</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">numberOfActions</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">actionsIndex</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actionsIndex</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
                <span class="n">actionName</span> <span class="o">=</span> <span class="s1">&#39;a0&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">actionName</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
            <span class="n">actionsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">actionName</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;random decision action&#39;</span>
            <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;comment&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;RandomPerformanceTableau() generated.&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">actions</span>
        <span class="c1"># generate criterialist</span>
        <span class="k">if</span> <span class="n">numberOfCriteria</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">numberOfCriteria</span> <span class="o">=</span> <span class="mi">7</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">criteriaIndex</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">numberOfCriteria</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">criteriaIndex</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaIndex</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">g</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
                <span class="n">criterionName</span> <span class="o">=</span> <span class="s1">&#39;g0&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">criterionName</span> <span class="o">=</span> <span class="s1">&#39;g&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
            <span class="n">criteriaList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">criterionName</span><span class="p">)</span>
        <span class="c1"># generate weights</span>
        <span class="k">if</span> <span class="n">weightDistribution</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">weightDistribution</span> <span class="o">=</span> <span class="s1">&#39;random&#39;</span>
        <span class="k">if</span> <span class="n">weightScale</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">weightScale</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">numberOfCriteria</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">weightDistribution</span> <span class="o">==</span> <span class="s1">&#39;random&#39;</span><span class="p">:</span>
            <span class="n">weightsList</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">sumWeights</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="n">weightsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">weightScale</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">weightScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]))))</span>
                <span class="n">sumWeights</span> <span class="o">+=</span> <span class="n">weightsList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">weightsList</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">weightDistribution</span> <span class="o">==</span> <span class="s1">&#39;fixed&#39;</span><span class="p">:</span>
            <span class="n">weightsList</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">sumWeights</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">g</span> <span class="o">==</span> <span class="s1">&#39;g1&#39;</span><span class="p">:</span>
                    <span class="n">weightsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">weightScale</span><span class="p">[</span><span class="mi">1</span><span class="p">])))</span>
                    <span class="n">sumWeights</span> <span class="o">+=</span> <span class="n">weightScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">weightsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">weightScale</span><span class="p">[</span><span class="mi">0</span><span class="p">])))</span>
                    <span class="n">sumWeights</span> <span class="o">+=</span> <span class="n">weightScale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">weightsList</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">weightDistribution</span> <span class="o">==</span> <span class="s1">&#39;equisignificant&#39;</span> <span class="ow">or</span> <span class="n">weightDistribution</span> <span class="o">==</span> <span class="s1">&#39;equiobjectives&#39;</span><span class="p">:</span>
            <span class="n">weightScale</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">weightsList</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">sumWeights</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">g</span> <span class="o">==</span> <span class="s1">&#39;g1&#39;</span><span class="p">:</span>
                    <span class="n">weightsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">weightScale</span><span class="p">[</span><span class="mi">1</span><span class="p">])))</span>
                    <span class="n">sumWeights</span> <span class="o">+=</span> <span class="n">weightScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">weightsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">weightScale</span><span class="p">[</span><span class="mi">0</span><span class="p">])))</span>
                    <span class="n">sumWeights</span> <span class="o">+=</span> <span class="n">weightScale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">weightsList</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;!!! Error: wrong criteria weight distribution mode: </span><span class="si">%s</span><span class="s1"> !!!!&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">weightDistribution</span><span class="p">))</span>

        <span class="c1"># generate criteria dictionary</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">commentString</span> <span class="o">=</span> <span class="s1">&#39;Arguments: &#39;</span>
        <span class="n">commentString</span> <span class="o">+=</span> <span class="s1">&#39;; weightDistribution=&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">weightDistribution</span><span class="p">)</span>
        <span class="n">commentString</span> <span class="o">+=</span> <span class="s1">&#39;; weightScale=&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">weightScale</span><span class="p">)</span>
        <span class="n">commentString</span> <span class="o">+=</span> <span class="s1">&#39;; commonMode=&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">commonMode</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
            <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;digraphs.RandomPerformanceTableau() instance&#39;</span>
            <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;comment&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">commentString</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">commonThresholds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">commonThresholds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])),</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">commonThresholds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])))</span>
                <span class="n">commonThresholds</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">commonThresholds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])),</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">commonThresholds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">])))</span>
                <span class="n">commonThresholds</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">commonThresholds</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">])),</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">commonThresholds</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">])))</span>
                <span class="n">commonThresholds</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">commonThresholds</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">])),</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">commonThresholds</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">1</span><span class="p">])))</span>
             
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ind&#39;</span><span class="p">:</span><span class="n">commonThresholds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="s1">&#39;pref&#39;</span><span class="p">:</span><span class="n">commonThresholds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">:</span><span class="n">commonThresholds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="s1">&#39;veto&#39;</span><span class="p">:</span><span class="n">commonThresholds</span><span class="p">[</span><span class="mi">3</span><span class="p">]}</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">commonThresholds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">commonThresholds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])),</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">commonThresholds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])))</span>
                <span class="n">commonThresholds</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">commonThresholds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])),</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">commonThresholds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">])))</span>
                <span class="n">commonThresholds</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">commonThresholds</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">])),</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">commonThresholds</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">])))</span>                
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ind&#39;</span><span class="p">:</span><span class="n">commonThresholds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="s1">&#39;pref&#39;</span><span class="p">:</span><span class="n">commonThresholds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="s1">&#39;veto&#39;</span><span class="p">:</span><span class="n">commonThresholds</span><span class="p">[</span><span class="mi">2</span><span class="p">]}</span>
            <span class="c1">#commonScale = (Decimal(str(commonScale[0])),Decimal(str(commonScale[1])))</span>
            <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">commonScale</span>
            <span class="k">if</span> <span class="n">integerWeights</span><span class="p">:</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">weightsList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">weightsList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">/</span><span class="n">sumWeights</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">criteria</span>
        <span class="c1"># generate evaluations</span>
        <span class="k">if</span> <span class="n">commonMode</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">commonMode</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;uniform&#39;</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">]</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">digits</span><span class="o">=</span><span class="n">valueDigits</span>
        <span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">commonMode</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="s1">&#39;uniform&#39;</span><span class="p">:</span>          
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
                <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    <span class="c1">## randeval = random.randint(commonScale[0],commonScale[1])</span>
                    <span class="n">randeval</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                    <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">randeval</span><span class="p">,</span><span class="n">digits</span><span class="p">)))</span>
        <span class="k">elif</span> <span class="nb">str</span><span class="p">(</span><span class="n">commonMode</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="s1">&#39;triangular&#39;</span><span class="p">:</span>
            <span class="n">m</span> <span class="o">=</span> <span class="n">commonScale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">M</span> <span class="o">=</span> <span class="n">commonScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">commonMode</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">xm</span> <span class="o">=</span> <span class="p">(</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="mf">2.0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">xm</span> <span class="o">=</span> <span class="n">commonMode</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">commonMode</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">r</span>  <span class="o">=</span> <span class="mf">0.5</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">r</span>  <span class="o">=</span> <span class="n">commonMode</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
                <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    <span class="n">u</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">u</span> <span class="o">&lt;</span> <span class="n">r</span><span class="p">:</span>
                        <span class="n">randeval</span> <span class="o">=</span> <span class="n">m</span> <span class="o">+</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">u</span><span class="o">/</span><span class="n">r</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">xm</span><span class="o">-</span><span class="n">m</span><span class="p">)</span>                   
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">randeval</span> <span class="o">=</span> <span class="n">M</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="mi">1</span><span class="o">-</span><span class="n">u</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">r</span><span class="p">))</span><span class="o">*</span><span class="p">(</span><span class="n">M</span><span class="o">-</span><span class="n">xm</span><span class="p">)</span>
                    <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">randeval</span><span class="p">,</span><span class="n">digits</span><span class="p">)))</span>

        <span class="k">elif</span> <span class="nb">str</span><span class="p">(</span><span class="n">commonMode</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="s1">&#39;beta&#39;</span><span class="p">:</span>
            <span class="n">m</span> <span class="o">=</span> <span class="n">commonScale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">M</span> <span class="o">=</span> <span class="n">commonScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">commonMode</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">xm</span> <span class="o">=</span> <span class="mf">0.5</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">xm</span> <span class="o">=</span> <span class="n">commonMode</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                
            <span class="k">if</span> <span class="n">commonMode</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">xm</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">:</span>
                    <span class="n">beta</span> <span class="o">=</span> <span class="mf">2.0</span>
                    <span class="n">alpha</span> <span class="o">=</span> <span class="mf">1.0</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">xm</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">alpha</span> <span class="o">=</span> <span class="mf">2.0</span>
                    <span class="n">beta</span> <span class="o">=</span> <span class="mf">1.0</span><span class="o">/</span><span class="n">xm</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">alpha</span> <span class="o">=</span> <span class="n">commonMode</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">beta</span> <span class="o">=</span> <span class="n">commonMode</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;alpha,beta&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="p">,</span><span class="n">beta</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
                <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    <span class="n">u</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">betavariate</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span><span class="n">beta</span><span class="p">)</span>
                    <span class="n">randeval</span> <span class="o">=</span> <span class="p">(</span><span class="n">u</span> <span class="o">*</span> <span class="p">(</span><span class="n">M</span><span class="o">-</span><span class="n">m</span><span class="p">))</span> <span class="o">+</span> <span class="n">m</span>
                    <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">randeval</span><span class="p">,</span><span class="n">digits</span><span class="p">)))</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;xm,alpha,beta,u,m,M,randeval&#39;</span><span class="p">,</span><span class="n">xm</span><span class="p">,</span><span class="n">alpha</span><span class="p">,</span><span class="n">beta</span><span class="p">,</span><span class="n">u</span><span class="p">,</span><span class="n">m</span><span class="p">,</span><span class="n">M</span><span class="p">,</span><span class="n">randeval</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">str</span><span class="p">(</span><span class="n">commonMode</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="s1">&#39;normal&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">commonMode</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">mu</span> <span class="o">=</span> <span class="p">(</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="mf">2.0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">mu</span> <span class="o">=</span> <span class="n">commonMode</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">commonMode</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">sigma</span> <span class="o">=</span> <span class="p">(</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="mf">4.0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">sigma</span> <span class="o">=</span> <span class="n">commonMode</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
                <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    <span class="n">notfound</span> <span class="o">=</span> <span class="kc">True</span> 
                    <span class="k">while</span> <span class="n">notfound</span><span class="p">:</span>
                        <span class="n">randeval</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">normalvariate</span><span class="p">(</span><span class="n">mu</span><span class="p">,</span><span class="n">sigma</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">randeval</span> <span class="o">&gt;=</span> <span class="n">commonScale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span>  <span class="n">randeval</span> <span class="o">&lt;=</span> <span class="n">commonScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                            <span class="n">notfound</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">randeval</span><span class="p">,</span><span class="n">digits</span><span class="p">)))</span>

        
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;mode error in random evaluation generator !!&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">commonMode</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
            <span class="c1">#sys.exit(1)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">evaluation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weightPreorder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeWeightPreorder</span><span class="p">()</span>

<span class="c1"># -----------------</span>
<span class="k">class</span> <span class="nc">_RandomRankPerformanceTableau</span><span class="p">(</span><span class="n">PerformanceTableau</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Obsolete class definition. Please use the corresponding randomPerfTabs module class instead.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">numberOfActions</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">numberOfCriteria</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>\
                 <span class="n">weightDistribution</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">weightScale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>\
                 <span class="n">commonThresholds</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">integerWeights</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>\
                 <span class="n">Debug</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Parameters:</span>
<span class="sd">            number of actions,</span>
<span class="sd">            number criteria,</span>
<span class="sd">            weightDistribution := equisignificant|random (default)</span>
<span class="sd">            weightScale=(1,numberOfCriteria (default when random))</span>
<span class="sd">            integerWeights = Boolean (True = default) </span>
<span class="sd">            commonThresholds = {&#39;ind&#39;:(0,0),&#39;pref&#39;:(1,0),&#39;veto&#39;:(numberOfActions,0)} (default)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span><span class="nn">random</span><span class="o">,</span><span class="nn">time</span><span class="o">,</span><span class="nn">math</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;rankperftab&#39;</span>
        
        <span class="c1"># generate actions</span>
        <span class="k">if</span> <span class="n">numberOfActions</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">numberOfActions</span> <span class="o">=</span> <span class="mi">13</span>
        <span class="n">actionsIndex</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">numberOfActions</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">actionsIndex</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actionsIndex</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
                <span class="n">actionName</span> <span class="o">=</span> <span class="s1">&#39;a0&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">actionName</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
            <span class="n">actionsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">actionName</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;random decision action&#39;</span>
            <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;comment&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;RandomRankPerformanceTableau() generated.&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">actions</span>
        <span class="c1"># generate criterialist</span>
        <span class="k">if</span> <span class="n">numberOfCriteria</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">numberOfCriteria</span> <span class="o">=</span> <span class="mi">7</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">criteriaIndex</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">numberOfCriteria</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">criteriaIndex</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaIndex</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">g</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
                <span class="n">criterionName</span> <span class="o">=</span> <span class="s1">&#39;g0&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">criterionName</span> <span class="o">=</span> <span class="s1">&#39;g&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
            <span class="n">criteriaList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">criterionName</span><span class="p">)</span>
        <span class="c1"># generate weights</span>
        <span class="k">if</span> <span class="n">weightDistribution</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">weightDistribution</span> <span class="o">=</span> <span class="s1">&#39;random&#39;</span>
        <span class="k">if</span> <span class="n">weightScale</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">weightScale</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">numberOfCriteria</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">weightDistribution</span> <span class="o">==</span> <span class="s1">&#39;random&#39;</span><span class="p">:</span>
            <span class="n">weightsList</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">sumWeights</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="n">weightsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">weightScale</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">weightScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]))))</span>
                <span class="n">sumWeights</span> <span class="o">+=</span> <span class="n">weightsList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">weightsList</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">weightDistribution</span> <span class="o">==</span> <span class="s1">&#39;equisignificant&#39;</span><span class="p">:</span>
            <span class="n">weightScale</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">weightsList</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">sumWeights</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">g</span> <span class="o">==</span> <span class="s1">&#39;g1&#39;</span><span class="p">:</span>
                    <span class="n">weightsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">weightScale</span><span class="p">[</span><span class="mi">1</span><span class="p">])))</span>
                    <span class="n">sumWeights</span> <span class="o">+=</span> <span class="n">weightScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">weightsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">weightScale</span><span class="p">[</span><span class="mi">0</span><span class="p">])))</span>
                    <span class="n">sumWeights</span> <span class="o">+=</span> <span class="n">weightScale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">weightsList</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;!!! Error: wrong criteria weight distribution mode: </span><span class="si">%s</span><span class="s1"> !!!!&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">weightDistribution</span><span class="p">))</span>

        <span class="c1"># generate criteria dictionary</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">commentString</span> <span class="o">=</span> <span class="s1">&#39;Arguments: &#39;</span>
        <span class="n">commentString</span> <span class="o">+=</span> <span class="s1">&#39;; weightDistribution=&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">weightDistribution</span><span class="p">)</span>
        <span class="n">commentString</span> <span class="o">+=</span> <span class="s1">&#39;; weightScale=&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">weightScale</span><span class="p">)</span>
        <span class="n">commentString</span> <span class="o">+=</span> <span class="s1">&#39;; integerWeights=&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">integerWeights</span><span class="p">)</span>
        <span class="n">commentString</span> <span class="o">+=</span> <span class="s1">&#39;; commonThresholds=&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">commonThresholds</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
            <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;digraphs.RandomRankPerformanceTableau() instance&#39;</span>
            <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;comment&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">commentString</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">indThreshold</span>  <span class="o">=</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">commonThresholds</span><span class="p">[</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])),</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">commonThresholds</span><span class="p">[</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])))</span>
                <span class="n">prefThreshold</span> <span class="o">=</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">commonThresholds</span><span class="p">[</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])),</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">commonThresholds</span><span class="p">[</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])))</span>
                <span class="n">vetoThreshold</span> <span class="o">=</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">commonThresholds</span><span class="p">[</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])),</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">commonThresholds</span><span class="p">[</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])))</span>
             
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ind&#39;</span><span class="p">:</span><span class="n">indThreshold</span><span class="p">,</span><span class="s1">&#39;pref&#39;</span><span class="p">:</span><span class="n">prefThreshold</span><span class="p">,</span><span class="s1">&#39;veto&#39;</span><span class="p">:</span><span class="n">vetoThreshold</span><span class="p">}</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">indThreshold</span>  <span class="o">=</span> <span class="p">(</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">),</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">)</span> <span class="p">)</span>
                <span class="n">prefThreshold</span> <span class="o">=</span> <span class="p">(</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;1&quot;</span><span class="p">),</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">)</span> <span class="p">)</span>
                <span class="n">vetoThreshold</span> <span class="o">=</span> <span class="p">(</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">numberOfActions</span><span class="p">)),</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">)</span> <span class="p">)</span>               
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;ind&#39;</span><span class="p">:</span><span class="n">indThreshold</span><span class="p">,</span>\
                                              <span class="s1">&#39;pref&#39;</span><span class="p">:</span><span class="n">prefThreshold</span><span class="p">,</span>\
                                              <span class="s1">&#39;veto&#39;</span><span class="p">:</span> <span class="n">vetoThreshold</span>
                                              <span class="p">}</span>
            <span class="n">commonScale</span> <span class="o">=</span> <span class="p">(</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">),</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">numberOfActions</span><span class="p">)</span> <span class="p">)</span>
            <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">commonScale</span>
            <span class="k">if</span> <span class="n">integerWeights</span><span class="p">:</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">weightsList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">weightsList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">/</span><span class="n">sumWeights</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">criteria</span>
        <span class="c1"># generate evaluations</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="p">{}</span>       
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
            <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">choiceRange</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">numberOfActions</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="n">randeval</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">choiceRange</span><span class="p">)</span>
                <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span><span class="n">randeval</span><span class="p">)</span> <span class="p">)</span>
                <span class="n">choiceRange</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">randeval</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">evaluation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weightPreorder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeWeightPreorder</span><span class="p">()</span>

<span class="c1"># ------------------------------</span>


<span class="k">class</span> <span class="nc">_FullRandomPerformanceTableau</span><span class="p">(</span><span class="n">PerformanceTableau</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Obsolete class definition. Please use the corresponding randomPerfTabs module class instead.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">numberOfActions</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">numberOfCriteria</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">weightDistribution</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">weightScale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">integerWeights</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">commonScale</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">commonThresholds</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">commonMode</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">valueDigits</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">Debug</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span><span class="nn">random</span><span class="o">,</span><span class="nn">time</span><span class="o">,</span><span class="nn">math</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;fullrandomperftab&#39;</span>
        <span class="c1"># randomizer init</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
        <span class="c1"># generate random actions</span>
        <span class="k">if</span> <span class="n">numberOfActions</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">numberOfActions</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">31</span><span class="p">)</span>
        <span class="n">actionsIndex</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">numberOfActions</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">actionsIndex</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actionsIndex</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
                <span class="n">actionName</span> <span class="o">=</span> <span class="s1">&#39;a0&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">actionName</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
            <span class="n">actionsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">actionName</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;random decision action&#39;</span>
            <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;comment&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;FullRandomPerformanceTableau() generated.&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">actions</span>
        <span class="c1"># generate random criterialist</span>
        <span class="k">if</span> <span class="n">numberOfCriteria</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">numberOfCriteria</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">21</span><span class="p">)</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">criteriaIndex</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">numberOfCriteria</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">criteriaIndex</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaIndex</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">g</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
                <span class="n">criterionName</span> <span class="o">=</span> <span class="s1">&#39;g0&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">criterionName</span> <span class="o">=</span> <span class="s1">&#39;g&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
            <span class="n">criteriaList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">criterionName</span><span class="p">)</span>
        <span class="c1"># generate random weights</span>
        <span class="k">if</span> <span class="n">weightDistribution</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">majorityWeight</span> <span class="o">=</span> <span class="n">numberOfCriteria</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="c1">#weightModesList = [(&#39;fixed&#39;,[1,1],1),(&#39;random&#39;,[1,3],2), (&#39;random&#39;,[1,numberOfCriteria],3),(&#39;fixed&#39;,[1,majorityWeight],4)]</span>
            <span class="n">weightModesList</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;fixed&#39;</span><span class="p">,[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="mi">1</span><span class="p">),(</span><span class="s1">&#39;random&#39;</span><span class="p">,[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;random&#39;</span><span class="p">,[</span><span class="mi">1</span><span class="p">,</span><span class="n">numberOfCriteria</span><span class="p">],</span><span class="mi">3</span><span class="p">)]</span>
            <span class="n">weightMode</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">weightModesList</span><span class="p">)</span>
            <span class="n">weightDistribution</span> <span class="o">=</span> <span class="n">weightMode</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">weightScale</span> <span class="o">=</span>  <span class="n">weightMode</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">weightScale</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">weightScale</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">numberOfCriteria</span><span class="p">)</span>
            <span class="n">weightMode</span><span class="o">=</span><span class="p">[</span><span class="n">weightDistribution</span><span class="p">,</span><span class="n">weightScale</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">weightDistribution</span> <span class="o">==</span> <span class="s1">&#39;random&#39;</span><span class="p">:</span>
            <span class="n">weightsList</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">sumWeights</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="n">weightsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">weightScale</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">weightScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
                <span class="n">sumWeights</span> <span class="o">+=</span> <span class="n">weightsList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">weightsList</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">weightDistribution</span> <span class="o">==</span> <span class="s1">&#39;fixed&#39;</span><span class="p">:</span>
            <span class="n">weightsList</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">sumWeights</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">g</span> <span class="o">==</span> <span class="s1">&#39;g1&#39;</span><span class="p">:</span>
                    <span class="n">weightsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">weightScale</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                    <span class="n">sumWeights</span> <span class="o">+=</span> <span class="n">weightScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">weightsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">weightScale</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                    <span class="n">sumWeights</span> <span class="o">+=</span> <span class="n">weightScale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">weightsList</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">weightDistribution</span> <span class="o">==</span> <span class="s1">&#39;equisignificant&#39;</span> <span class="ow">or</span> <span class="n">weightDistribution</span> <span class="o">==</span> <span class="s1">&#39;equiobjectives&#39;</span><span class="p">:</span>
            <span class="n">weightScale</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">weightsList</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">sumWeights</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">g</span> <span class="o">==</span> <span class="s1">&#39;g1&#39;</span><span class="p">:</span>
                    <span class="n">weightsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">weightScale</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                    <span class="n">sumWeights</span> <span class="o">+=</span> <span class="n">weightScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">weightsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">weightScale</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                    <span class="n">sumWeights</span> <span class="o">+=</span> <span class="n">weightScale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">weightsList</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;!!! Error: wrong criteria weight distribution mode: </span><span class="si">%s</span><span class="s1"> !!!!&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">weightDistribution</span><span class="p">))</span>

        <span class="c1"># generate criteria dictionary with random thresholds</span>
        <span class="k">if</span> <span class="n">commonScale</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">commonScale</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">100.0</span><span class="p">]</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
            <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;random criterion&#39;</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">commonThresholds</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>        
                <span class="n">thresholds</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">thresholds</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="nb">round</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="mf">5.0</span><span class="p">),</span><span class="n">valueDigits</span><span class="p">),</span><span class="mf">0.0</span><span class="p">))</span>
                <span class="n">thresholds</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="nb">round</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">thresholds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="mf">3.0</span><span class="p">),</span><span class="n">valueDigits</span><span class="p">),</span><span class="mf">0.0</span><span class="p">))</span>
                <span class="n">thresholds</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="nb">round</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mf">2.0</span><span class="o">/</span><span class="mf">3.0</span><span class="p">,</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span><span class="n">valueDigits</span><span class="p">),</span><span class="mf">0.0</span><span class="p">))</span>
                <span class="n">thresholds</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="nb">round</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">thresholds</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span><span class="n">valueDigits</span><span class="p">),</span><span class="mf">0.0</span><span class="p">))</span>
                
            <span class="k">else</span><span class="p">:</span>
                <span class="n">thresholds</span> <span class="o">=</span> <span class="n">commonThresholds</span>
            <span class="c1">## print thresholds</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s1">&#39;ind&#39;</span><span class="p">:(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">thresholds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])),</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">thresholds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]))),</span>
                    <span class="s1">&#39;pref&#39;</span><span class="p">:(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">thresholds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])),</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">thresholds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]))),</span>
                    <span class="s1">&#39;weakVeto&#39;</span><span class="p">:(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">thresholds</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">])),</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">thresholds</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">]))),</span>
                    <span class="s1">&#39;veto&#39;</span><span class="p">:(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">thresholds</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">])),</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">thresholds</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">1</span><span class="p">]))),</span>
                    <span class="p">}</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s1">&#39;ind&#39;</span><span class="p">:(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">thresholds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])),</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">thresholds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]))),</span>
                    <span class="s1">&#39;pref&#39;</span><span class="p">:(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">thresholds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])),</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">thresholds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]))),</span>
                    <span class="s1">&#39;veto&#39;</span><span class="p">:(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">thresholds</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">])),</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">thresholds</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">]))),</span>
                    <span class="p">}</span>               
            <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">commonScale</span>
            <span class="k">if</span> <span class="n">integerWeights</span><span class="p">:</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">weightsList</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">weightsList</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">sumWeights</span><span class="p">))</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="c1"># generate random evaluations</span>
        <span class="n">x30</span><span class="o">=</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mf">0.3</span>
        <span class="n">x50</span><span class="o">=</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mf">0.5</span>
        <span class="n">x70</span><span class="o">=</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mf">0.7</span>
        <span class="n">randomLawsList</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;uniform&#39;</span><span class="p">,</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
                          <span class="p">(</span><span class="s1">&#39;triangular&#39;</span><span class="p">,</span><span class="n">x30</span><span class="p">,</span><span class="mf">0.33</span><span class="p">),(</span><span class="s1">&#39;triangular&#39;</span><span class="p">,</span><span class="n">x30</span><span class="p">,</span><span class="mf">0.50</span><span class="p">),(</span><span class="s1">&#39;triangular&#39;</span><span class="p">,</span><span class="n">x30</span><span class="p">,</span><span class="mf">0.75</span><span class="p">),</span>
                          <span class="p">(</span><span class="s1">&#39;triangular&#39;</span><span class="p">,</span><span class="n">x50</span><span class="p">,</span><span class="mf">0.33</span><span class="p">),(</span><span class="s1">&#39;triangular&#39;</span><span class="p">,</span><span class="n">x50</span><span class="p">,</span><span class="mf">0.50</span><span class="p">),(</span><span class="s1">&#39;triangular&#39;</span><span class="p">,</span><span class="n">x50</span><span class="p">,</span><span class="mf">0.75</span><span class="p">),</span>
                          <span class="p">(</span><span class="s1">&#39;triangular&#39;</span><span class="p">,</span><span class="n">x70</span><span class="p">,</span><span class="mf">0.33</span><span class="p">),(</span><span class="s1">&#39;triangular&#39;</span><span class="p">,</span><span class="n">x70</span><span class="p">,</span><span class="mf">0.50</span><span class="p">),(</span><span class="s1">&#39;triangular&#39;</span><span class="p">,</span><span class="n">x70</span><span class="p">,</span><span class="mf">0.75</span><span class="p">),</span>
                          <span class="p">(</span><span class="s1">&#39;normal&#39;</span><span class="p">,</span><span class="n">x30</span><span class="p">,</span><span class="mf">20.0</span><span class="p">),(</span><span class="s1">&#39;normal&#39;</span><span class="p">,</span><span class="n">x30</span><span class="p">,</span><span class="mf">25.0</span><span class="p">),(</span><span class="s1">&#39;normal&#39;</span><span class="p">,</span><span class="n">x30</span><span class="p">,</span><span class="mf">30.0</span><span class="p">),</span>
                          <span class="p">(</span><span class="s1">&#39;normal&#39;</span><span class="p">,</span><span class="n">x50</span><span class="p">,</span><span class="mf">20.0</span><span class="p">),(</span><span class="s1">&#39;normal&#39;</span><span class="p">,</span><span class="n">x50</span><span class="p">,</span><span class="mf">25.0</span><span class="p">),(</span><span class="s1">&#39;normal&#39;</span><span class="p">,</span><span class="n">x50</span><span class="p">,</span><span class="mf">30.0</span><span class="p">),</span>
                          <span class="p">(</span><span class="s1">&#39;normal&#39;</span><span class="p">,</span><span class="n">x70</span><span class="p">,</span><span class="mf">20.0</span><span class="p">),(</span><span class="s1">&#39;normal&#39;</span><span class="p">,</span><span class="n">x70</span><span class="p">,</span><span class="mf">25.0</span><span class="p">),(</span><span class="s1">&#39;normal&#39;</span><span class="p">,</span><span class="n">x70</span><span class="p">,</span><span class="mf">30.0</span><span class="p">)]</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
            <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="n">commonMode</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">randomMode</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">randomLawsList</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">randomMode</span> <span class="o">=</span> <span class="n">commonMode</span>
            <span class="k">if</span> <span class="n">randomMode</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;uniform&#39;</span><span class="p">:</span>
                <span class="n">randomMode</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">commonScale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">randomMode</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">commonScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;randomMode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">randomMode</span>
            <span class="k">if</span> <span class="n">randomMode</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;beta&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">randomMode</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">randomMode</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">commentString</span> <span class="o">=</span> <span class="n">randomMode</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, default, default&#39;</span>
                <span class="k">elif</span> <span class="n">randomMode</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">randomMode</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">commentString</span> <span class="o">=</span> <span class="n">randomMode</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;, </span><span class="si">%.2f</span><span class="s1">, default&#39;</span> <span class="o">%</span> <span class="nb">float</span><span class="p">(</span><span class="n">randomMode</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="k">elif</span> <span class="n">randomMode</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">randomMode</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">commentString</span> <span class="o">=</span> <span class="n">randomMode</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;, default, </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">randomMode</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">commentString</span> <span class="o">=</span> <span class="n">randomMode</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;, </span><span class="si">%.2f</span><span class="s1">, </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">randomMode</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span><span class="nb">float</span><span class="p">(</span><span class="n">randomMode</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">randomMode</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">randomMode</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">commentString</span> <span class="o">=</span> <span class="n">randomMode</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;, </span><span class="si">%.2f</span><span class="s1">, (</span><span class="si">%.4f</span><span class="s1">,</span><span class="si">%.4f</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">randomMode</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span><span class="nb">float</span><span class="p">(</span><span class="n">randomMode</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]),</span><span class="nb">float</span><span class="p">(</span><span class="n">randomMode</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
                <span class="k">elif</span> <span class="n">randomMode</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">randomMode</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">commentString</span> <span class="o">=</span> <span class="n">randomMode</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;, default, (</span><span class="si">%.4f</span><span class="s1">,</span><span class="si">%.4f</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">randomMode</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]),</span><span class="nb">float</span><span class="p">(</span><span class="n">randomMode</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
                <span class="k">if</span> <span class="n">randomMode</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">randomMode</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">commentString</span> <span class="o">=</span> <span class="n">randomMode</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;, </span><span class="si">%.2f</span><span class="s1">, default&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">randomMode</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">commentString</span> <span class="o">=</span> <span class="n">randomMode</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;, default,default&#39;</span>
                    
                
            <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;comment&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Evaluation generator: &#39;</span><span class="o">+</span><span class="n">commentString</span>
            <span class="n">digits</span> <span class="o">=</span> <span class="n">valueDigits</span>
            <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">randomMode</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="s1">&#39;uniform&#39;</span><span class="p">:</span>          
                <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    <span class="n">randeval</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                    <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">randeval</span><span class="p">,</span><span class="n">digits</span><span class="p">)))</span>
            <span class="k">elif</span> <span class="nb">str</span><span class="p">(</span><span class="n">randomMode</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="s1">&#39;triangular&#39;</span><span class="p">:</span>
                <span class="n">m</span> <span class="o">=</span> <span class="n">commonScale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">M</span> <span class="o">=</span> <span class="n">commonScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">commonMode</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">xm</span> <span class="o">=</span> <span class="p">(</span><span class="n">M</span><span class="o">-</span><span class="n">m</span><span class="p">)</span><span class="o">/</span><span class="mf">2.0</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">xm</span> <span class="o">=</span> <span class="n">commonMode</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">xm</span> <span class="o">=</span> <span class="p">(</span><span class="n">M</span><span class="o">-</span><span class="n">m</span><span class="p">)</span><span class="o">/</span><span class="mf">2.0</span>
                <span class="k">try</span><span class="p">:</span>    
                    <span class="k">if</span> <span class="n">commonMode</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">r</span>  <span class="o">=</span> <span class="mf">0.5</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">r</span>  <span class="o">=</span> <span class="n">commonMode</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">r</span>  <span class="o">=</span> <span class="mf">0.5</span>
                <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    <span class="n">u</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">u</span> <span class="o">&lt;</span> <span class="n">r</span><span class="p">:</span>
                        <span class="n">randeval</span> <span class="o">=</span> <span class="n">m</span> <span class="o">+</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">u</span><span class="o">/</span><span class="n">r</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">xm</span><span class="o">-</span><span class="n">m</span><span class="p">)</span>                
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">randeval</span> <span class="o">=</span> <span class="n">M</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="mi">1</span><span class="o">-</span><span class="n">u</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">r</span><span class="p">))</span><span class="o">*</span><span class="p">(</span><span class="n">M</span><span class="o">-</span><span class="n">xm</span><span class="p">)</span>
                    <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">randeval</span><span class="p">,</span><span class="n">digits</span><span class="p">)))</span>

            <span class="k">elif</span> <span class="nb">str</span><span class="p">(</span><span class="n">randomMode</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="s1">&#39;normal&#39;</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">commonMode</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">mu</span> <span class="o">=</span> <span class="p">(</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="mf">2.0</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">mu</span> <span class="o">=</span> <span class="n">commonMode</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">mu</span> <span class="o">=</span> <span class="p">(</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="mf">2.0</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">commonMode</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">sigma</span> <span class="o">=</span> <span class="p">(</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="mf">4.0</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">sigma</span> <span class="o">=</span> <span class="n">commonMode</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">sigma</span> <span class="o">=</span> <span class="p">(</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="mf">4.0</span>
                <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    <span class="n">notfound</span> <span class="o">=</span> <span class="kc">True</span> 
                    <span class="k">while</span> <span class="n">notfound</span><span class="p">:</span>
                        <span class="n">randeval</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">normalvariate</span><span class="p">(</span><span class="n">mu</span><span class="p">,</span><span class="n">sigma</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">randeval</span> <span class="o">&gt;=</span> <span class="n">commonScale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span>  <span class="n">randeval</span> <span class="o">&lt;=</span> <span class="n">commonScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                            <span class="n">notfound</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">randeval</span><span class="p">,</span><span class="n">digits</span><span class="p">)))</span>

            <span class="k">elif</span> <span class="nb">str</span><span class="p">(</span><span class="n">randomMode</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="s1">&#39;beta&#39;</span><span class="p">:</span>
                <span class="n">m</span> <span class="o">=</span> <span class="n">commonScale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">M</span> <span class="o">=</span> <span class="n">commonScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">commonMode</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">xm</span> <span class="o">=</span> <span class="mf">0.5</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">xm</span> <span class="o">=</span> <span class="n">commonMode</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                
                <span class="k">if</span> <span class="n">commonMode</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">xm</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">:</span>
                        <span class="n">beta</span> <span class="o">=</span> <span class="mf">2.0</span>
                        <span class="n">alpha</span> <span class="o">=</span> <span class="mf">1.0</span><span class="o">/</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">xm</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">alpha</span> <span class="o">=</span> <span class="mf">2.0</span>
                        <span class="n">beta</span> <span class="o">=</span> <span class="mf">1.0</span><span class="o">/</span><span class="n">xm</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">alpha</span> <span class="o">=</span> <span class="n">commonMode</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">beta</span> <span class="o">=</span> <span class="n">commonMode</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;alpha,beta&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="p">,</span><span class="n">beta</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    <span class="n">u</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">betavariate</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span><span class="n">beta</span><span class="p">)</span>
                    <span class="n">randeval</span> <span class="o">=</span> <span class="p">(</span><span class="n">u</span> <span class="o">*</span> <span class="p">(</span><span class="n">M</span><span class="o">-</span><span class="n">m</span><span class="p">))</span> <span class="o">+</span> <span class="n">m</span>
                    <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">randeval</span><span class="p">,</span><span class="n">digits</span><span class="p">)))</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;xm,alpha,beta,u,m,M,randeval&#39;</span><span class="p">,</span><span class="n">xm</span><span class="p">,</span><span class="n">alpha</span><span class="p">,</span><span class="n">beta</span><span class="p">,</span><span class="n">u</span><span class="p">,</span><span class="n">m</span><span class="p">,</span><span class="n">M</span><span class="p">,</span><span class="n">randeval</span><span class="p">)</span>
                    
        <span class="c1"># install self object attributes</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">criteriaWeightMode</span> <span class="o">=</span> <span class="n">weightMode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">criteria</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">evaluation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weightPreorder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeWeightPreorder</span><span class="p">()</span>


    <span class="k">def</span> <span class="nf">showAll</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Show fonction for performance tableau of full random outranking digraph.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*-------- show performance tableau -------*&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Name         :&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Actions      :&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Criteria     :&#39;</span><span class="p">)</span>       
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  criterion name:&#39;</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;, scale: &#39;</span><span class="p">,</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">],</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;, weight: </span><span class="si">%.3f</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  thresholds:&#39;</span><span class="p">,</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">])</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  evaluations generation mode: &#39;</span><span class="p">,</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;randomMode&#39;</span><span class="p">])</span>
            <span class="nb">print</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  Weights generation mode: &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteriaWeightMode</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  Weights preorder       : &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">weightPreorder</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Evaluations            :&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">evaluation</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">])</span>

<span class="k">class</span> <span class="nc">_RandomCoalitionsPerformanceTableau</span><span class="p">(</span><span class="n">PerformanceTableau</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Obsolete class definition. Please use the corresponding randomPerfTabs module class instead.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">numberOfActions</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">numberOfCriteria</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">weightDistribution</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">weightScale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">integerWeights</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">commonScale</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">commonThresholds</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">commonMode</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">valueDigits</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">Coalitions</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">VariableGenerators</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">OrdinalScales</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">RandomCoalitions</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="n">vetoProbability</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">Electre3</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        
        <span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span><span class="nn">random</span><span class="o">,</span><span class="nn">time</span><span class="o">,</span><span class="nn">math</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;randomCoalitionsPerfTab&#39;</span>
        <span class="c1"># randomizer init</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">RandomCoalitions</span><span class="p">:</span>
            <span class="n">Coalitions</span><span class="o">=</span><span class="kc">False</span>
        <span class="c1"># generate random actions</span>
        <span class="k">if</span> <span class="n">numberOfActions</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1">#numberOfActions = random.randint(10,31)</span>
            <span class="n">numberOfActions</span> <span class="o">=</span> <span class="mi">20</span>
        <span class="n">actionsIndex</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">numberOfActions</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">actionsIndex</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actionsIndex</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
                <span class="n">actionName</span> <span class="o">=</span> <span class="s1">&#39;a0&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">actionName</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
            <span class="n">actionsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">actionName</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;random decision action&#39;</span>
            <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;comment&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;RandomCoalitionsPerformanceTableau() generated.&#39;</span>
            <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;generators&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">actions</span>
        <span class="c1"># generate random criterialist</span>
        <span class="k">if</span> <span class="n">numberOfCriteria</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1">## numberOfCriteria = random.randint(5,21)</span>
            <span class="n">numberOfCriteria</span> <span class="o">=</span> <span class="mi">13</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">criteriaIndex</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">numberOfCriteria</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">criteriaIndex</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaIndex</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">g</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
                <span class="n">criterionName</span> <span class="o">=</span> <span class="s1">&#39;g0&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">criterionName</span> <span class="o">=</span> <span class="s1">&#39;g&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
            <span class="n">criteriaList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">criterionName</span><span class="p">)</span>
        <span class="c1"># generate random weights</span>
        <span class="k">if</span> <span class="n">weightDistribution</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1">## majorityWeight = numberOfCriteria + 1</span>
            <span class="c1">## #weightModesList = [(&#39;fixed&#39;,[1,1],1),(&#39;random&#39;,[1,3],2), (&#39;random&#39;,[1,numberOfCriteria],3),(&#39;fixed&#39;,[1,majorityWeight],4)]</span>
            <span class="c1">## weightModesList = [(&#39;fixed&#39;,[1,1],1),(&#39;random&#39;,[1,3],2), (&#39;random&#39;,[1,numberOfCriteria],3)]</span>
            <span class="c1">## weightMode = random.choice(weightModesList)</span>
            <span class="n">weightMode</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;equisignificant&#39;</span><span class="p">,(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">weightDistribution</span> <span class="o">=</span> <span class="n">weightMode</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">weightScale</span> <span class="o">=</span>  <span class="n">weightMode</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">weightMode</span><span class="o">=</span><span class="p">[</span><span class="n">weightDistribution</span><span class="p">,</span><span class="n">weightScale</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">weightDistribution</span> <span class="o">==</span> <span class="s1">&#39;random&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">weightScale</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">weightScale</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">numberOfCriteria</span><span class="p">)</span>
            <span class="n">weightsList</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">sumWeights</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="n">weightsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">weightScale</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">weightScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]))))</span>
                <span class="n">sumWeights</span> <span class="o">+=</span> <span class="n">weightsList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">weightsList</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">weightDistribution</span> <span class="o">==</span> <span class="s1">&#39;fixed&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">weightScale</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">weightScale</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">numberOfCriteria</span><span class="p">)</span>            
            <span class="n">weightsList</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">sumWeights</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">g</span> <span class="o">==</span> <span class="s1">&#39;g1&#39;</span><span class="p">:</span>
                    <span class="n">weightsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">weightScale</span><span class="p">[</span><span class="mi">1</span><span class="p">])))</span>
                    <span class="n">sumWeights</span> <span class="o">+=</span> <span class="n">weightScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">weightsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">weightScale</span><span class="p">[</span><span class="mi">0</span><span class="p">])))</span>
                    <span class="n">sumWeights</span> <span class="o">+=</span> <span class="n">weightScale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">weightsList</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">weightDistribution</span> <span class="o">==</span> <span class="s1">&#39;equisignificant&#39;</span>\
          <span class="ow">or</span> <span class="n">weightDistribution</span> <span class="o">==</span> <span class="s1">&#39;equiobjectives&#39;</span>\
          <span class="ow">or</span> <span class="n">weightDistribution</span> <span class="o">==</span> <span class="s1">&#39;equicoalitions&#39;</span><span class="p">:</span>
            <span class="n">weightScale</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>            
            <span class="n">weightsList</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">sumWeights</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">g</span> <span class="o">==</span> <span class="s1">&#39;g1&#39;</span><span class="p">:</span>
                    <span class="n">weightsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">weightScale</span><span class="p">[</span><span class="mi">1</span><span class="p">])))</span>
                    <span class="n">sumWeights</span> <span class="o">+=</span> <span class="n">weightScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">weightsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">weightScale</span><span class="p">[</span><span class="mi">0</span><span class="p">])))</span>
                    <span class="n">sumWeights</span> <span class="o">+=</span> <span class="n">weightScale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">weightsList</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;!!! Error: wrong criteria weight distribution mode: </span><span class="si">%s</span><span class="s1"> !!!!&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">weightDistribution</span><span class="p">))</span>

        <span class="c1"># generate criteria dictionary with random thresholds</span>
        <span class="k">if</span> <span class="n">commonScale</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">commonScale</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">100.0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Coalitions</span><span class="p">:</span>
            <span class="n">criterionCoalitionsList</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span><span class="kc">None</span><span class="p">),(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span><span class="kc">None</span><span class="p">),(</span><span class="s1">&#39;C&#39;</span><span class="p">,</span><span class="kc">None</span><span class="p">)]</span>
        <span class="k">elif</span> <span class="n">RandomCoalitions</span><span class="p">:</span>
            <span class="nb">bin</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">nbrcrit</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">criteriaList</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nbrcrit</span><span class="p">):</span>
                <span class="nb">bin</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nbrcrit</span><span class="p">):</span>
                <span class="n">p</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">nbrcrit</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                <span class="nb">bin</span><span class="p">[</span><span class="n">p</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">partition</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nbrcrit</span><span class="p">):</span>
                <span class="n">ni</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">bin</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">ni</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">partition</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">ni</span><span class="p">,</span><span class="nb">bin</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
            <span class="n">partition</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">criterionCoalitionsList</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">partition</span><span class="p">)):</span>
                <span class="n">criterionCoalitionsList</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="nb">chr</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">)</span><span class="o">+</span><span class="n">i</span><span class="p">),</span><span class="n">partition</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
            <span class="n">Coalitions</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">criterionCoalitionsList</span><span class="p">)</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">gi</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">criteriaList</span><span class="p">)):</span>
            <span class="n">g</span> <span class="o">=</span> <span class="n">criteriaList</span><span class="p">[</span><span class="n">gi</span><span class="p">]</span>
            <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="n">RandomCoalitions</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">criterionCoalition</span> <span class="ow">in</span> <span class="n">criterionCoalitionsList</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criterionCoalition</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                        <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;coalition&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">criterionCoalition</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;==&gt;&gt;&gt;&#39;</span><span class="p">,</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;coalition&#39;</span><span class="p">])</span>
            <span class="k">elif</span> <span class="n">Coalitions</span><span class="p">:</span>
                <span class="n">criterionCoalition</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">criterionCoalitionsList</span><span class="p">)</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;coalition&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">criterionCoalition</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;max&#39;</span>           
            <span class="k">if</span> <span class="n">Coalitions</span><span class="p">:</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;random criterion of coalition </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;coalition&#39;</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;random criterion&#39;</span>            
            <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">commonThresholds</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>        
                <span class="c1">## thresholds = []</span>
                <span class="c1">## thresholds.append((round(random.uniform(0.0,commonScale[1]/5.0),valueDigits),0.0))</span>
                <span class="c1">## thresholds.append((round(random.uniform(thresholds[0][0],commonScale[1]/3.0),valueDigits),0.0))</span>
                <span class="c1">## thresholds.append((round(random.uniform(commonScale[1]*2.0/3.0,commonScale[1]),valueDigits),0.0))</span>
                <span class="c1">## thresholds.append((round(random.uniform(thresholds[2][0],commonScale[1]),valueDigits),0.0))</span>
                
                <span class="k">if</span> <span class="n">OrdinalScales</span><span class="p">:</span>
                    <span class="n">thresholds</span> <span class="o">=</span> <span class="p">[(</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">),(</span><span class="mf">2.001</span><span class="p">,</span><span class="mf">0.0</span><span class="p">),(</span><span class="mf">8.001</span><span class="p">,</span><span class="mf">0.0</span><span class="p">)]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">span</span> <span class="o">=</span> <span class="n">commonScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">commonScale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">thresholds</span> <span class="o">=</span> <span class="p">[(</span><span class="mf">0.05001</span><span class="o">*</span><span class="n">span</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mf">0.10001</span><span class="o">*</span><span class="n">span</span><span class="p">,</span><span class="mf">0.0</span><span class="p">),(</span><span class="mf">0.60001</span><span class="o">*</span><span class="n">span</span><span class="p">,</span><span class="mf">0.0</span><span class="p">)]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">thresholds</span> <span class="o">=</span> <span class="n">commonThresholds</span>
            <span class="c1">## print thresholds</span>
            <span class="k">if</span> <span class="n">Electre3</span><span class="p">:</span>
                <span class="n">thitems</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ind&#39;</span><span class="p">,</span><span class="s1">&#39;pref&#39;</span><span class="p">,</span><span class="s1">&#39;veto&#39;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">thitems</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ind&#39;</span><span class="p">,</span><span class="s1">&#39;pref&#39;</span><span class="p">,</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">,</span><span class="s1">&#39;veto&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">vetoProbability</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">randVeto</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">randVeto</span> <span class="o">&gt;</span> <span class="n">vetoProbability</span><span class="p">:</span>
                    <span class="n">thitems</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ind&#39;</span><span class="p">,</span><span class="s1">&#39;pref&#39;</span><span class="p">]</span>
            <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">thitems</span><span class="p">)):</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="n">thitems</span><span class="p">[</span><span class="n">t</span><span class="p">]]</span> <span class="o">=</span>\
                   <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">thresholds</span><span class="p">[</span><span class="n">t</span><span class="p">][</span><span class="mi">0</span><span class="p">])),</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">thresholds</span><span class="p">[</span><span class="n">t</span><span class="p">][</span><span class="mi">1</span><span class="p">])))</span>
                
            <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">commonScale</span>
            <span class="k">if</span> <span class="n">integerWeights</span><span class="p">:</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">weightsList</span><span class="p">[</span><span class="n">gi</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">weightsList</span><span class="p">[</span><span class="n">gi</span><span class="p">]</span> <span class="o">/</span> <span class="n">sumWeights</span>

        <span class="c1"># determine equisignificant coalitions</span>
        <span class="n">coalitionsCardinality</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">gi</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">criteriaList</span><span class="p">)):</span>
            <span class="n">g</span> <span class="o">=</span> <span class="n">criteriaList</span><span class="p">[</span><span class="n">gi</span><span class="p">]</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">coalitionsCardinality</span><span class="p">[</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;coalition&#39;</span><span class="p">]]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">coalitionsCardinality</span><span class="p">[</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;coalition&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">coalitionsCardinality</span><span class="p">)</span>
        <span class="n">weightsProduct</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">coalition</span> <span class="ow">in</span> <span class="n">coalitionsCardinality</span><span class="p">:</span>
            <span class="n">weightsProduct</span> <span class="o">*=</span> <span class="n">coalitionsCardinality</span><span class="p">[</span><span class="n">coalition</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">weightsProduct</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">weightDistribution</span> <span class="o">==</span> <span class="s1">&#39;equicoalitions&#39;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">gi</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">criteriaList</span><span class="p">)):</span>
                <span class="n">g</span> <span class="o">=</span> <span class="n">criteriaList</span><span class="p">[</span><span class="n">gi</span><span class="p">]</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">=</span>\
                    <span class="n">weightsProduct</span> <span class="o">//</span> <span class="n">coalitionsCardinality</span><span class="p">[</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;coalition&#39;</span><span class="p">]]</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
                
        <span class="c1"># allocate (criterion,action) to coalition supporting type</span>
        <span class="k">if</span> <span class="n">Coalitions</span><span class="p">:</span>
            <span class="n">coalitionSupportingType</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;+&#39;</span><span class="p">,</span><span class="s1">&#39;~&#39;</span><span class="p">,</span><span class="s1">&#39;-&#39;</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criterionCoalitionsList</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">criterionCoalitionsList</span><span class="p">,</span><span class="n">c</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span><span class="o">=</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">coalitionSupportingType</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span>\
                        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">])])</span>                
                    
        <span class="c1"># generate evaluations</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
            <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="n">commonMode</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1">#randomMode = random.choice(randomLawsList)</span>
                <span class="n">randomMode</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;triangular&#39;</span><span class="p">,</span><span class="mf">50.0</span><span class="p">,</span><span class="mf">0.50</span><span class="p">]</span>               
            <span class="k">else</span><span class="p">:</span>
                <span class="n">randomMode</span> <span class="o">=</span> <span class="n">commonMode</span>
            <span class="k">if</span> <span class="n">randomMode</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;uniform&#39;</span><span class="p">:</span>
                <span class="n">randomMode</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">commonScale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">randomMode</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">commonScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                
            <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;randomMode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">randomMode</span>
            <span class="k">if</span> <span class="n">Coalitions</span><span class="p">:</span>
                <span class="n">commentString</span> <span class="o">=</span> <span class="s1">&#39;Variable &#39;</span><span class="o">+</span><span class="n">randomMode</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="p">(</span><span class="s1">&#39; performance generator with random low (-), medium (~) or high (+) parameters.&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">randomMode</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;triangular&#39;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">VariableGenerators</span><span class="p">:</span>
                        <span class="n">commentString</span> <span class="o">=</span> <span class="s1">&#39;triangular law with variable mode (m) and probability repartition (p).&#39;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">commentString</span> <span class="o">=</span> <span class="s1">&#39;triangular law with constant mode (m) and probability repartition (p).&#39;</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">VariableGenerators</span><span class="p">:</span>
                        <span class="n">commentString</span> <span class="o">=</span> <span class="s1">&#39;Variable &#39;</span><span class="o">+</span><span class="n">randomMode</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="p">(</span><span class="s1">&#39; law with randomly chosen low, medium or high parameters.&#39;</span><span class="p">)</span>
                    <span class="c1">## elif Coalitions:</span>
                    <span class="c1">##     commentString = &#39;Coalition : %s &#39; % (criteria[g][&#39;coalition&#39;])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">commentString</span> <span class="o">=</span> <span class="s1">&#39;Constant &#39;</span><span class="o">+</span><span class="n">randomMode</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="p">(</span><span class="s1">&#39; law with parameters = </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">randomMode</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span><span class="nb">str</span><span class="p">(</span><span class="n">randomMode</span><span class="p">[</span><span class="mi">2</span><span class="p">])))</span>
                    
            <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;comment&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">commentString</span>
            <span class="n">digits</span> <span class="o">=</span> <span class="n">valueDigits</span>
            
            <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">randomMode</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="s1">&#39;uniform&#39;</span><span class="p">:</span>          
                <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    
                    <span class="k">if</span> <span class="n">VariableGenerators</span><span class="p">:</span>
                        <span class="n">randomRangesList</span> <span class="o">=</span> <span class="p">[(</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="p">(</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="mf">0.3</span><span class="o">*</span><span class="p">(</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">0</span><span class="p">])),</span> <span class="p">(</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="mf">0.7</span><span class="o">*</span><span class="p">(</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">commonScale</span><span class="p">[</span><span class="mi">0</span><span class="p">]))]</span>
                        <span class="n">randomRange</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">randomRangesList</span><span class="p">)</span>         
                        <span class="n">randeval</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">randomRange</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">randomRange</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">randomRange</span> <span class="o">=</span> <span class="p">(</span><span class="n">randomMode</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">randomMode</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> 
                        <span class="n">randeval</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">randomMode</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">randomMode</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="s1">&#39;generators&#39;</span><span class="p">][</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">randomMode</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">randomRange</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">OrdinalScales</span><span class="p">:</span>
                        <span class="n">randeval</span> <span class="o">/=</span> <span class="mf">10.0</span>
                        <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span>
                            <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">randeval</span><span class="p">,</span><span class="mi">0</span><span class="p">)))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="o">-</span><span class="nb">round</span><span class="p">(</span><span class="n">randeval</span><span class="p">,</span><span class="mi">0</span><span class="p">)))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span>
                            <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">randeval</span><span class="p">,</span><span class="n">digits</span><span class="p">)))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="o">-</span><span class="nb">round</span><span class="p">(</span><span class="n">randeval</span><span class="p">,</span><span class="n">digits</span><span class="p">)))</span>

            <span class="k">elif</span> <span class="nb">str</span><span class="p">(</span><span class="n">randomMode</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="s1">&#39;beta&#39;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    <span class="n">m</span> <span class="o">=</span> <span class="n">commonScale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">M</span> <span class="o">=</span> <span class="n">commonScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">Coalitions</span><span class="p">:</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;coalition&#39;</span><span class="p">]]</span> <span class="o">==</span> <span class="s1">&#39;+&#39;</span><span class="p">:</span>
                            <span class="c1"># mode = 75, stdev = 15</span>
                            <span class="c1">#xm = 75</span>
                            <span class="n">alpha</span> <span class="o">=</span> <span class="mf">5.8661</span>
                            <span class="n">beta</span> <span class="o">=</span> <span class="mf">2.62203</span>
                        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;coalition&#39;</span><span class="p">]]</span> <span class="o">==</span> <span class="s1">&#39;~&#39;</span><span class="p">:</span>
                            <span class="c1"># nmode = 50, stdev = 15</span>
                            <span class="c1">#xm = 50</span>
                            <span class="n">alpha</span> <span class="o">=</span> <span class="mf">5.05556</span>
                            <span class="n">beta</span> <span class="o">=</span> <span class="mf">5.05556</span>
                        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;coalition&#39;</span><span class="p">]]</span> <span class="o">==</span> <span class="s1">&#39;-&#39;</span><span class="p">:</span>
                            <span class="c1"># mode = 25, stdev = 15</span>
                            <span class="c1"># xm = 25</span>
                            <span class="n">alpha</span> <span class="o">=</span> <span class="mf">2.62203</span>
                            <span class="n">beta</span> <span class="o">=</span> <span class="mf">5.8661</span>                         
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">VariableGenerators</span><span class="p">:</span>
                            <span class="n">randomModesList</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.3</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.7</span><span class="p">]</span>
                            <span class="n">xm</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">randomModesList</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">xm</span> <span class="o">=</span> <span class="n">randomMode</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">xm</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">:</span>
                            <span class="n">beta</span> <span class="o">=</span> <span class="mf">2.0</span>
                            <span class="n">alpha</span> <span class="o">=</span> <span class="mf">1.0</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">xm</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">alpha</span> <span class="o">=</span> <span class="mf">2.0</span>
                            <span class="n">beta</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">xm</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;alpha,beta&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="p">,</span><span class="n">beta</span><span class="p">)</span>
                    <span class="n">u</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">betavariate</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span><span class="n">beta</span><span class="p">)</span>
                    <span class="n">randeval</span> <span class="o">=</span> <span class="p">(</span><span class="n">u</span> <span class="o">*</span> <span class="p">(</span><span class="n">M</span><span class="o">-</span><span class="n">m</span><span class="p">))</span> <span class="o">+</span> <span class="n">m</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;xm,alpha,beta,u,m,M,randeval&#39;</span><span class="p">,</span><span class="n">xm</span><span class="p">,</span><span class="n">alpha</span><span class="p">,</span><span class="n">beta</span><span class="p">,</span><span class="n">u</span><span class="p">,</span><span class="n">m</span><span class="p">,</span><span class="n">M</span><span class="p">,</span><span class="n">randeval</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="s1">&#39;generators&#39;</span><span class="p">][</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;beta&#39;</span><span class="p">,</span><span class="n">alpha</span><span class="p">,</span><span class="n">beta</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">OrdinalScales</span><span class="p">:</span>
                        <span class="n">randeval</span> <span class="o">/=</span> <span class="mf">10.0</span>
                        <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span>
                            <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">randeval</span><span class="p">,</span><span class="mi">0</span><span class="p">)))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="o">-</span><span class="nb">round</span><span class="p">(</span><span class="n">randeval</span><span class="p">,</span><span class="mi">0</span><span class="p">)))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span>
                            <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">randeval</span><span class="p">,</span><span class="n">digits</span><span class="p">)))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="o">-</span><span class="nb">round</span><span class="p">(</span><span class="n">randeval</span><span class="p">,</span><span class="n">digits</span><span class="p">)))</span>
    
            <span class="k">elif</span> <span class="nb">str</span><span class="p">(</span><span class="n">randomMode</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="s1">&#39;triangular&#39;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    <span class="n">m</span> <span class="o">=</span> <span class="n">commonScale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">M</span> <span class="o">=</span> <span class="n">commonScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">VariableGenerators</span><span class="p">:</span>
                        <span class="n">randomModesList</span> <span class="o">=</span> <span class="p">[</span><span class="mf">30.0</span><span class="p">,</span><span class="mf">50.0</span><span class="p">,</span><span class="mf">70.0</span><span class="p">]</span>
                        <span class="n">xm</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">randomModesList</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">xm</span> <span class="o">=</span> <span class="n">randomMode</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">r</span>  <span class="o">=</span> <span class="n">randomMode</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="s1">&#39;generators&#39;</span><span class="p">][</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">randomMode</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">xm</span><span class="p">,</span><span class="n">r</span><span class="p">)</span>
                    <span class="n">u</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
                    <span class="c1">#print &#39;m,xm,M,r,u&#39;, m,xm,M,r,u </span>
                    <span class="k">if</span> <span class="n">u</span> <span class="o">&lt;</span> <span class="n">r</span><span class="p">:</span>
                        <span class="c1">#randeval = m + (math.sqrt(r*u*(m-xm)**2))/r</span>
                        <span class="n">randeval</span> <span class="o">=</span> <span class="n">m</span> <span class="o">+</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">u</span><span class="o">/</span><span class="n">r</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">xm</span><span class="o">-</span><span class="n">m</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1">#randeval = (M*r - M + math.sqrt((-1+r)*(-1+u)*(M-xm)**2))/(-1+r)</span>
                        <span class="n">randeval</span> <span class="o">=</span> <span class="n">M</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="mi">1</span><span class="o">-</span><span class="n">u</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">r</span><span class="p">))</span><span class="o">*</span><span class="p">(</span><span class="n">M</span><span class="o">-</span><span class="n">xm</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">OrdinalScales</span><span class="p">:</span>
                        <span class="n">randeval</span> <span class="o">/=</span> <span class="mf">10.0</span>
                        <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span>
                            <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">randeval</span><span class="p">,</span><span class="mi">0</span><span class="p">)))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="o">-</span><span class="nb">round</span><span class="p">(</span><span class="n">randeval</span><span class="p">,</span><span class="mi">0</span><span class="p">)))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span>
                            <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">randeval</span><span class="p">,</span><span class="n">digits</span><span class="p">)))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="o">-</span><span class="nb">round</span><span class="p">(</span><span class="n">randeval</span><span class="p">,</span><span class="n">digits</span><span class="p">)))</span>
                   
                    <span class="c1">#print randeval, criteria[g][&#39;preferenceDirection&#39;], evaluation[g][a]</span>

     
            <span class="c1">## elif str(randomMode[0]) == &#39;normal&#39;:</span>
            <span class="c1">##     mu = randomMode[1]</span>
            <span class="c1">##     sigma = randomMode[2]</span>
            <span class="c1">##     for a in actionsList:</span>
            <span class="c1">##         notfound = True </span>
            <span class="c1">##         while notfound:</span>
            <span class="c1">##             randeval = random.normalvariate(mu,sigma)</span>
            <span class="c1">##             if randeval &gt;= commonScale[0] and  randeval &lt;= commonScale[1]:</span>
            <span class="c1">##                 notfound = False</span>
            <span class="c1">##         evaluation[g][a] = Decimal(str(round(randeval,digits)))</span>
        <span class="c1"># install self object attributes</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">criteriaWeightMode</span> <span class="o">=</span> <span class="n">weightMode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">criteria</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">evaluation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weightPreorder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeWeightPreorder</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">_RandomS3PerformanceTableau</span><span class="p">(</span><span class="n">_RandomCoalitionsPerformanceTableau</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Obsolete dummy class for backports.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<span class="k">class</span> <span class="nc">_RandomCBPerformanceTableau</span><span class="p">(</span><span class="n">PerformanceTableau</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Obsolete class definition. Please use the corresponding randomPerfTabs module class instead.</span>
<span class="sd">    &quot;&quot;&quot;</span>


    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">numberOfActions</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> \
                 <span class="n">numberOfCriteria</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> \
                 <span class="n">weightDistribution</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">weightScale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>\
                 <span class="n">integerWeights</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                 <span class="n">commonScale</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">commonThresholds</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>\
                 <span class="n">commonPercentiles</span><span class="o">=</span> <span class="kc">None</span><span class="p">,</span>\
                 <span class="n">commonMode</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>\
                 <span class="n">valueDigits</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructor for RadomCBPerformanceTableau instances.</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span><span class="nn">random</span><span class="o">,</span><span class="nn">time</span><span class="o">,</span><span class="nn">math</span><span class="o">,</span><span class="nn">copy</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;randomCBperftab&#39;</span>
        <span class="c1"># randomizer init</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
        <span class="c1"># generate random actions</span>
        <span class="k">if</span> <span class="n">numberOfActions</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">numberOfActions</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">31</span><span class="p">)</span>
        <span class="n">actionsIndex</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">numberOfActions</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">actionsIndex</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actionsIndex</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
                <span class="n">actionName</span> <span class="o">=</span> <span class="s1">&#39;a0&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">actionName</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
            <span class="n">actionsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">actionName</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">actionsTypesList</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;cheap&#39;</span><span class="p">,</span><span class="s1">&#39;neutral&#39;</span><span class="p">,</span><span class="s1">&#39;advantageous&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">actionsTypesList</span><span class="p">)</span>
            <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;random </span><span class="si">%s</span><span class="s1"> decision action&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;type&#39;</span><span class="p">])</span>
            <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;comment&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;RandomCBPerformanceTableau() generated.&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">actions</span>

        <span class="c1"># generate random criterialist</span>
        <span class="k">if</span> <span class="n">numberOfCriteria</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">numberOfCriteria</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">21</span><span class="p">)</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">criteriaIndex</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">numberOfCriteria</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">criteriaIndex</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaIndex</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">g</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
                <span class="n">criterionName</span> <span class="o">=</span> <span class="s1">&#39;g0&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">criterionName</span> <span class="o">=</span> <span class="s1">&#39;g&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
            <span class="n">criteriaList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">criterionName</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">criteriaList</span><span class="p">)</span>
            
        <span class="c1"># generate criteria dictionary</span>
        <span class="c1">## if commonScale == None:</span>
        <span class="c1">##     commonScale = (0.0,100.0)</span>
        <span class="n">criterionTypesList</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">,</span><span class="s1">&#39;max&#39;</span><span class="p">,</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">minScaleTypesList</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;cardinal&#39;</span><span class="p">,</span><span class="s1">&#39;cardinal&#39;</span><span class="p">,</span><span class="s1">&#39;cardinal&#39;</span><span class="p">,</span><span class="s1">&#39;ordinal&#39;</span><span class="p">]</span>
        <span class="n">maxScaleTypesList</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ordinal&#39;</span><span class="p">,</span><span class="s1">&#39;ordinal&#39;</span><span class="p">,</span><span class="s1">&#39;cardinal&#39;</span><span class="p">]</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">criterionTypeCounter</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">}</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
            <span class="c1">#criterionScale = commonScale</span>
            <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">criterionType</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">criterionTypesList</span><span class="p">)</span>
            <span class="n">criterionTypeCounter</span><span class="p">[</span><span class="n">criterionType</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">criterionType</span>
            <span class="k">if</span> <span class="n">criterionType</span> <span class="o">==</span> <span class="s1">&#39;min&#39;</span><span class="p">:</span>
                <span class="n">scaleType</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">minScaleTypesList</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">scaleType</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">maxScaleTypesList</span><span class="p">)</span>
            <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scaleType&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">scaleType</span>
            <span class="k">if</span> <span class="n">criterionType</span> <span class="o">==</span> <span class="s1">&#39;min&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">scaleType</span> <span class="o">==</span> <span class="s1">&#39;ordinal&#39;</span><span class="p">:</span>
                    <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;random ordinal cost criterion&#39;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;random cardinal cost criterion&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">scaleType</span> <span class="o">==</span> <span class="s1">&#39;ordinal&#39;</span><span class="p">:</span>
                    <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;random ordinal benefit criterion&#39;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;random cardinal benefit criterion&#39;</span>
            <span class="c1">## t = time.time()</span>
            <span class="c1">## random.seed(t)</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;g, criteria[g][&#39;scaleType&#39;], criteria[g][&#39;scale&#39;]&quot;</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scaleType&#39;</span><span class="p">],</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>

            <span class="c1"># commonScale parameter is obsolete</span>
            <span class="n">commonScale</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scaleType&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;cardinal&#39;</span><span class="p">:</span>
                <span class="c1">#if commonScale == None:</span>
                <span class="n">criterionScale</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">)</span>
                <span class="c1">## criteria[g][&#39;scale&#39;] = criterionScale      </span>
            <span class="k">elif</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scaleType&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;ordinal&#39;</span><span class="p">:</span>
                <span class="c1">## if Debug:</span>
                <span class="c1">##     print commonScale</span>
                <span class="c1">## if commonScale == None:</span>
                <span class="c1">##     criterionScale = (0, 10)</span>
                <span class="c1">## else:</span>
                <span class="n">criterionScale</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">criterionScale</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">)</span>
            <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">criterionScale</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">])</span>

        <span class="c1"># generate random weights</span>
        <span class="k">if</span> <span class="n">weightDistribution</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1">## weightDistribution = &#39;equiobjectives&#39;</span>
            <span class="n">weightDistribution</span> <span class="o">=</span> <span class="s1">&#39;fixed&#39;</span>
            <span class="n">weightScale</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">weightMode</span><span class="o">=</span><span class="p">[</span><span class="n">weightDistribution</span><span class="p">,</span><span class="n">weightScale</span><span class="p">]</span>
            <span class="c1">## majorityWeight = numberOfCriteria + 1</span>
            <span class="c1">## #weightModesList = [(&#39;fixed&#39;,[1,1],1),(&#39;random&#39;,[1,3],2), (&#39;random&#39;,[1,numberOfCriteria],3),(&#39;fixed&#39;,[1,majorityWeight],4)]</span>
            <span class="c1">## weightModesList = [(&#39;fixed&#39;,[1,1],1),(&#39;random&#39;,[1,3],2), (&#39;random&#39;,[1,numberOfCriteria],3),(&#39;balanced&#39;,[1,1],4)]</span>
            <span class="c1">## weightMode = random.choice(weightModesList)</span>
            <span class="c1">## weightDistribution = weightMode[0]</span>
            <span class="c1">## weightScale =  weightMode[1]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">weightScale</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">weightScale</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">numberOfCriteria</span><span class="p">)</span>
            <span class="n">weightMode</span><span class="o">=</span><span class="p">[</span><span class="n">weightDistribution</span><span class="p">,</span><span class="n">weightScale</span><span class="p">]</span>
            
        <span class="k">if</span> <span class="n">weightDistribution</span> <span class="o">==</span> <span class="s1">&#39;random&#39;</span><span class="p">:</span>
            <span class="n">weightsList</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">sumWeights</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="n">weightsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">weightScale</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">weightScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]))))</span>
                <span class="n">sumWeights</span> <span class="o">+=</span> <span class="n">weightsList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">weightsList</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">weightDistribution</span> <span class="o">==</span> <span class="s1">&#39;fixed&#39;</span><span class="p">:</span>
            <span class="n">weightsList</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">sumWeights</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">g</span> <span class="o">==</span> <span class="s1">&#39;g1&#39;</span><span class="p">:</span>
                    <span class="n">weightsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">weightScale</span><span class="p">[</span><span class="mi">1</span><span class="p">])))</span>
                    <span class="n">sumWeights</span> <span class="o">+=</span> <span class="n">weightScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">weightsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">weightScale</span><span class="p">[</span><span class="mi">0</span><span class="p">])))</span>
                    <span class="n">sumWeights</span> <span class="o">+=</span> <span class="n">weightScale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">weightsList</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">weightDistribution</span> <span class="o">==</span> <span class="s1">&#39;equisignificant&#39;</span><span class="p">:</span>
            <span class="n">weightScale</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">weightMode</span><span class="o">=</span><span class="p">[</span><span class="n">weightDistribution</span><span class="p">,</span><span class="n">weightScale</span><span class="p">]</span>
            <span class="n">weightsList</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">sumWeights</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">g</span> <span class="o">==</span> <span class="s1">&#39;g1&#39;</span><span class="p">:</span>
                    <span class="n">weightsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">weightScale</span><span class="p">[</span><span class="mi">1</span><span class="p">])))</span>
                    <span class="n">sumWeights</span> <span class="o">+=</span> <span class="n">weightScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">weightsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">weightScale</span><span class="p">[</span><span class="mi">0</span><span class="p">])))</span>
                    <span class="n">sumWeights</span> <span class="o">+=</span> <span class="n">weightScale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">weightsList</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">weightDistribution</span> <span class="o">==</span> <span class="s1">&#39;equiobjectives&#39;</span><span class="p">:</span>
            <span class="n">weightScale</span> <span class="o">=</span> <span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">criterionTypeCounter</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]),</span><span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">criterionTypeCounter</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]))</span>
            <span class="n">weightMode</span><span class="o">=</span><span class="p">[</span><span class="n">weightDistribution</span><span class="p">,</span><span class="n">weightScale</span><span class="p">]</span>
            <span class="n">weightsList</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">sumWeights</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;min&#39;</span><span class="p">:</span>
                    <span class="n">weightsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">weightScale</span><span class="p">[</span><span class="mi">1</span><span class="p">])))</span>
                    <span class="n">sumWeights</span> <span class="o">+=</span> <span class="n">weightScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">weightsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">weightScale</span><span class="p">[</span><span class="mi">0</span><span class="p">])))</span>
                    <span class="n">sumWeights</span> <span class="o">+=</span> <span class="n">weightScale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;!!! Error: wrong criteria weight distribution mode: </span><span class="si">%s</span><span class="s1"> !!!!&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">weightDistribution</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">weightsList</span><span class="p">,</span> <span class="n">sumWeights</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">g</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">criteriaList</span><span class="p">):</span>
            <span class="c1">## if Debug:</span>
            <span class="c1">##     print &#39;criterionScale = &#39;, criterionScale</span>
            <span class="k">if</span> <span class="n">integerWeights</span><span class="p">:</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">weightsList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">weightsList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/</span> <span class="n">sumWeights</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">])</span>

        <span class="c1"># generate random evaluations</span>
        <span class="c1">## x30=criterionScale[1]*0.3</span>
        <span class="c1">## x50=criterionScale[1]*0.5</span>
        <span class="c1">## x70=criterionScale[1]*0.7</span>
        <span class="c1">## if Debug:</span>
        <span class="c1">##     print &#39;g, x30,x50,x70&#39;, g, x30,x50,x70</span>
        <span class="c1">## randomLawsList = [[&#39;uniform&#39;,criterionScale[0],criterionScale[1]],</span>
        <span class="c1">##                   (&#39;triangular&#39;,x30,0.33),(&#39;triangular&#39;,x30,0.50),(&#39;triangular&#39;,x30,0.75),</span>
        <span class="c1">##                   (&#39;triangular&#39;,x50,0.33),(&#39;triangular&#39;,x50,0.50),(&#39;triangular&#39;,x50,0.75),</span>
        <span class="c1">##                   (&#39;triangular&#39;,x70,0.33),(&#39;triangular&#39;,x70,0.50),(&#39;triangular&#39;,x70,0.75),</span>
        <span class="c1">##                   (&#39;normal&#39;,x30,20.0),(&#39;normal&#39;,x30,25.0),(&#39;normal&#39;,x30,30.0),</span>
        <span class="c1">##                   (&#39;normal&#39;,x50,20.0),(&#39;normal&#39;,x50,25.0),(&#39;normal&#39;,x50,30.0),</span>
        <span class="c1">##                   (&#39;normal&#39;,x70,20.0),(&#39;normal&#39;,x70,25.0),(&#39;normal&#39;,x70,30.0)]</span>
        
        <span class="n">evaluation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
            <span class="n">criterionScale</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span>
            <span class="n">amplitude</span> <span class="o">=</span> <span class="n">criterionScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">criterionScale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">x30</span><span class="o">=</span><span class="n">criterionScale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">amplitude</span><span class="o">*</span><span class="mf">0.3</span>
            <span class="n">x50</span><span class="o">=</span><span class="n">criterionScale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">amplitude</span><span class="o">*</span><span class="mf">0.5</span>
            <span class="n">x70</span><span class="o">=</span><span class="n">criterionScale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">amplitude</span><span class="o">*</span><span class="mf">0.7</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;g, criterionx30,x50,x70&#39;</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">],</span> <span class="n">x30</span><span class="p">,</span><span class="n">x50</span><span class="p">,</span><span class="n">x70</span><span class="p">)</span>
            <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="n">commonMode</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1">#randomMode = random.choice(randomLawsList)</span>
                <span class="n">randomMode</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;triangular&#39;</span><span class="p">,</span><span class="n">x50</span><span class="p">,</span><span class="mf">0.50</span><span class="p">]</span>               
            <span class="k">elif</span> <span class="n">commonMode</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1">#randomMode = random.choice(randomLawsList)</span>
                <span class="n">randomMode</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;triangular&#39;</span><span class="p">,</span><span class="n">x50</span><span class="p">,</span><span class="mf">0.50</span><span class="p">]</span>               
            <span class="k">else</span><span class="p">:</span>
                <span class="n">randomMode</span> <span class="o">=</span> <span class="n">commonMode</span>
            <span class="k">if</span> <span class="n">randomMode</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;uniform&#39;</span><span class="p">:</span>
                <span class="n">randomMode</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">criterionScale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">randomMode</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">criterionScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;randomMode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">randomMode</span>
            <span class="k">if</span> <span class="n">randomMode</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;triangular&#39;</span><span class="p">:</span>
                <span class="n">commentString</span> <span class="o">=</span> <span class="s1">&#39;triangular law with variable mode (m) and probability repartition (p = 0.5). Cheap actions: m = 30%; neutral actions: m = 50%; advantageous actions: m = 70%.&#39;</span>
            <span class="k">elif</span> <span class="n">randomMode</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;normal&#39;</span><span class="p">:</span>
                <span class="n">commentString</span> <span class="o">=</span> <span class="s1">&#39;truncated normal law with variable mean (mu) and standard deviation (stdev = 20%). Cheap actions: mu = 30%; neutral actions: mu = 50%; advantageous actions: mu = 70%.&#39;</span>
            <span class="k">elif</span> <span class="n">randomMode</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;beta&#39;</span><span class="p">:</span>
                <span class="n">commentString</span> <span class="o">=</span> <span class="s1">&#39;beta law with variable mode xm and standard deviation (stdev = 15%). Cheap actions: xm = 30%; neutral actions: xm = 50%; advantageous actions: xm = 70%.&#39;</span>

            <span class="c1">## else:</span>
            <span class="c1">##     if randomMode[1] != None and randomMode[2] != None:</span>
            <span class="c1">##         commentString = randomMode[0]+&#39;, %.2f, %.2f&#39; % (float(randomMode[1]),float(randomMode[2]))</span>
            <span class="c1">##     elif randomMode[1] != None and randomMode[2] == None:</span>
            <span class="c1">##         commentString = randomMode[0]+&#39;, %.2f, default&#39; % (float(randomMode[1]))</span>
            <span class="c1">##     elif randomMode[1] == None and randomMode[2] != None:</span>
            <span class="c1">##         commentString = randomMode[0]+&#39;, default, %.2f&#39; % (float(randomMode[2]))</span>
            <span class="c1">##     else:</span>
            <span class="c1">##         commentString = randomMode[0]+&#39;, default, default&#39;</span>
                    
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;commonMode = &#39;</span><span class="p">,</span> <span class="n">commonMode</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;randomMode = &#39;</span><span class="p">,</span> <span class="n">randomMode</span><span class="p">)</span>
                   
            <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;comment&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Evaluation generator: &#39;</span> <span class="o">+</span> <span class="n">commentString</span>
            <span class="n">digits</span> <span class="o">=</span> <span class="n">valueDigits</span>
            <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">randomMode</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="s1">&#39;uniform&#39;</span><span class="p">:</span>          
                <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    <span class="n">randeval</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">criterionScale</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">criterionScale</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                    <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span>
                        <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">randeval</span><span class="p">,</span><span class="n">digits</span><span class="p">)))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="o">-</span><span class="nb">round</span><span class="p">(</span><span class="n">randeval</span><span class="p">,</span><span class="n">digits</span><span class="p">)))</span>
            <span class="k">elif</span> <span class="nb">str</span><span class="p">(</span><span class="n">randomMode</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="s1">&#39;triangular&#39;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    <span class="n">m</span> <span class="o">=</span> <span class="n">criterionScale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">M</span> <span class="o">=</span> <span class="n">criterionScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="c1">#r  = randomMode[2]</span>
                    <span class="c1">#xm = randomMode[1]</span>
                    <span class="k">if</span> <span class="n">actions</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;advantageous&#39;</span><span class="p">:</span>
                        <span class="n">xm</span> <span class="o">=</span> <span class="n">x70</span>
                        <span class="n">r</span> <span class="o">=</span> <span class="mf">0.50</span>
                    <span class="k">elif</span> <span class="n">actions</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;cheap&#39;</span><span class="p">:</span>
                        <span class="n">xm</span> <span class="o">=</span> <span class="n">x30</span>
                        <span class="n">r</span> <span class="o">=</span> <span class="mf">0.50</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">xm</span> <span class="o">=</span> <span class="n">x50</span>
                        <span class="n">r</span> <span class="o">=</span> <span class="mf">0.50</span>
                        
                    <span class="n">deltaMinus</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="p">(</span><span class="n">criterionScale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="n">xm</span><span class="p">)</span>
                    <span class="n">deltaPlus</span>  <span class="o">=</span> <span class="p">(</span><span class="n">criterionScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="n">xm</span><span class="p">)</span> <span class="o">-</span> <span class="mf">1.0</span>

                    <span class="n">u</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
                    <span class="c1">#print &#39;m,xm,M,r,u&#39;, m,xm,M,r,u </span>
                    <span class="k">if</span> <span class="n">u</span> <span class="o">&lt;</span> <span class="n">r</span><span class="p">:</span>
                        <span class="c1">#randeval = m + (math.sqrt(r*u*(m-xm)**2))/r</span>
                        <span class="n">randeval</span> <span class="o">=</span> <span class="n">m</span> <span class="o">+</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">u</span><span class="o">/</span><span class="n">r</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">xm</span><span class="o">-</span><span class="n">m</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1">#randeval = (M*r - M + math.sqrt((-1+r)*(-1+u)*(M-xm)**2))/(-1+r)</span>
                        <span class="n">randeval</span> <span class="o">=</span> <span class="n">M</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="mi">1</span><span class="o">-</span><span class="n">u</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">r</span><span class="p">))</span><span class="o">*</span><span class="p">(</span><span class="n">M</span><span class="o">-</span><span class="n">xm</span><span class="p">)</span>
                    
                    <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span>
                        <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">randeval</span><span class="p">,</span><span class="n">digits</span><span class="p">)))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="o">-</span><span class="nb">round</span><span class="p">(</span><span class="n">randeval</span><span class="p">,</span><span class="n">digits</span><span class="p">)))</span>
                    <span class="c1">#print randeval, criteria[g][&#39;preferenceDirection&#39;], evaluation[g][a]</span>
                        
            <span class="k">elif</span> <span class="nb">str</span><span class="p">(</span><span class="n">randomMode</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="s1">&#39;normal&#39;</span><span class="p">:</span>
                <span class="c1">#mu = randomMode[1]</span>
                <span class="c1">#sigma = randomMode[2]</span>
                <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    <span class="c1">## amplitude = criterionScale[1]-criterionScale[0]</span>
                    <span class="c1">## x70 = criterionScale[0] + 0.7 * amplitude</span>
                    <span class="c1">## x50 = criterionScale[0] + 0.5 * amplitude</span>
                    <span class="c1">## x30 = criterionScale[0] + 0.3 * amplitude</span>
                    
                    <span class="k">if</span> <span class="n">actions</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;advantageous&#39;</span><span class="p">:</span>
                        <span class="n">mu</span> <span class="o">=</span> <span class="n">x70</span>
                        <span class="n">sigma</span> <span class="o">=</span> <span class="mf">0.20</span> <span class="o">*</span> <span class="n">amplitude</span>
                    <span class="k">elif</span> <span class="n">actions</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;cheap&#39;</span><span class="p">:</span>
                        <span class="n">mu</span> <span class="o">=</span> <span class="n">x30</span>
                        <span class="n">sigma</span> <span class="o">=</span> <span class="mf">0.20</span> <span class="o">*</span> <span class="n">amplitude</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">mu</span> <span class="o">=</span> <span class="n">x50</span>
                        <span class="n">sigma</span> <span class="o">=</span> <span class="mf">0.25</span> <span class="o">*</span> <span class="n">amplitude</span>
                    <span class="n">notfound</span> <span class="o">=</span> <span class="kc">True</span> 
                    <span class="k">while</span> <span class="n">notfound</span><span class="p">:</span>
                        <span class="n">randeval</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">normalvariate</span><span class="p">(</span><span class="n">mu</span><span class="p">,</span><span class="n">sigma</span><span class="p">)</span>
                        <span class="c1">## if Debug:</span>
                        <span class="c1">##     print &#39;g,commonScale,randeval&#39;, g,commonScale,randeval</span>
                        <span class="k">if</span> <span class="n">randeval</span> <span class="o">&gt;=</span> <span class="n">criterionScale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span>  <span class="n">randeval</span> <span class="o">&lt;=</span> <span class="n">criterionScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                            <span class="n">notfound</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span>
                        <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">randeval</span><span class="p">,</span><span class="n">digits</span><span class="p">)))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="o">-</span><span class="nb">round</span><span class="p">(</span><span class="n">randeval</span><span class="p">,</span><span class="n">digits</span><span class="p">)))</span>
            <span class="k">elif</span> <span class="nb">str</span><span class="p">(</span><span class="n">randomMode</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="s1">&#39;beta&#39;</span><span class="p">:</span>
                <span class="n">m</span> <span class="o">=</span> <span class="n">criterionScale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">M</span> <span class="o">=</span> <span class="n">criterionScale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="c1">## if commonMode[1] == None:</span>
                <span class="c1">##     xm = 0.5</span>
                <span class="c1">## else:</span>
                <span class="c1">##     xm = commonMode[1]</span>
                
                <span class="c1">## if commonMode[2] == None:</span>
                <span class="c1">##     if xm &gt; 0.5:</span>
                <span class="c1">##         beta = 2.0</span>
                <span class="c1">##         alpha = 1.0/(1.0 - xm)</span>
                <span class="c1">##     else:</span>
                <span class="c1">##         alpha = 2.0</span>
                <span class="c1">##         beta = 1.0/xm</span>
                <span class="c1">## else:</span>
                <span class="c1">##     alpha = commonMode[2][0]</span>
                <span class="c1">##     beta = commonMode[2][1]</span>
                <span class="c1">## if Debug:</span>
                <span class="c1">##     print &#39;alpha,beta&#39;, alpha,beta</span>
                <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">actions</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;advantageous&#39;</span><span class="p">:</span>
                        <span class="c1"># xm = 0.7 sdtdev = 0.15</span>
                        <span class="n">alpha</span> <span class="o">=</span> <span class="mf">5.8661</span>
                        <span class="n">beta</span> <span class="o">=</span> <span class="mf">2.62203</span>
                    <span class="k">elif</span> <span class="n">actions</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;cheap&#39;</span><span class="p">:</span>
                        <span class="c1"># xm = 0.3, stdev = 0.15</span>
                        <span class="n">alpha</span> <span class="o">=</span> <span class="mf">2.62203</span>
                        <span class="n">beta</span> <span class="o">=</span> <span class="mf">5.8661</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1"># xm = 0.5, stdev = 0.15</span>
                        <span class="n">alpha</span> <span class="o">=</span> <span class="mf">5.05556</span>
                        <span class="n">beta</span> <span class="o">=</span> <span class="mf">5.05556</span>
                    
                    <span class="n">u</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">betavariate</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span><span class="n">beta</span><span class="p">)</span>
                    <span class="n">randeval</span> <span class="o">=</span> <span class="p">(</span><span class="n">u</span> <span class="o">*</span> <span class="p">(</span><span class="n">M</span><span class="o">-</span><span class="n">m</span><span class="p">))</span> <span class="o">+</span> <span class="n">m</span>
                    <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span>
                        <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">randeval</span><span class="p">,</span><span class="n">digits</span><span class="p">)))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="o">-</span><span class="nb">round</span><span class="p">(</span><span class="n">randeval</span><span class="p">,</span><span class="n">digits</span><span class="p">)))</span>
                    <span class="c1">## if Debug:</span>
                    <span class="c1">##     print &#39;alpha,beta,u,m,M,randeval&#39;,alpha,beta,u,m,M,randeval</span>
                        

 
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">evaluation</span><span class="p">)</span>

        <span class="c1">## # restrict ordinal criteria to integer (0 - 10) scale</span>
        <span class="c1">## for g in criteriaList:</span>
        <span class="c1">##     if criteria[g][&#39;scaleType&#39;] == &#39;ordinal&#39;:</span>
        <span class="c1">##         for a in actionsList:</span>
        <span class="c1">##             ## if Debug:</span>
        <span class="c1">##             ##     print &#39;commonThresholds = &#39;, commonThresholds</span>
        <span class="c1">##             ##     print &#39;-- &gt;&gt;&#39;, evaluation[g][a],</span>
        <span class="c1">##             if commonThresholds == None:</span>
        <span class="c1">##                 ## evaluation[g][a] = Decimal(str(round(evaluation[g][a]/Decimal(&quot;10.0&quot;),0)))</span>
        <span class="c1">##                 evaluation[g][a] = Decimal(str(round(evaluation[g][a],0)))</span>
        <span class="c1">##             else:</span>
        <span class="c1">##                 evaluation[g][a] = Decimal(str(round(evaluation[g][a],-1)))</span>
        <span class="c1">##             ## if Debug:</span>
        <span class="c1">##             ##     print evaluation[g][a]</span>
        <span class="c1"># restrict ordinal criteria to integer values</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scaleType&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;ordinal&#39;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;-- &gt;&gt;&#39;</span><span class="p">,</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">],</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                    <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">],</span><span class="mi">0</span><span class="p">)))</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
            
        
            <span class="c1"># generate discrimination thresholds</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">criteriaWeightMode</span> <span class="o">=</span> <span class="n">weightMode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">criteria</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">evaluation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weightPreorder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeWeightPreorder</span><span class="p">()</span>
        <span class="n">performanceDifferences</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computePerformanceDifferences</span><span class="p">(</span><span class="n">NotPermanentDiffs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;commonPercentiles=&#39;</span><span class="p">,</span> <span class="n">commonPercentiles</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">commonPercentiles</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">quantile</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ind&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;pref&#39;</span><span class="p">:</span><span class="mi">10</span> <span class="p">,</span> <span class="s1">&#39;veto&#39;</span><span class="p">:</span><span class="mi">95</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">quantile</span> <span class="o">=</span> <span class="n">commonPercentiles</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;scaleType&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;cardinal&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="c1">#vx = self.criteria[c][&#39;performanceDifferences&#39;]</span>
                <span class="n">vx</span> <span class="o">=</span> <span class="n">performanceDifferences</span><span class="p">[</span><span class="n">c</span><span class="p">]</span>
                <span class="n">nv</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">vx</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;=====&gt;&#39;</span><span class="p">,</span><span class="n">c</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">vx</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">nv</span><span class="p">)</span>
                <span class="n">threshold</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">quantile</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;--&gt;&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">quantile</span><span class="p">[</span><span class="n">x</span><span class="p">],</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">quantile</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                        <span class="k">pass</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">quantile</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="n">threshold</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">vx</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="k">elif</span> <span class="n">quantile</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="mi">100</span><span class="p">:</span>
                            <span class="n">threshold</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">vx</span><span class="p">[</span><span class="n">nv</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">kq</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">quantile</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="n">nv</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span><span class="o">/</span><span class="mf">100.0</span><span class="p">))</span>
                            <span class="n">r</span> <span class="o">=</span> <span class="p">((</span><span class="n">nv</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">quantile</span><span class="p">[</span><span class="n">x</span><span class="p">])</span><span class="o">%</span> <span class="mi">100</span>
                            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">(</span><span class="n">kq</span><span class="p">,</span><span class="n">r</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>

                            <span class="c1">## if kq == nv-1:</span>
                            <span class="c1">##     kqplus = nv-1</span>
                            <span class="c1">## else:</span>
                            <span class="c1">##     kq_1 = kq - 1</span>
                            <span class="n">threshold</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">vx</span><span class="p">[</span><span class="n">kq</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">r</span><span class="p">))</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">))</span> <span class="o">*</span> <span class="p">(</span><span class="n">vx</span><span class="p">[</span><span class="n">kq</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">vx</span><span class="p">[</span><span class="n">kq</span><span class="p">])</span>
                            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">(</span><span class="n">threshold</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>



                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">threshold</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">threshold</span><span class="p">[</span><span class="n">x</span><span class="p">],</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">))</span>

            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;criteria&#39;</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="s1">&#39; default thresholds:&#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">])</span>



<span class="c1">##class _ThreadedRandomCBPerformanceTableau(PerformanceTableau):</span>
<span class="c1">##    &quot;&quot;&quot;</span>
<span class="c1">##    Full automatic parallel generation of random</span>
<span class="c1">##    Cost versus Benefit oriented performance tableaux with multiprocessing ressources</span>
<span class="c1">##    Still under construction !</span>
<span class="c1">##</span>
<span class="c1">##    Parameters:</span>
<span class="c1">##        | see the RandomCBPerformanceTableau class</span>
<span class="c1">##        | numberOfCores := limit multiprocessing to a given number of computing cores</span>
<span class="c1">##</span>
<span class="c1">##    .. warning::</span>
<span class="c1">##</span>
<span class="c1">##        Minimal number of decision actions required is 3 ! </span>
<span class="c1">##</span>
<span class="c1">##    &quot;&quot;&quot;</span>
<span class="c1">##</span>
<span class="c1">##    def __init__(self, numberOfCores = 8,\</span>
<span class="c1">##                 numberOfActions = None, \</span>
<span class="c1">##                 numberOfCriteria = None, \</span>
<span class="c1">##                 weightDistribution = None,</span>
<span class="c1">##                 weightScale=None,\</span>
<span class="c1">##                 integerWeights = True,</span>
<span class="c1">##                 commonScale = None, commonThresholds = None,\</span>
<span class="c1">##                 commonPercentiles= None,\</span>
<span class="c1">##                 commonMode = None,\</span>
<span class="c1">##                 valueDigits=2, Debug=False,Comments=False):</span>
<span class="c1">##        &quot;&quot;&quot;</span>
<span class="c1">##        Constructor for RadomCBPerformanceTableau instances.</span>
<span class="c1">##        </span>
<span class="c1">##        &quot;&quot;&quot;</span>
<span class="c1">##</span>
<span class="c1">##        import sys,random,time,math,copy</span>
<span class="c1">##        </span>
<span class="c1">##        self.name = &#39;randomCBperftab&#39;</span>
<span class="c1">##        # randomizer init</span>
<span class="c1">##        t = time.time()</span>
<span class="c1">##        random.seed(t)</span>
<span class="c1">##        # generate random actions</span>
<span class="c1">##        if numberOfActions == None:</span>
<span class="c1">##            numberOfActions = random.randint(10,31)</span>
<span class="c1">##        actionsIndex = list(range(numberOfActions+1))</span>
<span class="c1">##        actionsIndex.remove(0)</span>
<span class="c1">##        actionsList = []</span>
<span class="c1">##        for a in actionsIndex:</span>
<span class="c1">##            if a &lt; 10:</span>
<span class="c1">##                actionName = &#39;a0&#39;+str(a)</span>
<span class="c1">##            else:</span>
<span class="c1">##                actionName = &#39;a&#39;+str(a)</span>
<span class="c1">##            actionsList.append(actionName)</span>
<span class="c1">##        actions = {}</span>
<span class="c1">##        actionsTypesList = [&#39;cheap&#39;,&#39;neutral&#39;,&#39;advantageous&#39;]</span>
<span class="c1">##        for x in actionsList:</span>
<span class="c1">##            actions[x] = {}</span>
<span class="c1">##            actions[x][&#39;type&#39;] = random.choice(actionsTypesList)</span>
<span class="c1">##            actions[x][&#39;name&#39;] = &#39;random %s decision action&#39; % (actions[x][&#39;type&#39;])</span>
<span class="c1">##            actions[x][&#39;comment&#39;] = &#39;RandomCBPerformanceTableau() generated.&#39;</span>
<span class="c1">##        self.actions = actions</span>
<span class="c1">##</span>
<span class="c1">##        # generate random criterialist</span>
<span class="c1">##        if numberOfCriteria == None:</span>
<span class="c1">##            numberOfCriteria = random.randint(5,21)</span>
<span class="c1">##        criteriaList = []</span>
<span class="c1">##        criteriaIndex = list(range(numberOfCriteria+1))</span>
<span class="c1">##        criteriaIndex.remove(0)</span>
<span class="c1">##        for g in criteriaIndex:</span>
<span class="c1">##            if g &lt; 10:</span>
<span class="c1">##                criterionName = &#39;g0&#39;+str(g)</span>
<span class="c1">##            else:</span>
<span class="c1">##                criterionName = &#39;g&#39;+str(g)</span>
<span class="c1">##            criteriaList.append(criterionName)</span>
<span class="c1">##        if Debug:</span>
<span class="c1">##            print(criteriaList)</span>
<span class="c1">##            </span>
<span class="c1">##        # generate criteria dictionary</span>
<span class="c1">##        ## if commonScale == None:</span>
<span class="c1">##        ##     commonScale = (0.0,100.0)</span>
<span class="c1">##        criterionTypesList = [&#39;max&#39;,&#39;max&#39;,&#39;min&#39;]</span>
<span class="c1">##        minScaleTypesList = [&#39;cardinal&#39;,&#39;cardinal&#39;,&#39;cardinal&#39;,&#39;ordinal&#39;]</span>
<span class="c1">##        maxScaleTypesList = [&#39;ordinal&#39;,&#39;ordinal&#39;,&#39;cardinal&#39;]</span>
<span class="c1">##        criteria = {}</span>
<span class="c1">##        i = 0</span>
<span class="c1">##        criterionTypeCounter = {&#39;min&#39;:0,&#39;max&#39;:0}</span>
<span class="c1">##        for g in criteriaList:</span>
<span class="c1">##            #criterionScale = commonScale</span>
<span class="c1">##            criteria[g] = {}</span>
<span class="c1">##            criterionType = random.choice(criterionTypesList)</span>
<span class="c1">##            criterionTypeCounter[criterionType] += 1</span>
<span class="c1">##            criteria[g][&#39;preferenceDirection&#39;] = criterionType</span>
<span class="c1">##            if criterionType == &#39;min&#39;:</span>
<span class="c1">##                scaleType = random.choice(minScaleTypesList)</span>
<span class="c1">##            else:</span>
<span class="c1">##                scaleType = random.choice(maxScaleTypesList)</span>
<span class="c1">##            criteria[g][&#39;scaleType&#39;] = scaleType</span>
<span class="c1">##            if criterionType == &#39;min&#39;:</span>
<span class="c1">##                if scaleType == &#39;ordinal&#39;:</span>
<span class="c1">##                    criteria[g][&#39;name&#39;] = &#39;random ordinal cost criterion&#39;</span>
<span class="c1">##                else:</span>
<span class="c1">##                    criteria[g][&#39;name&#39;] = &#39;random cardinal cost criterion&#39;</span>
<span class="c1">##            else:</span>
<span class="c1">##                if scaleType == &#39;ordinal&#39;:</span>
<span class="c1">##                    criteria[g][&#39;name&#39;] = &#39;random ordinal benefit criterion&#39;</span>
<span class="c1">##                else:</span>
<span class="c1">##                    criteria[g][&#39;name&#39;] = &#39;random cardinal benefit criterion&#39;</span>
<span class="c1">##            ## t = time.time()</span>
<span class="c1">##            ## random.seed(t)</span>
<span class="c1">##            if Debug:</span>
<span class="c1">##                print(&quot;g, criteria[g][&#39;scaleType&#39;], criteria[g][&#39;scale&#39;]&quot;, g, criteria[g][&#39;scaleType&#39;], end=&#39; &#39;)</span>
<span class="c1">##</span>
<span class="c1">##            # commonScale parameter is obsolete</span>
<span class="c1">##            commonScale = None</span>
<span class="c1">##            if criteria[g][&#39;scaleType&#39;] == &#39;cardinal&#39;:</span>
<span class="c1">##                #if commonScale == None:</span>
<span class="c1">##                criterionScale = (0.0, 100.0)</span>
<span class="c1">##                ## criteria[g][&#39;scale&#39;] = criterionScale      </span>
<span class="c1">##            elif criteria[g][&#39;scaleType&#39;] == &#39;ordinal&#39;:</span>
<span class="c1">##                ## if Debug:</span>
<span class="c1">##                ##     print commonScale</span>
<span class="c1">##                ## if commonScale == None:</span>
<span class="c1">##                ##     criterionScale = (0, 10)</span>
<span class="c1">##                ## else:</span>
<span class="c1">##                criterionScale = (0, 10)</span>
<span class="c1">##            else:</span>
<span class="c1">##                criterionScale = (0.0, 100.0)</span>
<span class="c1">##            criteria[g][&#39;scale&#39;] = criterionScale</span>
<span class="c1">##            if Debug:</span>
<span class="c1">##                print(criteria[g][&#39;scale&#39;])</span>
<span class="c1">##</span>
<span class="c1">##        # generate random weights</span>
<span class="c1">##        if weightDistribution == None:</span>
<span class="c1">##            ## weightDistribution = &#39;equiobjectives&#39;</span>
<span class="c1">##            weightDistribution = &#39;fixed&#39;</span>
<span class="c1">##            weightScale = (1,1)</span>
<span class="c1">##            weightMode=[weightDistribution,weightScale]</span>
<span class="c1">##            ## majorityWeight = numberOfCriteria + 1</span>
<span class="c1">##            ## #weightModesList = [(&#39;fixed&#39;,[1,1],1),(&#39;random&#39;,[1,3],2), (&#39;random&#39;,[1,numberOfCriteria],3),(&#39;fixed&#39;,[1,majorityWeight],4)]</span>
<span class="c1">##            ## weightModesList = [(&#39;fixed&#39;,[1,1],1),(&#39;random&#39;,[1,3],2), (&#39;random&#39;,[1,numberOfCriteria],3),(&#39;balanced&#39;,[1,1],4)]</span>
<span class="c1">##            ## weightMode = random.choice(weightModesList)</span>
<span class="c1">##            ## weightDistribution = weightMode[0]</span>
<span class="c1">##            ## weightScale =  weightMode[1]</span>
<span class="c1">##        else:</span>
<span class="c1">##            if weightScale == None:</span>
<span class="c1">##                weightScale = (1,numberOfCriteria)</span>
<span class="c1">##            weightMode=[weightDistribution,weightScale]</span>
<span class="c1">##            </span>
<span class="c1">##        if weightDistribution == &#39;random&#39;:</span>
<span class="c1">##            weightsList = []</span>
<span class="c1">##            sumWeights = Decimal(&#39;0.0&#39;)</span>
<span class="c1">##            i = 0</span>
<span class="c1">##            for g in criteriaList:</span>
<span class="c1">##                weightsList.append(Decimal(str(random.randint(weightScale[0],weightScale[1]))))</span>
<span class="c1">##                sumWeights += weightsList[i]</span>
<span class="c1">##                i += 1</span>
<span class="c1">##            weightsList.reverse()</span>
<span class="c1">##        elif weightDistribution == &#39;fixed&#39;:</span>
<span class="c1">##            weightsList = []</span>
<span class="c1">##            sumWeights = Decimal(&#39;0.0&#39;)</span>
<span class="c1">##            for g in criteriaList:</span>
<span class="c1">##                if g == &#39;g1&#39;:</span>
<span class="c1">##                    weightsList.append(Decimal(str(weightScale[1])))</span>
<span class="c1">##                    sumWeights += weightScale[1]</span>
<span class="c1">##                else:</span>
<span class="c1">##                    weightsList.append(Decimal(str(weightScale[0])))</span>
<span class="c1">##                    sumWeights += weightScale[0]</span>
<span class="c1">##            weightsList.reverse()</span>
<span class="c1">##        elif weightDistribution == &#39;equisignificant&#39;:</span>
<span class="c1">##            weightScale = (1,1)</span>
<span class="c1">##            weightMode=[weightDistribution,weightScale]</span>
<span class="c1">##            weightsList = []</span>
<span class="c1">##            sumWeights = Decimal(&#39;0.0&#39;)</span>
<span class="c1">##            for g in criteriaList:</span>
<span class="c1">##                if g == &#39;g1&#39;:</span>
<span class="c1">##                    weightsList.append(Decimal(str(weightScale[1])))</span>
<span class="c1">##                    sumWeights += weightScale[1]</span>
<span class="c1">##                else:</span>
<span class="c1">##                    weightsList.append(Decimal(str(weightScale[0])))</span>
<span class="c1">##                    sumWeights += weightScale[0]</span>
<span class="c1">##            weightsList.reverse()</span>
<span class="c1">##        elif weightDistribution == &#39;equiobjectives&#39;:</span>
<span class="c1">##            weightScale = (max(1,criterionTypeCounter[&#39;min&#39;]),max(1,criterionTypeCounter[&#39;max&#39;]))</span>
<span class="c1">##            weightMode=[weightDistribution,weightScale]</span>
<span class="c1">##            weightsList = []</span>
<span class="c1">##            sumWeights = Decimal(&#39;0.0&#39;)</span>
<span class="c1">##            for g in criteriaList:</span>
<span class="c1">##                if criteria[g][&#39;preferenceDirection&#39;] == &#39;min&#39;:</span>
<span class="c1">##                    weightsList.append(Decimal(str(weightScale[1])))</span>
<span class="c1">##                    sumWeights += weightScale[1]</span>
<span class="c1">##                else:</span>
<span class="c1">##                    weightsList.append(Decimal(str(weightScale[0])))</span>
<span class="c1">##                    sumWeights += weightScale[0]</span>
<span class="c1">##        else:</span>
<span class="c1">##            print(&#39;!!! Error: wrong criteria weight distribution mode: %s !!!!&#39; % (weightDistribution))</span>
<span class="c1">##        if Debug:</span>
<span class="c1">##            print(weightsList, sumWeights)</span>
<span class="c1">##</span>
<span class="c1">##        for i,g in enumerate(criteriaList):</span>
<span class="c1">##            ## if Debug:</span>
<span class="c1">##            ##     print &#39;criterionScale = &#39;, criterionScale</span>
<span class="c1">##            if integerWeights:</span>
<span class="c1">##                criteria[g][&#39;weight&#39;] = weightsList[i]</span>
<span class="c1">##            else:</span>
<span class="c1">##                criteria[g][&#39;weight&#39;] = weightsList[i] / sumWeights</span>
<span class="c1">##            i += 1</span>
<span class="c1">##</span>
<span class="c1">##            if Debug:</span>
<span class="c1">##                print(criteria[g])</span>
<span class="c1">##</span>
<span class="c1">##        # generate random evaluations</span>
<span class="c1">##        ## x30=criterionScale[1]*0.3</span>
<span class="c1">##        ## x50=criterionScale[1]*0.5</span>
<span class="c1">##        ## x70=criterionScale[1]*0.7</span>
<span class="c1">##        ## if Debug:</span>
<span class="c1">##        ##     print &#39;g, x30,x50,x70&#39;, g, x30,x50,x70</span>
<span class="c1">##        ## randomLawsList = [[&#39;uniform&#39;,criterionScale[0],criterionScale[1]],</span>
<span class="c1">##        ##                   (&#39;triangular&#39;,x30,0.33),(&#39;triangular&#39;,x30,0.50),(&#39;triangular&#39;,x30,0.75),</span>
<span class="c1">##        ##                   (&#39;triangular&#39;,x50,0.33),(&#39;triangular&#39;,x50,0.50),(&#39;triangular&#39;,x50,0.75),</span>
<span class="c1">##        ##                   (&#39;triangular&#39;,x70,0.33),(&#39;triangular&#39;,x70,0.50),(&#39;triangular&#39;,x70,0.75),</span>
<span class="c1">##        ##                   (&#39;normal&#39;,x30,20.0),(&#39;normal&#39;,x30,25.0),(&#39;normal&#39;,x30,30.0),</span>
<span class="c1">##        ##                   (&#39;normal&#39;,x50,20.0),(&#39;normal&#39;,x50,25.0),(&#39;normal&#39;,x50,30.0),</span>
<span class="c1">##        ##                   (&#39;normal&#39;,x70,20.0),(&#39;normal&#39;,x70,25.0),(&#39;normal&#39;,x70,30.0)]</span>
<span class="c1">##        </span>
<span class="c1">##        evaluation = {}</span>
<span class="c1">##        for g in criteriaList:</span>
<span class="c1">##            criterionScale = criteria[g][&#39;scale&#39;]</span>
<span class="c1">##            amplitude = criterionScale[1] - criterionScale[0]</span>
<span class="c1">##            x30=criterionScale[0] + amplitude*0.3</span>
<span class="c1">##            x50=criterionScale[0] + amplitude*0.5</span>
<span class="c1">##            x70=criterionScale[0] + amplitude*0.7</span>
<span class="c1">##            if Debug:</span>
<span class="c1">##                print(&#39;g, criterionx30,x50,x70&#39;, g, criteria[g], x30,x50,x70)</span>
<span class="c1">##            evaluation[g] = {}</span>
<span class="c1">##            if commonMode == None:</span>
<span class="c1">##                #randomMode = random.choice(randomLawsList)</span>
<span class="c1">##                randomMode = [&#39;triangular&#39;,x50,0.50]               </span>
<span class="c1">##            elif commonMode[0] == None:</span>
<span class="c1">##                #randomMode = random.choice(randomLawsList)</span>
<span class="c1">##                randomMode = [&#39;triangular&#39;,x50,0.50]               </span>
<span class="c1">##            else:</span>
<span class="c1">##                randomMode = commonMode</span>
<span class="c1">##            if randomMode[0] == &#39;uniform&#39;:</span>
<span class="c1">##                randomMode[1] = criterionScale[0]</span>
<span class="c1">##                randomMode[2] = criterionScale[1]</span>
<span class="c1">##            criteria[g][&#39;randomMode&#39;] = randomMode</span>
<span class="c1">##            if randomMode[0] == &#39;triangular&#39;:</span>
<span class="c1">##                commentString = &#39;triangular law with variable mode (m) and probability repartition (p = 0.5). Cheap actions: m = 30%; neutral actions: m = 50%; advantageous actions: m = 70%.&#39;</span>
<span class="c1">##            elif randomMode[0] == &#39;normal&#39;:</span>
<span class="c1">##                commentString = &#39;truncated normal law with variable mean (mu) and standard deviation (stdev = 20%). Cheap actions: mu = 30%; neutral actions: mu = 50%; advantageous actions: mu = 70%.&#39;</span>
<span class="c1">##            elif randomMode[0] == &#39;beta&#39;:</span>
<span class="c1">##                commentString = &#39;beta law with variable mode xm and standard deviation (stdev = 15%). Cheap actions: xm = 30%; neutral actions: xm = 50%; advantageous actions: xm = 70%.&#39;</span>
<span class="c1">##</span>
<span class="c1">##            ## else:</span>
<span class="c1">##            ##     if randomMode[1] != None and randomMode[2] != None:</span>
<span class="c1">##            ##         commentString = randomMode[0]+&#39;, %.2f, %.2f&#39; % (float(randomMode[1]),float(randomMode[2]))</span>
<span class="c1">##            ##     elif randomMode[1] != None and randomMode[2] == None:</span>
<span class="c1">##            ##         commentString = randomMode[0]+&#39;, %.2f, default&#39; % (float(randomMode[1]))</span>
<span class="c1">##            ##     elif randomMode[1] == None and randomMode[2] != None:</span>
<span class="c1">##            ##         commentString = randomMode[0]+&#39;, default, %.2f&#39; % (float(randomMode[2]))</span>
<span class="c1">##            ##     else:</span>
<span class="c1">##            ##         commentString = randomMode[0]+&#39;, default, default&#39;</span>
<span class="c1">##                    </span>
<span class="c1">##            if Debug:</span>
<span class="c1">##                print(&#39;commonMode = &#39;, commonMode)</span>
<span class="c1">##                print(&#39;randomMode = &#39;, randomMode)</span>
<span class="c1">##                   </span>
<span class="c1">##            criteria[g][&#39;comment&#39;] = &#39;Evaluation generator: &#39; + commentString</span>
<span class="c1">##            digits = valueDigits</span>
<span class="c1">##            if str(randomMode[0]) == &#39;uniform&#39;:          </span>
<span class="c1">##                evaluation[g] = {}</span>
<span class="c1">##                for a in actionsList:</span>
<span class="c1">##                    randeval = random.uniform(criterionScale[0],criterionScale[1])</span>
<span class="c1">##                    if criteria[g][&#39;preferenceDirection&#39;] == &#39;max&#39;:</span>
<span class="c1">##                        evaluation[g][a] = Decimal(str(round(randeval,digits)))</span>
<span class="c1">##                    else:</span>
<span class="c1">##                        evaluation[g][a] = Decimal(str(-round(randeval,digits)))</span>
<span class="c1">##            elif str(randomMode[0]) == &#39;triangular&#39;:</span>
<span class="c1">##                for a in actionsList:</span>
<span class="c1">##                    m = criterionScale[0]</span>
<span class="c1">##                    M = criterionScale[1]</span>
<span class="c1">##                    #r  = randomMode[2]</span>
<span class="c1">##                    #xm = randomMode[1]</span>
<span class="c1">##                    if actions[a][&#39;type&#39;] == &#39;advantageous&#39;:</span>
<span class="c1">##                        xm = x70</span>
<span class="c1">##                        r = 0.50</span>
<span class="c1">##                    elif actions[a][&#39;type&#39;] == &#39;cheap&#39;:</span>
<span class="c1">##                        xm = x30</span>
<span class="c1">##                        r = 0.50</span>
<span class="c1">##                    else:</span>
<span class="c1">##                        xm = x50</span>
<span class="c1">##                        r = 0.50</span>
<span class="c1">##                        </span>
<span class="c1">##                    deltaMinus = 1.0 - (criterionScale[0]/xm)</span>
<span class="c1">##                    deltaPlus  = (criterionScale[1]/xm) - 1.0</span>
<span class="c1">##</span>
<span class="c1">##                    u = random.random()</span>
<span class="c1">##                    #print &#39;m,xm,M,r,u&#39;, m,xm,M,r,u </span>
<span class="c1">##                    if u &lt; r:</span>
<span class="c1">##                        #randeval = m + (math.sqrt(r*u*(m-xm)**2))/r</span>
<span class="c1">##                        randeval = m + math.sqrt(u/r)*(xm-m)</span>
<span class="c1">##                    else:</span>
<span class="c1">##                        #randeval = (M*r - M + math.sqrt((-1+r)*(-1+u)*(M-xm)**2))/(-1+r)</span>
<span class="c1">##                        randeval = M - math.sqrt((1-u)/(1-r))*(M-xm)</span>
<span class="c1">##                    </span>
<span class="c1">##                    if criteria[g][&#39;preferenceDirection&#39;] == &#39;max&#39;:</span>
<span class="c1">##                        evaluation[g][a] = Decimal(str(round(randeval,digits)))</span>
<span class="c1">##                    else:</span>
<span class="c1">##                        evaluation[g][a] = Decimal(str(-round(randeval,digits)))</span>
<span class="c1">##                    #print randeval, criteria[g][&#39;preferenceDirection&#39;], evaluation[g][a]</span>
<span class="c1">##                        </span>
<span class="c1">##            elif str(randomMode[0]) == &#39;normal&#39;:</span>
<span class="c1">##                #mu = randomMode[1]</span>
<span class="c1">##                #sigma = randomMode[2]</span>
<span class="c1">##                for a in actionsList:</span>
<span class="c1">##                    ## amplitude = criterionScale[1]-criterionScale[0]</span>
<span class="c1">##                    ## x70 = criterionScale[0] + 0.7 * amplitude</span>
<span class="c1">##                    ## x50 = criterionScale[0] + 0.5 * amplitude</span>
<span class="c1">##                    ## x30 = criterionScale[0] + 0.3 * amplitude</span>
<span class="c1">##                    </span>
<span class="c1">##                    if actions[a][&#39;type&#39;] == &#39;advantageous&#39;:</span>
<span class="c1">##                        mu = x70</span>
<span class="c1">##                        sigma = 0.20 * amplitude</span>
<span class="c1">##                    elif actions[a][&#39;type&#39;] == &#39;cheap&#39;:</span>
<span class="c1">##                        mu = x30</span>
<span class="c1">##                        sigma = 0.20 * amplitude</span>
<span class="c1">##                    else:</span>
<span class="c1">##                        mu = x50</span>
<span class="c1">##                        sigma = 0.25 * amplitude</span>
<span class="c1">##                    notfound = True </span>
<span class="c1">##                    while notfound:</span>
<span class="c1">##                        randeval = random.normalvariate(mu,sigma)</span>
<span class="c1">##                        ## if Debug:</span>
<span class="c1">##                        ##     print &#39;g,commonScale,randeval&#39;, g,commonScale,randeval</span>
<span class="c1">##                        if randeval &gt;= criterionScale[0] and  randeval &lt;= criterionScale[1]:</span>
<span class="c1">##                            notfound = False</span>
<span class="c1">##                    if criteria[g][&#39;preferenceDirection&#39;] == &#39;max&#39;:</span>
<span class="c1">##                        evaluation[g][a] = Decimal(str(round(randeval,digits)))</span>
<span class="c1">##                    else:</span>
<span class="c1">##                        evaluation[g][a] = Decimal(str(-round(randeval,digits)))</span>
<span class="c1">##            elif str(randomMode[0]) == &#39;beta&#39;:</span>
<span class="c1">##                m = criterionScale[0]</span>
<span class="c1">##                M = criterionScale[1]</span>
<span class="c1">##                ## if commonMode[1] == None:</span>
<span class="c1">##                ##     xm = 0.5</span>
<span class="c1">##                ## else:</span>
<span class="c1">##                ##     xm = commonMode[1]</span>
<span class="c1">##                </span>
<span class="c1">##                ## if commonMode[2] == None:</span>
<span class="c1">##                ##     if xm &gt; 0.5:</span>
<span class="c1">##                ##         beta = 2.0</span>
<span class="c1">##                ##         alpha = 1.0/(1.0 - xm)</span>
<span class="c1">##                ##     else:</span>
<span class="c1">##                ##         alpha = 2.0</span>
<span class="c1">##                ##         beta = 1.0/xm</span>
<span class="c1">##                ## else:</span>
<span class="c1">##                ##     alpha = commonMode[2][0]</span>
<span class="c1">##                ##     beta = commonMode[2][1]</span>
<span class="c1">##                ## if Debug:</span>
<span class="c1">##                ##     print &#39;alpha,beta&#39;, alpha,beta</span>
<span class="c1">##                for a in actionsList:</span>
<span class="c1">##                    if actions[a][&#39;type&#39;] == &#39;advantageous&#39;:</span>
<span class="c1">##                        # xm = 0.7 sdtdev = 0.15</span>
<span class="c1">##                        alpha = 5.8661</span>
<span class="c1">##                        beta = 2.62203</span>
<span class="c1">##                    elif actions[a][&#39;type&#39;] == &#39;cheap&#39;:</span>
<span class="c1">##                        # xm = 0.3, stdev = 0.15</span>
<span class="c1">##                        alpha = 2.62203</span>
<span class="c1">##                        beta = 5.8661</span>
<span class="c1">##                    else:</span>
<span class="c1">##                        # xm = 0.5, stdev = 0.15</span>
<span class="c1">##                        alpha = 5.05556</span>
<span class="c1">##                        beta = 5.05556</span>
<span class="c1">##                    </span>
<span class="c1">##                    u = random.betavariate(alpha,beta)</span>
<span class="c1">##                    randeval = (u * (M-m)) + m</span>
<span class="c1">##                    if criteria[g][&#39;preferenceDirection&#39;] == &#39;max&#39;:</span>
<span class="c1">##                        evaluation[g][a] = Decimal(str(round(randeval,digits)))</span>
<span class="c1">##                    else:</span>
<span class="c1">##                        evaluation[g][a] = Decimal(str(-round(randeval,digits)))</span>
<span class="c1">##                    ## if Debug:</span>
<span class="c1">##                    ##     print &#39;alpha,beta,u,m,M,randeval&#39;,alpha,beta,u,m,M,randeval</span>
<span class="c1">##                        </span>
<span class="c1">##</span>
<span class="c1">## </span>
<span class="c1">##        if Debug:</span>
<span class="c1">##            print(evaluation)</span>
<span class="c1">##</span>
<span class="c1">##        ## # restrict ordinal criteria to integer (0 - 10) scale</span>
<span class="c1">##        ## for g in criteriaList:</span>
<span class="c1">##        ##     if criteria[g][&#39;scaleType&#39;] == &#39;ordinal&#39;:</span>
<span class="c1">##        ##         for a in actionsList:</span>
<span class="c1">##        ##             ## if Debug:</span>
<span class="c1">##        ##             ##     print &#39;commonThresholds = &#39;, commonThresholds</span>
<span class="c1">##        ##             ##     print &#39;-- &gt;&gt;&#39;, evaluation[g][a],</span>
<span class="c1">##        ##             if commonThresholds == None:</span>
<span class="c1">##        ##                 ## evaluation[g][a] = Decimal(str(round(evaluation[g][a]/Decimal(&quot;10.0&quot;),0)))</span>
<span class="c1">##        ##                 evaluation[g][a] = Decimal(str(round(evaluation[g][a],0)))</span>
<span class="c1">##        ##             else:</span>
<span class="c1">##        ##                 evaluation[g][a] = Decimal(str(round(evaluation[g][a],-1)))</span>
<span class="c1">##        ##             ## if Debug:</span>
<span class="c1">##        ##             ##     print evaluation[g][a]</span>
<span class="c1">##        # restrict ordinal criteria to integer values</span>
<span class="c1">##        for g in criteriaList:</span>
<span class="c1">##            if criteria[g][&#39;scaleType&#39;] == &#39;ordinal&#39;:</span>
<span class="c1">##                for a in actionsList:</span>
<span class="c1">##                    if Debug:</span>
<span class="c1">##                        print(&#39;-- &gt;&gt;&#39;, evaluation[g][a], end=&#39; &#39;)</span>
<span class="c1">##                    evaluation[g][a] = Decimal(str(round(evaluation[g][a],0)))</span>
<span class="c1">##                    if Debug:</span>
<span class="c1">##                        print(evaluation[g][a])</span>
<span class="c1">##            </span>
<span class="c1">##        </span>
<span class="c1">##            # generate discrimination thresholds</span>
<span class="c1">##        self.criteriaWeightMode = weightMode</span>
<span class="c1">##        self.criteria = copy.deepcopy(criteria)</span>
<span class="c1">##        self.evaluation = copy.deepcopy(evaluation)</span>
<span class="c1">##        self.weightPreorder = self.computeWeightPreorder()</span>
<span class="c1">##        performanceDifferences = self.computePerformanceDifferences(NotPermanentDiffs=True,Debug=False)</span>
<span class="c1">##        if Debug:</span>
<span class="c1">##            print(&#39;commonPercentiles=&#39;, commonPercentiles)</span>
<span class="c1">##        if commonPercentiles == None:</span>
<span class="c1">##            quantile = {&#39;ind&#39;:5, &#39;pref&#39;:10 , &#39;veto&#39;:95}</span>
<span class="c1">##        else:</span>
<span class="c1">##            quantile = commonPercentiles</span>
<span class="c1">##        for c in criteriaList:</span>
<span class="c1">##            if self.criteria[c][&#39;scaleType&#39;] == &#39;cardinal&#39;:</span>
<span class="c1">##                self.criteria[c][&#39;thresholds&#39;] = {}</span>
<span class="c1">##                #vx = self.criteria[c][&#39;performanceDifferences&#39;]</span>
<span class="c1">##                vx = performanceDifferences[c]</span>
<span class="c1">##                nv = len(vx)</span>
<span class="c1">##                if Debug:</span>
<span class="c1">##                    print(&#39;=====&gt;&#39;,c)</span>
<span class="c1">##                    print(vx)</span>
<span class="c1">##                    print(nv)</span>
<span class="c1">##                threshold = {}</span>
<span class="c1">##                for x in quantile:</span>
<span class="c1">##                    if Debug:</span>
<span class="c1">##                        print(&#39;--&gt;&#39;, x, quantile[x], end=&#39; &#39;)</span>
<span class="c1">##</span>
<span class="c1">##                    if quantile[x] == -1:</span>
<span class="c1">##                        pass</span>
<span class="c1">##                    else:</span>
<span class="c1">##                        if quantile[x] == 0:</span>
<span class="c1">##                            threshold[x] = vx[0]</span>
<span class="c1">##                        elif quantile[x] == 100:</span>
<span class="c1">##                            threshold[x] = vx[nv-1]</span>
<span class="c1">##                        else:</span>
<span class="c1">##                            kq = int(math.floor(float(quantile[x]*(nv-1))/100.0))</span>
<span class="c1">##                            r = ((nv-1)*quantile[x])% 100</span>
<span class="c1">##                            if Debug:</span>
<span class="c1">##                                print(kq,r, end=&#39; &#39;)</span>
<span class="c1">##</span>
<span class="c1">##                            ## if kq == nv-1:</span>
<span class="c1">##                            ##     kqplus = nv-1</span>
<span class="c1">##                            ## else:</span>
<span class="c1">##                            ##     kq_1 = kq - 1</span>
<span class="c1">##                            threshold[x] = vx[kq] + (Decimal(str(r))/Decimal(&#39;100.0&#39;)) * (vx[kq+1]-vx[kq])</span>
<span class="c1">##                            if Debug:</span>
<span class="c1">##                                print(threshold[x])</span>
<span class="c1">##</span>
<span class="c1">##</span>
<span class="c1">##</span>
<span class="c1">##                for x in threshold:</span>
<span class="c1">##                    self.criteria[c][&#39;thresholds&#39;][x] = (threshold[x],Decimal(&#39;0.0&#39;))</span>
<span class="c1">##</span>
<span class="c1">##            if Comments:</span>
<span class="c1">##                print(&#39;criteria&#39;,c,&#39; default thresholds:&#39;)</span>
<span class="c1">##                print(self.criteria[c][&#39;thresholds&#39;])</span>
               
<span class="c1">#############################33</span>
<span class="c1"># XML encoded stored PerformanceTableau Class instances</span>
<span class="c1"># class XMLPerformanceTableau(PerformanceTableau):</span>
<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#     Specialization of the general PerformanceTableau class for reading</span>
<span class="c1">#     stored XML formatted instances.</span>
<span class="c1">#     &quot;&quot;&quot;</span>

<span class="c1">#     def __init__(self,fileName=&#39;testperftabXML&#39;):</span>
<span class="c1">#         from xml.sax import make_parser</span>
<span class="c1">#         xmlPerformanceTableau = _XMLPerformanceTableauHandler()</span>
<span class="c1">#         saxParser = make_parser()</span>
<span class="c1">#         saxParser.setContentHandler(xmlPerformanceTableau)</span>
<span class="c1">#         fileNameExt = fileName + &#39;.xml&#39;</span>
<span class="c1">#         fo = open(fileNameExt,&#39;r&#39;)</span>
<span class="c1">#         saxParser.parse(fo)</span>
<span class="c1">#         self.name = xmlPerformanceTableau.name</span>
<span class="c1">#         self.category = xmlPerformanceTableau.category</span>
<span class="c1">#         self.subcategory = xmlPerformanceTableau.subcategory  </span>
<span class="c1">#         self.actions = xmlPerformanceTableau.actions</span>
<span class="c1">#         self.criteria = xmlPerformanceTableau.criteria</span>
<span class="c1">#         self.evaluation = xmlPerformanceTableau.evaluation</span>
<span class="c1">#         self.weightPreorder = self.computeWeightPreorder()</span>

<span class="c1"># class _XMLRubisPerformanceTableau(PerformanceTableau):</span>
<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#     Specialization of the general PerformanceTableau class for reading</span>
<span class="c1">#     stored XML formatted instances. Using the inbuilt module</span>
<span class="c1">#     xml.etree (for Python 2.5+).</span>

<span class="c1">#     Param: fileName (without the extension .xml). </span>
<span class="c1">#     &quot;&quot;&quot;</span>
    
<span class="c1">#     def __init__(self,fileName=&#39;rubisPerformanceTableau&#39;):</span>
<span class="c1">#         from xml.etree import ElementTree</span>
<span class="c1">#         try:</span>
<span class="c1">#             fileNameExt = fileName + &#39;.xml&#39;</span>
<span class="c1">#             fo = open(fileNameExt,mode=&#39;r&#39;)</span>
<span class="c1">#         except:</span>
<span class="c1">#             try:</span>
<span class="c1">#                 fileNameExt = fileName + &#39;.xmcda&#39;</span>
<span class="c1">#                 fo = open(fileNameExt,mode=&#39;r&#39;)</span>
<span class="c1">#             except:</span>
<span class="c1">#                 fileNameExt = fileName + &#39;.xmcda2&#39;</span>
<span class="c1">#                 fo = open(fileNameExt,mode=&#39;r&#39;)</span>
<span class="c1">#         rubisPerformanceTableau = ElementTree.parse(fo).getroot()</span>
<span class="c1">#         self.comment = rubisPerformanceTableau.find(&#39;comment&#39;).text</span>
<span class="c1">#         self.category = rubisPerformanceTableau.attrib[&#39;category&#39;]</span>
<span class="c1">#         self.subcategory = rubisPerformanceTableau.attrib[&#39;subcategory&#39;]</span>
<span class="c1">#         self.name = rubisPerformanceTableau.find(&#39;header&#39;).find(&#39;name&#39;).text</span>
<span class="c1">#         self.author = rubisPerformanceTableau.find(&#39;header&#39;).find(&#39;author&#39;).text</span>
<span class="c1">#         self.reference = rubisPerformanceTableau.find(&#39;header&#39;).find(&#39;reference&#39;).text</span>
<span class="c1">#         actions = {}</span>
<span class="c1">#         ## actions[&#39;comment&#39;] = rubisPerformanceTableau.find(&#39;actions&#39;).find(&#39;comment&#39;).text</span>
<span class="c1">#         for x in rubisPerformanceTableau.find(&#39;actions&#39;).findall(&#39;action&#39;):</span>
<span class="c1">#             actions[x.attrib[&#39;id&#39;]] = {}</span>
<span class="c1">#             actions[x.attrib[&#39;id&#39;]][&#39;name&#39;] = x.find(&#39;name&#39;).text</span>
<span class="c1">#             actions[x.attrib[&#39;id&#39;]][&#39;comment&#39;] = x.find(&#39;comment&#39;).text</span>
<span class="c1">#         self.actions = actions</span>
<span class="c1">#         criteria = {}</span>
<span class="c1">#         ##criteria[&#39;comment&#39;] = rubisPerformanceTableau.find(&#39;criteria&#39;).find(&#39;comment&#39;).text</span>
<span class="c1">#         for g in rubisPerformanceTableau.find(&#39;criteria&#39;).findall(&#39;criterion&#39;):</span>
<span class="c1">#             criteria[g.attrib[&#39;id&#39;]] = {}</span>
<span class="c1">#             criteria[g.attrib[&#39;id&#39;]][&#39;name&#39;] = g.find(&#39;name&#39;).text</span>
<span class="c1">#             criteria[g.attrib[&#39;id&#39;]][&#39;comment&#39;] = g.find(&#39;comment&#39;).text</span>
<span class="c1">#             criteria[g.attrib[&#39;id&#39;]][&#39;scale&#39;] = {}</span>
<span class="c1">#             Min = Decimal(g.find(&#39;scale&#39;).find(&#39;min&#39;).text)</span>
<span class="c1">#             Max = Decimal(g.find(&#39;scale&#39;).find(&#39;max&#39;).text)</span>
<span class="c1">#             ##criteria[g.attrib[&#39;id&#39;]][&#39;scale&#39;] = str((Min,Max))</span>
<span class="c1">#             criteria[g.attrib[&#39;id&#39;]][&#39;scale&#39;] = (Min,Max)</span>
<span class="c1">#             criteria[g.attrib[&#39;id&#39;]][&#39;thresholds&#39;] = {}</span>
<span class="c1">#             try:</span>
<span class="c1">#                 th = self.stripsplit(g.find(&#39;thresholds&#39;).find(&#39;indifference&#39;).text)</span>
<span class="c1">#                 criteria[g.attrib[&#39;id&#39;]][&#39;thresholds&#39;][&#39;ind&#39;] = (Decimal(str(th[0])),Decimal(str(th[1])))</span>
<span class="c1">#             except:</span>
<span class="c1">#                 pass</span>
<span class="c1">#             try:</span>
<span class="c1">#                 th = self.stripsplit(g.find(&#39;thresholds&#39;).find(&#39;weakPreference&#39;).text)</span>
<span class="c1">#                 criteria[g.attrib[&#39;id&#39;]][&#39;thresholds&#39;][&#39;weakPreference&#39;] = (Decimal(str(th[0])),Decimal(str(th[1])))</span>
<span class="c1">#             except:</span>
<span class="c1">#                 pass</span>
<span class="c1">#             try:</span>
<span class="c1">#                 th = self.stripsplit(g.find(&#39;thresholds&#39;).find(&#39;preference&#39;).text)</span>
<span class="c1">#                 criteria[g.attrib[&#39;id&#39;]][&#39;thresholds&#39;][&#39;pref&#39;] = (Decimal(str(th[0])),Decimal(str(th[1])))</span>
<span class="c1">#             except:</span>
<span class="c1">#                 pass</span>
<span class="c1">#             try:</span>
<span class="c1">#                 th = self.stripsplit(g.find(&#39;thresholds&#39;).find(&#39;weakVeto&#39;).text)</span>
<span class="c1">#                 criteria[g.attrib[&#39;id&#39;]][&#39;thresholds&#39;][&#39;weakVeto&#39;] = (Decimal(str(th[0])),Decimal(str(th[1])))</span>
<span class="c1">#             except:</span>
<span class="c1">#                 pass</span>
<span class="c1">#             try:</span>
<span class="c1">#                 th = self.stripsplit(g.find(&#39;thresholds&#39;).find(&#39;veto&#39;).text)</span>
<span class="c1">#                 criteria[g.attrib[&#39;id&#39;]][&#39;thresholds&#39;][&#39;veto&#39;] = (Decimal(str(th[0])),Decimal(str(th[1])))</span>
<span class="c1">#             except:</span>
<span class="c1">#                 pass</span>
<span class="c1">#                 ## criteria[g.attrib[&#39;id&#39;]][&#39;thresholds&#39;][&#39;veto&#39;] = (Max + 1.0,0.0)</span>
<span class="c1">#             criteria[g.attrib[&#39;id&#39;]][&#39;weight&#39;] = Decimal(g.find(&#39;weight&#39;).text)     </span>
<span class="c1">#         self.criteria = criteria</span>
<span class="c1">#         evaluation = {}</span>
<span class="c1">#         ##evaluation[&#39;comment&#39;] = rubisPerformanceTableau.find(&#39;evaluations&#39;).find(&#39;comment&#39;).text</span>
<span class="c1">#         for v in rubisPerformanceTableau.find(&#39;evaluations&#39;).findall(&#39;evaluation&#39;):</span>
<span class="c1">#             g = v.find(&#39;criterionID&#39;).text</span>
<span class="c1">#             evaluation[g] = {}</span>
<span class="c1">#             for x in v.findall(&#39;performance&#39;):</span>
<span class="c1">#                 evaluation[g][x.find(&#39;actionID&#39;).text]=Decimal(x.find(&#39;value&#39;).text)   </span>
<span class="c1">#         self.evaluation = evaluation</span>

<span class="c1"># ##         self.actions = xmlPerformanceTableau.actions</span>
<span class="c1"># ##         self.criteria = xmlPerformanceTableau.criteria</span>
<span class="c1"># ##         self.evaluation = xmlPerformanceTableau.evaluation</span>
<span class="c1">#         self.weightPreorder = self.computeWeightPreorder()</span>

<span class="c1">#     def stripsplit(self,th):</span>
<span class="c1">#         &quot;&quot;&quot; extract thresholds new Python 3 compatible version &quot;&quot;&quot;</span>
<span class="c1">#         import string</span>
<span class="c1">#         ## th = string.split(string.lstrip(string.rstrip(th,&#39;)&#39;),&#39;(&#39;),&#39;,&#39;)</span>
<span class="c1">#         th = th.rstrip(&#39;)&#39;)</span>
<span class="c1">#         th = th.lstrip(&#39;(&#39;)</span>
<span class="c1">#         th = th.split(&#39;,&#39;)</span>
<span class="c1">#         res = (th[0].strip(),th[1].strip())</span>
<span class="c1">#         return res      </span>

<span class="c1"># class _OldXMCDAPerformanceTableau(PerformanceTableau):</span>
<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#     Specialization of the general PerformanceTableau class for reading</span>
<span class="c1">#     stored XMCDA formatted instances. Using the inbuilt module</span>
<span class="c1">#     xml.etree (for Python 2.5+).</span>

<span class="c1">#     Param: fileName (without the extension .xml or .xmcda). </span>
<span class="c1">#     &quot;&quot;&quot;</span>
    
<span class="c1">#     def __init__(self,fileName=&#39;temp&#39;):</span>
<span class="c1">#         from xml.etree import ElementTree</span>
<span class="c1">#         fileNameExt = fileName + &#39;.xmcda&#39;</span>
<span class="c1">#         try:</span>
<span class="c1">#             fo = open(fileNameExt,mode=&#39;r&#39;)</span>
<span class="c1">#         except:</span>
<span class="c1">#             fileNameExt = fileName + &#39;.xml&#39;</span>
<span class="c1">#             try:</span>
<span class="c1">#                 fo = open(fileNameExt,mode=&#39;r&#39;)</span>
<span class="c1">#             except:</span>
<span class="c1">#                 print(&quot;Error: file %s{.xmcda|.xml} not found !&quot; % (fileName))</span>
        
<span class="c1">#         xmcdaPerformanceTableau = ElementTree.parse(fo).getroot()</span>
<span class="c1">#         # get description</span>
<span class="c1">#         description = {}</span>
<span class="c1">#         for elem in [x for x in xmcdaPerformanceTableau.find(&#39;caseReference&#39;).getchildren()]:</span>
<span class="c1">#             if elem.tag == &#39;bibliography&#39;:</span>
<span class="c1">#                 description[elem.tag] = {&#39;description&#39;: {&#39;subSubTitle&#39;: &#39;Bibliography&#39;}}</span>
<span class="c1">#                 i = 0</span>
<span class="c1">#                 for bibEntry in [x for x in elem.findall(&#39;bibEntry&#39;)]:</span>
<span class="c1">#                     i += 1</span>
<span class="c1">#                     description[elem.tag][i] = bibEntry.text </span>
<span class="c1">#             else:</span>
<span class="c1">#                 description[elem.tag] = elem.text</span>
<span class="c1">#         self.description = description</span>
<span class="c1">#         try:</span>
<span class="c1">#             self.name = description[&#39;name&#39;]</span>
<span class="c1">#         except:</span>
<span class="c1">#             pass</span>
<span class="c1">#         try:</span>
<span class="c1">#             self.author = description[&#39;user&#39;]</span>
<span class="c1">#         except:</span>
<span class="c1">#             pass</span>
<span class="c1">#         try:</span>
<span class="c1">#             self.reference = description[&#39;comment&#39;]</span>
<span class="c1">#         except:</span>
<span class="c1">#             pass</span>
<span class="c1">#         # get method Data</span>
<span class="c1">#         parameter = {}</span>
<span class="c1">#         for elem in [x for x in xmcdaPerformanceTableau.find(&#39;methodData&#39;).find(&#39;parameters&#39;).getchildren()]:</span>
<span class="c1">#             tag = elem.find(&#39;name&#39;).text</span>
<span class="c1">#             try:</span>
<span class="c1">#                 value = elem.find(&#39;value&#39;).find(&#39;label&#39;).text</span>
<span class="c1">#             except:</span>
<span class="c1">#                 try:</span>
<span class="c1">#                     value = float(elem.find(&#39;value&#39;).find(&#39;real&#39;).text)</span>
<span class="c1">#                 except:</span>
<span class="c1">#                     value = int(elem.find(&#39;value&#39;).find(&#39;integer&#39;).text)                        </span>
<span class="c1">#             parameter[tag] = value</span>
<span class="c1">#         self.parameter = parameter</span>
<span class="c1">#         actions = {}</span>
<span class="c1">#         # get alternatives&#39; description</span>
<span class="c1">#         description = {}</span>
<span class="c1">#         for elem in [x for x in xmcdaPerformanceTableau.find(&#39;alternatives&#39;).find(&#39;description&#39;).getchildren()]:</span>
<span class="c1">#             description[elem.tag] = elem.text</span>
<span class="c1">#         self.actionsDescription = description</span>
<span class="c1">#         # get alternatives</span>
<span class="c1">#         for x in xmcdaPerformanceTableau.find(&#39;alternatives&#39;).findall(&#39;alternative&#39;):</span>
<span class="c1">#             try:</span>
<span class="c1">#                 if x.find(&#39;status&#39;).text == &#39;active&#39;:</span>
<span class="c1">#                     Active = True</span>
<span class="c1">#                 else:</span>
<span class="c1">#                     Active = False</span>
<span class="c1">#             except:</span>
<span class="c1">#                 Active = True</span>
<span class="c1">#             if Active:</span>
<span class="c1">#                 actions[x.attrib[&#39;id&#39;]] = {}</span>
<span class="c1">#                 for elem in [y for y in x.find(&#39;description&#39;).getchildren()]:</span>
<span class="c1">#                     actions[x.attrib[&#39;id&#39;]][elem.tag] = elem.text</span>
<span class="c1">#         self.actions = actions</span>
<span class="c1">#         criteria = {}</span>
<span class="c1">#         # get criteria&#39; description</span>
<span class="c1">#         description = {}</span>
<span class="c1">#         for elem in [x for x in xmcdaPerformanceTableau.find(&#39;criteria&#39;).find(&#39;description&#39;).getchildren()]:</span>
<span class="c1">#             description[elem.tag] = elem.text</span>
<span class="c1">#         self.criteriaDescription = description</span>
<span class="c1">#         ## get criteria</span>
<span class="c1">#         for g in xmcdaPerformanceTableau.find(&#39;criteria&#39;).findall(&#39;criterion&#39;):</span>
<span class="c1">#             try:</span>
                
<span class="c1">#                 if g.find(&#39;status&#39;).text == &#39;active&#39;:</span>
<span class="c1">#                     Active = True</span>
<span class="c1">#                 else:</span>
<span class="c1">#                     Active = False</span>
<span class="c1">#             except:</span>
<span class="c1">#                 Active = True</span>
<span class="c1">#             if Active:</span>
<span class="c1">#                 criteria[g.attrib[&#39;id&#39;]] = {}</span>
<span class="c1">#                 for elem in [y for y in g.find(&#39;description&#39;).getchildren()]:</span>
<span class="c1">#                     criteria[g.attrib[&#39;id&#39;]][elem.tag] = elem.text</span>
<span class="c1">#                 criteria[g.attrib[&#39;id&#39;]][&#39;scale&#39;] = {}</span>
<span class="c1">#                 Min = float(g.find(&#39;criterionFunction&#39;).find(&#39;scale&#39;).find(&#39;quantitative&#39;).find(&#39;min&#39;).find(&#39;real&#39;).text)</span>
<span class="c1">#                 Max = float(g.find(&#39;criterionFunction&#39;).find(&#39;scale&#39;).find(&#39;quantitative&#39;).find(&#39;max&#39;).find(&#39;real&#39;).text)</span>
<span class="c1">#                 ##criteria[g.attrib[&#39;id&#39;]][&#39;scale&#39;] = str((Min,Max))</span>
<span class="c1">#                 criteria[g.attrib[&#39;id&#39;]][&#39;scale&#39;] = (Min,Max)</span>
<span class="c1">#                 try:</span>
<span class="c1">#                     criteria[g.attrib[&#39;id&#39;]][&#39;weight&#39;] = float(g.find(&#39;significance&#39;).find(&#39;real&#39;).text)</span>
<span class="c1">#                 except:</span>
<span class="c1">#                     criteria[g.attrib[&#39;id&#39;]][&#39;weight&#39;] = int(g.find(&#39;significance&#39;).find(&#39;integer&#39;).text)</span>
<span class="c1">#                 try:</span>
<span class="c1">#                     criteria[g.attrib[&#39;id&#39;]][&#39;preferenceDirection&#39;] = g.find(&#39;criterionFunction&#39;).find(&#39;scale&#39;).find(&#39;quantitative&#39;).find(&#39;preferenceDirection&#39;).text</span>
<span class="c1">#                     if criteria[g.attrib[&#39;id&#39;]][&#39;preferenceDirection&#39;] == &#39;min&#39;:</span>
<span class="c1">#                         pdir = -1</span>
<span class="c1">#                     else:</span>
<span class="c1">#                         pdir = 1</span>
<span class="c1">#                 except:</span>
<span class="c1">#                     pdir = 1</span>

<span class="c1">#                 criteria[g.attrib[&#39;id&#39;]][&#39;thresholds&#39;] = {}</span>
<span class="c1">#                 for th in g.find(&#39;criterionFunction&#39;).find(&#39;thresholds&#39;).findall(&#39;threshold&#39;):</span>
<span class="c1">#                     try:</span>
<span class="c1">#                         try:</span>
<span class="c1">#                             intercept = float(th.find(&#39;function&#39;).find(&#39;linear&#39;).find(&#39;intercept&#39;).find(&#39;real&#39;).text)</span>
<span class="c1">#                         except:</span>
<span class="c1">#                             intercept = int(th.find(&#39;function&#39;).find(&#39;linear&#39;).find(&#39;intercept&#39;).find(&#39;integer&#39;).text)</span>
<span class="c1">#                         slope = float(th.find(&#39;function&#39;).find(&#39;linear&#39;).find(&#39;slope&#39;).find(&#39;real&#39;).text)</span>
<span class="c1">#                     except:</span>
<span class="c1">#                         try:</span>
<span class="c1">#                             intercept = float(th.find(&#39;function&#39;).find(&#39;constant&#39;).find(&#39;real&#39;).text)</span>
<span class="c1">#                         except:</span>
<span class="c1">#                             intercept = float(th.find(&#39;function&#39;).find(&#39;constant&#39;).find(&#39;integer&#39;).text)</span>
<span class="c1">#                         slope = 0.0</span>
<span class="c1">#                     ## criteria[g.attrib[&#39;id&#39;]][&#39;thresholds&#39;][th.find(&#39;type&#39;).text] = (intercept,pdir*slope)</span>
<span class="c1">#                     criteria[g.attrib[&#39;id&#39;]][&#39;thresholds&#39;][th.find(&#39;type&#39;).text] = (intercept,slope)</span>

<span class="c1">#         self.criteria = criteria</span>
<span class="c1">#         # get evaluations&#39; description</span>
<span class="c1">#         description = {}</span>
<span class="c1">#         for elem in [x for x in xmcdaPerformanceTableau.find(&#39;performanceTable&#39;).find(&#39;description&#39;).getchildren()]:</span>
<span class="c1">#             description[elem.tag] = elem.text</span>
<span class="c1">#         self.evaluationDescription = description</span>
<span class="c1">#         # get evaluations</span>
<span class="c1">#         evaluation = {}</span>
<span class="c1">#         for v in xmcdaPerformanceTableau.find(&#39;performanceTable&#39;).findall(&#39;criterionEvaluations&#39;):</span>
<span class="c1">#             g = v.find(&#39;criterionID&#39;).text</span>
<span class="c1">#             try:</span>
<span class="c1">#                 if self.criteria[g][&#39;preferenceDirection&#39;] == &#39;min&#39;:</span>
<span class="c1">#                     pdir = -1</span>
<span class="c1">#                 else:</span>
<span class="c1">#                     pdir = 1</span>
<span class="c1">#             except:</span>
<span class="c1">#                 pdir = 1</span>
<span class="c1">#             evaluation[g] = {}</span>
<span class="c1">#             for x in v.findall(&#39;evaluation&#39;):</span>
<span class="c1">#                 try:</span>
<span class="c1">#                     value = x.find(&#39;value&#39;).find(&#39;integer&#39;).text</span>
<span class="c1">#                     evaluation[g][x.find(&#39;alternativeID&#39;).text]=int(value) * pdir</span>
<span class="c1">#                 except:</span>
<span class="c1">#                     value = x.find(&#39;value&#39;).find(&#39;real&#39;).text</span>
<span class="c1">#                     evaluation[g][x.find(&#39;alternativeID&#39;).text]=float(value) * pdir</span>
<span class="c1">#         self.evaluation = evaluation</span>
<span class="c1">#         # compute weigth preoder</span>
<span class="c1">#         self.weightPreorder = self.computeWeightPreorder()</span>

<span class="k">class</span> <span class="nc">_XMCDAPerformanceTableau</span><span class="p">(</span><span class="n">PerformanceTableau</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specialization of the general PerformanceTableau class for reading</span>
<span class="sd">    stored XMCDA formatted instances with exact decimal numbers.</span>
<span class="sd">    Using the inbuilt module</span>
<span class="sd">    xml.etree (for Python 2.5+).</span>

<span class="sd">    Param: fileName (without the extension .xml or .xmcda).   </span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;temp&#39;</span><span class="p">):</span>
        
        <span class="kn">from</span> <span class="nn">xml.etree</span> <span class="kn">import</span> <span class="n">ElementTree</span>
        
        <span class="n">fileNameExt</span> <span class="o">=</span> <span class="n">fileName</span> <span class="o">+</span> <span class="s1">&#39;.xmcda&#39;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileNameExt</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">fileNameExt</span> <span class="o">=</span> <span class="n">fileName</span> <span class="o">+</span> <span class="s1">&#39;.xml&#39;</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileNameExt</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">fileNameExt</span> <span class="o">=</span> <span class="n">fileName</span> <span class="o">+</span> <span class="s1">&#39;.xmcda2&#39;</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileNameExt</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: file </span><span class="si">%s</span><span class="s2">{.xmcda(2)|.xml} not found !&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fileName</span><span class="p">))</span>
        
        <span class="n">xmcdaPerformanceTableau</span> <span class="o">=</span> <span class="n">ElementTree</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">fo</span><span class="p">)</span><span class="o">.</span><span class="n">getroot</span><span class="p">()</span>
        <span class="c1"># get description</span>
        <span class="n">description</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xmcdaPerformanceTableau</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;caseReference&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">getchildren</span><span class="p">()]:</span>
            <span class="k">if</span> <span class="n">elem</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="s1">&#39;bibliography&#39;</span><span class="p">:</span>
                <span class="n">description</span><span class="p">[</span><span class="n">elem</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;subSubTitle&#39;</span><span class="p">:</span> <span class="s1">&#39;Bibliography&#39;</span><span class="p">}}</span>
                <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">for</span> <span class="n">bibEntry</span> <span class="ow">in</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">elem</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;bibEntry&#39;</span><span class="p">)]:</span>
                    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">description</span><span class="p">[</span><span class="n">elem</span><span class="o">.</span><span class="n">tag</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">bibEntry</span><span class="o">.</span><span class="n">text</span> 
            <span class="k">else</span><span class="p">:</span>
                <span class="n">description</span><span class="p">[</span><span class="n">elem</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">text</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">description</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">description</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reference</span> <span class="o">=</span> <span class="n">description</span><span class="p">[</span><span class="s1">&#39;comment&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="c1"># get method Data</span>
        <span class="n">parameter</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xmcdaPerformanceTableau</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;methodData&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;parameters&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">getchildren</span><span class="p">()]:</span>
            <span class="n">tag</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;label&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;real&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;integer&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>                        
            <span class="n">parameter</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameter</span> <span class="o">=</span> <span class="n">parameter</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1"># get alternatives&#39; description</span>
        <span class="n">description</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xmcdaPerformanceTableau</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;alternatives&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">getchildren</span><span class="p">()]:</span>
            <span class="n">description</span><span class="p">[</span><span class="n">elem</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">text</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actionsDescription</span> <span class="o">=</span> <span class="n">description</span>
        <span class="c1"># get alternatives</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xmcdaPerformanceTableau</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;alternatives&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;alternative&#39;</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;status&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">==</span> <span class="s1">&#39;active&#39;</span><span class="p">:</span>
                    <span class="n">Active</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">Active</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">Active</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="n">Active</span><span class="p">:</span>
                <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="p">[</span><span class="n">y</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">x</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">getchildren</span><span class="p">()]:</span>
                    <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]][</span><span class="n">elem</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">text</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">actions</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1"># get criteria&#39; description</span>
        <span class="n">description</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xmcdaPerformanceTableau</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;criteria&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">getchildren</span><span class="p">()]:</span>
            <span class="n">description</span><span class="p">[</span><span class="n">elem</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">text</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">criteriaDescription</span> <span class="o">=</span> <span class="n">description</span>
        <span class="c1">## get criteria</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">xmcdaPerformanceTableau</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;criteria&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;criterion&#39;</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                
                <span class="k">if</span> <span class="n">g</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;status&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">==</span> <span class="s1">&#39;active&#39;</span><span class="p">:</span>
                    <span class="n">Active</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">Active</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">Active</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="n">Active</span><span class="p">:</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="p">[</span><span class="n">y</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">getchildren</span><span class="p">()]:</span>
                    <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]][</span><span class="n">elem</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">text</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]][</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;criterionFunction&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;scale&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;quantitative&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;min&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;real&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;criterionFunction&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;scale&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;quantitative&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;max&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;real&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                <span class="c1">##criteria[g.attrib[&#39;id&#39;]][&#39;scale&#39;] = str((Min,Max))</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]][</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">Min</span><span class="p">,</span><span class="n">Max</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;significance&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;real&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;significance&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;integer&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;criterionFunction&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;scale&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;quantitative&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
                    <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;min&#39;</span><span class="p">:</span>
                        <span class="n">pdir</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">pdir</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">pdir</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>

                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">th</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;criterionFunction&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;thresholds&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;threshold&#39;</span><span class="p">):</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">intercept</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">th</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;function&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;linear&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;intercept&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;real&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="n">intercept</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">th</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;function&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;linear&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;intercept&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;integer&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                        <span class="n">slope</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">th</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;function&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;linear&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;slope&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;real&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">intercept</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">th</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;function&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;constant&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;real&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="n">intercept</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">th</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;function&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;constant&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;integer&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                        <span class="n">slope</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                    <span class="c1">## criteria[g.attrib[&#39;id&#39;]][&#39;thresholds&#39;][th.find(&#39;type&#39;).text] = (intercept,pdir*slope)</span>
                    <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="n">th</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">intercept</span><span class="p">,</span><span class="n">slope</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">criteria</span>
        <span class="c1"># get evaluations&#39; description</span>
        <span class="n">description</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xmcdaPerformanceTableau</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;performanceTable&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">getchildren</span><span class="p">()]:</span>
            <span class="n">description</span><span class="p">[</span><span class="n">elem</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">text</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluationDescription</span> <span class="o">=</span> <span class="n">description</span>
        <span class="c1"># get evaluations</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">xmcdaPerformanceTableau</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;performanceTable&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;criterionEvaluations&#39;</span><span class="p">):</span>
            <span class="n">g</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;criterionID&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;min&#39;</span><span class="p">:</span>
                    <span class="n">pdir</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pdir</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">pdir</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
            <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;evaluation&#39;</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;integer&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
                    <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;alternativeID&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">]</span><span class="o">=</span><span class="n">Decimal</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">*</span> <span class="n">pdir</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;real&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
                    <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;alternativeID&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">]</span><span class="o">=</span><span class="n">Decimal</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">*</span> <span class="n">pdir</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">evaluation</span>
        <span class="c1"># compute weigth preoder</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weightPreorder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeWeightPreorder</span><span class="p">()</span>

<div class="viewcode-block" id="XMCDA2PerformanceTableau"><a class="viewcode-back" href="../techDoc.html#perfTabs.XMCDA2PerformanceTableau">[docs]</a><span class="k">class</span> <span class="nc">XMCDA2PerformanceTableau</span><span class="p">(</span><span class="n">PerformanceTableau</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specialization of the general PerformanceTableau class for reading</span>
<span class="sd">    stored XMCDA 2.0 formatted instances with exact decimal numbers.</span>
<span class="sd">    Using the inbuilt module xml.etree (for Python 2.5+).</span>

<span class="sd">    Parameters:</span>
<span class="sd">        * fileName is given without the extension ``.xml`` or ``.xmcda``,</span>
<span class="sd">        * HasSeparatedWeights in XMCDA 2.0.0 encoding (default = False),</span>
<span class="sd">        * HasSeparatedThresholds in XMCDA 2.0.0 encoding (default = False),</span>
<span class="sd">        * stringInput: instantiates from an XMCDA 2.0 encoded string argument.</span>
<span class="sd">           </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">#from collections import OrderedDict</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;temp&#39;</span><span class="p">,</span><span class="n">HasSeparatedWeights</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="n">HasSeparatedThresholds</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">stringInput</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        
        <span class="kn">from</span> <span class="nn">xml.etree</span> <span class="kn">import</span> <span class="n">ElementTree</span>
        <span class="k">if</span> <span class="n">stringInput</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">fileNameExt</span> <span class="o">=</span> <span class="n">fileName</span> <span class="o">+</span> <span class="s1">&#39;.xmcda2&#39;</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileNameExt</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">fileNameExt</span> <span class="o">=</span> <span class="n">fileName</span> <span class="o">+</span> <span class="s1">&#39;.xml&#39;</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileNameExt</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: file </span><span class="si">%s</span><span class="s2">{.xmcda2|.xml} not found !&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fileName</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">StringIO</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span> <span class="o">=</span> <span class="n">StringIO</span><span class="p">(</span><span class="n">stringInput</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: stringInput </span><span class="si">%s</span><span class="s2"> !&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">stringInput</span><span class="p">)))</span>
            
        <span class="n">XMCDA</span> <span class="o">=</span> <span class="n">ElementTree</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">fo</span><span class="p">)</span><span class="o">.</span><span class="n">getroot</span><span class="p">()</span>
        <span class="c1"># get name</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">XMCDA</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;projectReference&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;temp&#39;</span>
        <span class="c1"># get description</span>
        <span class="n">description</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">XMCDA</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;projectReference&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">getchildren</span><span class="p">()]:</span>
            <span class="k">if</span> <span class="n">elem</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="s1">&#39;bibliography&#39;</span><span class="p">:</span>
                <span class="n">description</span><span class="p">[</span><span class="n">elem</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;subSubTitle&#39;</span><span class="p">:</span> <span class="s1">&#39;Bibliography&#39;</span><span class="p">}}</span>
                <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">for</span> <span class="n">bibEntry</span> <span class="ow">in</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">elem</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;bibEntry&#39;</span><span class="p">)]:</span>
                    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">description</span><span class="p">[</span><span class="n">elem</span><span class="o">.</span><span class="n">tag</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">bibEntry</span><span class="o">.</span><span class="n">text</span> 
            <span class="k">else</span><span class="p">:</span>
                <span class="n">description</span><span class="p">[</span><span class="n">elem</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">text</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">description</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reference</span> <span class="o">=</span> <span class="n">description</span><span class="p">[</span><span class="s1">&#39;comment&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="c1"># get method Parameters</span>
        <span class="n">parameter</span> <span class="o">=</span> <span class="p">{}</span>
            
        <span class="k">if</span> <span class="n">XMCDA</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;methodParameters&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;parameters&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">XMCDA</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;methodParameters&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;parameters&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;parameter&#39;</span><span class="p">):</span>
                <span class="n">tag</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;label&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">value</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;real&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">value</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;integer&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="n">value</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">parameter</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
                <span class="c1">#print tag,value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameter</span> <span class="o">=</span> <span class="n">parameter</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="c1"># get alternatives&#39; description</span>
        <span class="n">description</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">XMCDA</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;alternatives&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">getchildren</span><span class="p">()]:</span>
            <span class="n">description</span><span class="p">[</span><span class="n">elem</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">text</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actionsDescription</span> <span class="o">=</span> <span class="n">description</span>
        <span class="c1"># get alternatives</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">XMCDA</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;alternatives&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;alternative&#39;</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;active&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span><span class="p">:</span>
                    <span class="n">Active</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">Active</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">Active</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="n">Active</span><span class="p">:</span>
                <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="p">[</span><span class="n">y</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">x</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">getchildren</span><span class="p">()]:</span>
                        <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]][</span><span class="n">elem</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">text</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">actions</span>
        
        <span class="k">if</span> <span class="n">XMCDA</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;objectives&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># objectives are defined</span>
            <span class="n">objectives</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
            <span class="c1"># get objectives&#39; description</span>
            <span class="k">if</span> <span class="n">XMCDA</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;objectives&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">description</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">XMCDA</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;criteria&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">getchildren</span><span class="p">()]:</span>
                    <span class="n">description</span><span class="p">[</span><span class="n">elem</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">text</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">objectivesDescription</span> <span class="o">=</span> <span class="n">description</span>
            <span class="c1">## get objectives</span>
            <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">XMCDA</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;objectives&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;objective&#39;</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;converting objective </span><span class="si">%s</span><span class="s1"> data&#39;</span> <span class="o">%</span> <span class="n">obj</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>
                <span class="k">try</span><span class="p">:</span>             
                    <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;active&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span><span class="p">:</span>
                        <span class="n">Active</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">Active</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">Active</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">if</span> <span class="n">Active</span><span class="p">:</span>
                    <span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="c1">#name</span>
                    <span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span><span class="n">obj</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
                    <span class="c1">#description</span>
                    <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="p">[</span><span class="n">y</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">getchildren</span><span class="p">()]:</span>
                        <span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]][</span><span class="n">elem</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">text</span>
                    <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;weight&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;weight&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;real&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="n">criteria</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;weight&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;integer&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;objectiveCriteria&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]][</span><span class="s1">&#39;criteria&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">literal_eval</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;objectiveCriteria&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span> <span class="o">=</span> <span class="n">objectives</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># no objectives are given</span>
            <span class="k">pass</span>
        
        <span class="n">criteria</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="c1"># get criteria&#39; description</span>
        <span class="k">if</span> <span class="n">XMCDA</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;criteria&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">description</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">XMCDA</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;criteria&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">getchildren</span><span class="p">()]:</span>
                <span class="n">description</span><span class="p">[</span><span class="n">elem</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">text</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">criteriaDescription</span> <span class="o">=</span> <span class="n">description</span>
        <span class="c1">## get criteria</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">XMCDA</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;criteria&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;criterion&#39;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;converting criterion </span><span class="si">%s</span><span class="s1"> data&#39;</span> <span class="o">%</span> <span class="n">g</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>
            <span class="k">try</span><span class="p">:</span>             
                <span class="k">if</span> <span class="n">g</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;active&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span><span class="p">:</span>
                    <span class="n">Active</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">Active</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">Active</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="n">Active</span><span class="p">:</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="c1">#name</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span><span class="n">g</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
                <span class="c1">#description</span>
                <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="p">[</span><span class="n">y</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">getchildren</span><span class="p">()]:</span>
                    <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]][</span><span class="n">elem</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">text</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]][</span><span class="s1">&#39;objective&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;criterionObjective&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="c1">#prefrenceDirection</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;scale&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;quantitative&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
                <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;min&#39;</span><span class="p">:</span>
                    <span class="n">pdir</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pdir</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
                <span class="c1">#scale</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]][</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;scale&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;quantitative&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;minimum&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;real&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;scale&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;quantitative&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;maximum&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;real&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]][</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">Min</span><span class="p">,</span><span class="n">Max</span><span class="p">)</span>
                <span class="c1">##criteria[g.attrib[&#39;id&#39;]][&#39;scale&#39;] = (Min*pdir,Max*pdir)</span>
                <span class="c1">#weights</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">HasSeparatedWeights</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">cv</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;criterionValue&#39;</span><span class="p">)</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">cv</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;real&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">cv</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;integer&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="n">HasSeparatedWeights</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="c1">#thresholds</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">HasSeparatedThresholds</span><span class="p">:</span>                    
                    <span class="k">if</span> <span class="n">g</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;thresholds&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">th</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;thresholds&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;threshold&#39;</span><span class="p">):</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="k">try</span><span class="p">:</span>
                                    <span class="n">intercept</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">th</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;linear&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;intercept&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;real&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                                <span class="k">except</span><span class="p">:</span>
                                    <span class="n">intercept</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">th</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;linear&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;intercept&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;integer&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                                <span class="n">slope</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">th</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;linear&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;slope&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;real&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="k">try</span><span class="p">:</span>
                                    <span class="n">intercept</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">th</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;constant&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;real&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                                <span class="k">except</span><span class="p">:</span>
                                    <span class="n">intercept</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">th</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;constant&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;integer&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                                <span class="n">slope</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                            <span class="c1">## criteria[g.attrib[&#39;id&#39;]][&#39;thresholds&#39;][th.attrib[&#39;id&#39;]] = (intercept,pdir*slope)</span>
                            <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="n">th</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="n">intercept</span><span class="p">,</span><span class="n">slope</span><span class="p">)</span>


        <span class="c1"># get separated criteria weights</span>
        <span class="k">if</span> <span class="n">HasSeparatedWeights</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">cv</span> <span class="ow">in</span> <span class="n">XMCDA</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;criteriaValues&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;criterionValue&#39;</span><span class="p">):</span>
                <span class="n">g</span> <span class="o">=</span> <span class="n">cv</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;criterionID&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">w</span> <span class="o">=</span> <span class="n">cv</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;real&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">w</span> <span class="o">=</span> <span class="n">cv</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;integer&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">cv</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;criterionID&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>

        <span class="c1"># get separated criteria thresholds</span>
        <span class="k">if</span> <span class="n">HasSeparatedThresholds</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">cth</span> <span class="ow">in</span> <span class="n">XMCDA</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;criteriaThresholds&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;criterionThresholds&#39;</span><span class="p">):</span>
                    <span class="n">g</span> <span class="o">=</span> <span class="n">cth</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;criterionID&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
                    <span class="k">for</span> <span class="n">th</span> <span class="ow">in</span> <span class="n">cth</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;thresholds&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;threshold&#39;</span><span class="p">):</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">intercept</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">th</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;linear&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;intercept&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;real&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">intercept</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">th</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;linear&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;intercept&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;integer&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                            <span class="n">slope</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">th</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;linear&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;slope&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;real&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">intercept</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">th</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;constant&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;real&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">intercept</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">th</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;constant&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;integer&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                            <span class="n">slope</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                        <span class="c1">## criteria[g][&#39;thresholds&#39;][th.attrib[&#39;id&#39;]] = (intercept,pdir*slope)</span>
                        <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="n">th</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="n">intercept</span><span class="p">,</span><span class="n">slope</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>

        <span class="c1"># allocate final criteria dictionary        </span>
        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">criteria</span>
                    
        <span class="c1"># get coalitions</span>
        

        
        <span class="c1"># get evaluations&#39; description</span>
        <span class="n">description</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">XMCDA</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;performanceTable&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">getchildren</span><span class="p">()]:</span>
            <span class="n">description</span><span class="p">[</span><span class="n">elem</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">text</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluationDescription</span> <span class="o">=</span> <span class="n">description</span>
        <span class="c1"># get evaluations</span>
        <span class="n">evaluationAP</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">XMCDA</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;performanceTable&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;alternativePerformances&#39;</span><span class="p">):</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;alternativeID&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
            <span class="n">evaluationAP</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;performance&#39;</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;integer&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
                    <span class="n">evaluationAP</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">x</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;criterionID&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">]</span><span class="o">=</span><span class="n">Decimal</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">value</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;real&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
                        <span class="n">evaluationAP</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">x</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;criterionID&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">]</span><span class="o">=</span><span class="n">Decimal</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="n">evaluationAP</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">x</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;criterionID&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">]</span><span class="o">=</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-999&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluationAP</span> <span class="o">=</span> <span class="n">evaluationAP</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;min&#39;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
                        <span class="n">pdir</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">pdir</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pdir</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">pdir</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
            <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">evaluationAP</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">g</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-999&#39;</span><span class="p">):</span>
                    <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">evaluationAP</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">g</span><span class="p">]</span> <span class="o">*</span> <span class="n">pdir</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">evaluationAP</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">g</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">evaluation</span>
        <span class="c1"># compute weigth preoder</span>

        
        <span class="bp">self</span><span class="o">.</span><span class="n">weightPreorder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeWeightPreorder</span><span class="p">()</span></div>

<span class="c1">###########</span>
<div class="viewcode-block" id="CSVPerformanceTableau"><a class="viewcode-back" href="../techDoc.html#perfTabs.CSVPerformanceTableau">[docs]</a><span class="k">class</span> <span class="nc">CSVPerformanceTableau</span><span class="p">(</span><span class="n">PerformanceTableau</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reading stored CSV encoded actions x criteria PerformanceTableau instances, Using the inbuilt module csv.</span>

<span class="sd">    Param:</span>
<span class="sd">        fileName (without the extension .csv).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;temp&#39;</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">csv</span> <span class="kn">import</span> <span class="n">reader</span>
        <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">fileNameExt</span> <span class="o">=</span> <span class="n">fileName</span> <span class="o">+</span> <span class="s1">&#39;.csv&#39;</span>
            <span class="n">fi</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileNameExt</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
            <span class="n">csvReader</span> <span class="o">=</span> <span class="n">reader</span><span class="p">(</span><span class="n">fi</span><span class="p">)</span>
            <span class="n">csvText</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">csvReader</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;input&#39;</span><span class="p">,</span><span class="n">csvText</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: File </span><span class="si">%s</span><span class="s2">.csv not found !!&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fileName</span><span class="p">))</span>
            
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">fileName</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reference</span> <span class="o">=</span> <span class="s1">&#39;CSV PerformanceTableau input method.&#39;</span>
        <span class="c1"># actions dictionary</span>
        <span class="n">na</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">csvText</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">-</span><span class="mi">1</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">na</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="n">na</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">csvText</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">([(</span><span class="n">csvText</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="p">],{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="n">csvText</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="p">],</span><span class="s1">&#39;comment&#39;</span><span class="p">:</span><span class="s1">&#39;potential decision action&#39;</span><span class="p">})</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="n">na</span><span class="o">+</span><span class="mi">1</span><span class="p">)])</span>

        <span class="c1"># criteria dictionary</span>
        <span class="n">ng</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">csvText</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">ng</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="n">csvText</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">([(</span><span class="n">csvText</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">],{</span><span class="s1">&#39;comment&#39;</span><span class="p">:</span><span class="s1">&#39;performance criteria&#39;</span><span class="p">})</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">ng</span><span class="o">+</span><span class="mi">1</span><span class="p">)])</span>

        <span class="c1"># criteria characteristics</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">ng</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">g</span> <span class="o">=</span> <span class="n">csvText</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>  <span class="o">=</span> <span class="n">csvText</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>          
            <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span>  <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">csvText</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span>  <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">csvText</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">3</span><span class="p">])</span> 
            <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">csvText</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">4</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">]</span>  <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">csvText</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">5</span><span class="p">])</span>
            <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">])</span>
 
        <span class="c1"># evaluation tableaut.ev</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">ng</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">evaluation</span><span class="p">[</span><span class="n">csvText</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="n">na</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
                <span class="n">evaluation</span><span class="p">[</span><span class="n">csvText</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">]][</span><span class="n">csvText</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">csvText</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">evaluation</span></div>

           
            

<span class="c1">#----------test Digraph class ----------------</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    
    <span class="kn">from</span> <span class="nn">digraphs</span> <span class="kn">import</span> <span class="o">*</span>
    <span class="kn">from</span> <span class="nn">outrankingDigraphs</span> <span class="kn">import</span> <span class="o">*</span>
    <span class="kn">import</span> <span class="nn">sortingDigraphs</span>
    <span class="kn">import</span> <span class="nn">linearOrders</span>
    <span class="kn">from</span> <span class="nn">transitiveDigraphs</span> <span class="kn">import</span> <span class="o">*</span>
    <span class="kn">from</span> <span class="nn">randomPerfTabs</span> <span class="kn">import</span> <span class="o">*</span>
    <span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">time</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*-------- Testing classes and methods -------&#39;</span><span class="p">)</span>

<span class="c1">##    t = FullRandomPerformanceTableau(commonScale=(0.0,100.0),numberOfCriteria=10,numberOfActions=10,commonMode=(&#39;triangular&#39;,30.0,0.7))</span>
    <span class="c1">## t.showStatistics()</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">Random3ObjectivesPerformanceTableau</span><span class="p">(</span><span class="n">numberOfCriteria</span><span class="o">=</span><span class="mi">13</span><span class="p">,</span>
                                   <span class="n">numberOfActions</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span>
                                   <span class="n">weightDistribution</span><span class="o">=</span><span class="s1">&#39;equiobjectives&#39;</span><span class="p">,</span>
                                   <span class="n">IntegerWeights</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                   <span class="c1">#NegativeWeights=False,</span>
                                   <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                   <span class="n">missingDataProbability</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
                                   <span class="n">seed</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                                            <span class="c1">#Threading=False</span>
                                            <span class="p">)</span>
    <span class="n">t</span><span class="o">.</span><span class="n">showWeightPreorder</span><span class="p">()</span>
    <span class="n">t</span><span class="o">.</span><span class="n">showHTMLPerformanceHeatmap</span><span class="p">(</span><span class="n">Correlations</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">rankingRule</span><span class="o">=</span><span class="s1">&#39;NetFlows&#39;</span><span class="p">,</span><span class="n">Transposed</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
   
    
    
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*------------------*&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;If you see this line all tests were passed successfully :-)&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Enjoy !&#39;</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*************************************&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;* R.B. August 2015                  *&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;* $Revision: 1.37 $                 *&#39;</span><span class="p">)</span>                   
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*************************************&#39;</span><span class="p">)</span>

<span class="c1">#############################</span>
<span class="c1"># Log record for changes:</span>
<span class="c1"># $Log: perfTabs.py,v $</span>
<span class="c1"># Revision 1.37  2012/12/24 15:18:21</span>
<span class="c1"># compatibility patch for old (-2008) python performance tableaux</span>
<span class="c1">#############################</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Digraph3 3.7-3200+ documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Module code</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2012-2020, Raymond Bisdorff.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.3.0.
    </div>
  </body>
</html>